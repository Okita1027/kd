<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="icon" href="/kd/favicon.ico"><title>Prism | æ²–ç”°ã•ã‚“ã®çŸ¥è­˜ãƒ™ãƒ¼ã‚¹</title><meta name="description" content="Prism">
    <link rel="preload" href="/kd/assets/style-BlkajWJn.css" as="style"><link rel="stylesheet" href="/kd/assets/style-BlkajWJn.css">
    <link rel="modulepreload" href="/kd/assets/app-DXMAELBf.js"><link rel="modulepreload" href="/kd/assets/Prism.html-BiyF7yh0.js"><link rel="modulepreload" href="/kd/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/kd/assets/index.html-D4FXqPIK.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-D5DWvXGD.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-DnhksnhL.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BUpJuEjR.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BVUuVjHc.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-C3Fv6zAu.js" as="script"><link rel="prefetch" href="/kd/assets/JDK17.html-BeF8bpxo.js" as="script"><link rel="prefetch" href="/kd/assets/JDK21.html-BsLsCRJK.js" as="script"><link rel="prefetch" href="/kd/assets/JDK8.html-CEQ3vHOm.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-ClMefzSK.js" as="script"><link rel="prefetch" href="/kd/assets/functional.html-CtJxLwEW.js" as="script"><link rel="prefetch" href="/kd/assets/grammar.html-B4VfM_1o.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-DkfBsv6-.js" as="script"><link rel="prefetch" href="/kd/assets/JVM.html-EJtwEbND.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BoX9l-_0.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-CY_kfQGq.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-w2RGejeu.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-C7lH9Zmp.js" as="script"><link rel="prefetch" href="/kd/assets/pattern.html-f5uDEn2E.js" as="script"><link rel="prefetch" href="/kd/assets/principle.html-DVEwRKft.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-DfKNrP60.js" as="script"><link rel="prefetch" href="/kd/assets/centos.html-ClxbrvTm.js" as="script"><link rel="prefetch" href="/kd/assets/common.html-0MNnUpYG.js" as="script"><link rel="prefetch" href="/kd/assets/shell.html-B8_HWZW1.js" as="script"><link rel="prefetch" href="/kd/assets/ubuntu.html-d4OqAr1v.js" as="script"><link rel="prefetch" href="/kd/assets/wsl.html-D6-DrmW6.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BgwNqlGK.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-BGUQG-SM.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-CZXdwPmF.js" as="script"><link rel="prefetch" href="/kd/assets/principle.html-Gm71NKSN.js" as="script"><link rel="prefetch" href="/kd/assets/uml.html-CsDI5Gxc.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-D8PmlsKq.js" as="script"><link rel="prefetch" href="/kd/assets/protocol.html-DYDkzYi8.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-CKpMKaOI.js" as="script"><link rel="prefetch" href="/kd/assets/VersionFeature.html-C_QIG-Tm.js" as="script"><link rel="prefetch" href="/kd/assets/special.html-BNZtqjPC.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BYHQbqJK.js" as="script"><link rel="prefetch" href="/kd/assets/SignalR.html-_y71lGjg.js" as="script"><link rel="prefetch" href="/kd/assets/api interface.html-CkhW3GrF.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-BaUqYEdF.js" as="script"><link rel="prefetch" href="/kd/assets/quick start.html-sV3fLF2m.js" as="script"><link rel="prefetch" href="/kd/assets/senior.html-ypFgf6io.js" as="script"><link rel="prefetch" href="/kd/assets/web application.html-1gNYO3qI.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BsV-oNE0.js" as="script"><link rel="prefetch" href="/kd/assets/change track.html-CuAmmUek.js" as="script"><link rel="prefetch" href="/kd/assets/create model.html-ah1vXu6M.js" as="script"><link rel="prefetch" href="/kd/assets/dbcontext.html-DyLqWQq4.js" as="script"><link rel="prefetch" href="/kd/assets/log.html-CYYUuI90.js" as="script"><link rel="prefetch" href="/kd/assets/manage db.html-BBHKB_FI.js" as="script"><link rel="prefetch" href="/kd/assets/query data.html-CDiem0_8.js" as="script"><link rel="prefetch" href="/kd/assets/save data.html-zq7z14HL.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-d3U-Y8yl.js" as="script"><link rel="prefetch" href="/kd/assets/Component.html-Cg7wmBe9.js" as="script"><link rel="prefetch" href="/kd/assets/Core.html-nSeJVoNP.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-D68_RYFn.js" as="script"><link rel="prefetch" href="/kd/assets/ReactiveUI.html-DGqLyfJo.js" as="script"><link rel="prefetch" href="/kd/assets/ReactiveX.html-dj-C1PEM.js" as="script"><link rel="prefetch" href="/kd/assets/xaml.html-9RzD7FXA.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-ByNnGqhS.js" as="script"><link rel="prefetch" href="/kd/assets/MongoDB.html-6AWLoySU.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-NX-1l78V.js" as="script"><link rel="prefetch" href="/kd/assets/MySQL.html-BWjPjR3u.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BfDBjjSG.js" as="script"><link rel="prefetch" href="/kd/assets/PostgreSQL.html-Bixuma5Z.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-DAuswcJC.js" as="script"><link rel="prefetch" href="/kd/assets/senior.html-DOLmrbGq.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-CwuRHFdD.js" as="script"><link rel="prefetch" href="/kd/assets/senior.html-Csa0wZoJ.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BWt5ANAn.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-DYW-2TNN.js" as="script"><link rel="prefetch" href="/kd/assets/practical.html-DXw1M3-p.js" as="script"><link rel="prefetch" href="/kd/assets/GithubActions.html-DiSjQcHu.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-B2kvYwZ3.js" as="script"><link rel="prefetch" href="/kd/assets/core.html-DJ4TjO1K.js" as="script"><link rel="prefetch" href="/kd/assets/install.html-DxbNtiXD.js" as="script"><link rel="prefetch" href="/kd/assets/senior.html-7eLwFGtm.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-B7CtMWWl.js" as="script"><link rel="prefetch" href="/kd/assets/Mybatis-plus.html-CScRYdLB.js" as="script"><link rel="prefetch" href="/kd/assets/Mybatis.html-D7dIsLSg.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-OYJwnO4V.js" as="script"><link rel="prefetch" href="/kd/assets/Apache.html-BC1IaZoZ.js" as="script"><link rel="prefetch" href="/kd/assets/Nginx.html-X71NlDK9.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BKLM44lR.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BIn048AF.js" as="script"><link rel="prefetch" href="/kd/assets/SpringMVC.html-CjwcoMW7.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BzB6mooO.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BsMk0xlf.js" as="script"><link rel="prefetch" href="/kd/assets/bun.html-BXlFGCtR.js" as="script"><link rel="prefetch" href="/kd/assets/pnpm.html-D3gK-EGs.js" as="script"><link rel="prefetch" href="/kd/assets/vite.html-BKwtWkBY.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-Hngru9TE.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-BYL5HqDM.js" as="script"><link rel="prefetch" href="/kd/assets/senior.html-B-Eg92JF.js" as="script"><link rel="prefetch" href="/kd/assets/AntDesign.html-QkeyuJXF.js" as="script"><link rel="prefetch" href="/kd/assets/Query.html-CC_qbf-f.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-AEALHWCd.js" as="script"><link rel="prefetch" href="/kd/assets/React.html-xPxCz-F_.js" as="script"><link rel="prefetch" href="/kd/assets/Redux.html-BcQA49nr.js" as="script"><link rel="prefetch" href="/kd/assets/Router.html-DulpW2pq.js" as="script"><link rel="prefetch" href="/kd/assets/Zustand.html-BucYVtCI.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-B1NidqvM.js" as="script"><link rel="prefetch" href="/kd/assets/SCSS.html-wF_TLbN2.js" as="script"><link rel="prefetch" href="/kd/assets/Tailwind CSS.html-D69AAEiH.js" as="script"><link rel="prefetch" href="/kd/assets/Uno CSS.html-DWwxeMCy.js" as="script"><link rel="prefetch" href="/kd/assets/Axios.html-DcG1za6S.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-B7N1BKew.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-swWDvldR.js" as="script"><link rel="prefetch" href="/kd/assets/TS(2024).html-b9q7uwFe.js" as="script"><link rel="prefetch" href="/kd/assets/TS(2025.html-rbh3yeHl.js" as="script"><link rel="prefetch" href="/kd/assets/Pinia.html-BVPLbRMY.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-1iRSKnDH.js" as="script"><link rel="prefetch" href="/kd/assets/Vue.html-DQxv4Jdh.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-B54Vny0e.js" as="script"><link rel="prefetch" href="/kd/assets/behavioral.html-CCzMRwSz.js" as="script"><link rel="prefetch" href="/kd/assets/creation.html-CfRK02xr.js" as="script"><link rel="prefetch" href="/kd/assets/structural.html-ETou4qML.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-Bjt_y3t5.js" as="script"><link rel="prefetch" href="/kd/assets/core.html-DEzSo3SK.js" as="script"><link rel="prefetch" href="/kd/assets/install.html-CbDmpRGY.js" as="script"><link rel="prefetch" href="/kd/assets/AOP.html-DAs0wkS8.js" as="script"><link rel="prefetch" href="/kd/assets/IOC_Annoation.html-DGWY5H0R.js" as="script"><link rel="prefetch" href="/kd/assets/IOC_XML.html-Du2c7DXf.js" as="script"><link rel="prefetch" href="/kd/assets/IOC_senior.html-BgklL1_U.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-BHgTTwiY.js" as="script"><link rel="prefetch" href="/kd/assets/äº‹åŠ¡.html-BI9uu6mf.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-kOrympcd.js" as="script"><link rel="prefetch" href="/kd/assets/core.html-B_R94sgQ.js" as="script"><link rel="prefetch" href="/kd/assets/integration.html-vDRcTmnJ.js" as="script"><link rel="prefetch" href="/kd/assets/yaml.html-Dwwow2MP.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-C06pNZ33.js" as="script"><link rel="prefetch" href="/kd/assets/core.html-YIbLagFL.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-B7W5_NMV.js" as="script"><link rel="prefetch" href="/kd/assets/basic.html-Ct0bgH8C.js" as="script"><link rel="prefetch" href="/kd/assets/404.html-BMogipfU.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-WyfRoij6.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-DdiCc9Z0.js" as="script"><link rel="prefetch" href="/kd/assets/index.html-WwhmS4eI.js" as="script"><link rel="prefetch" href="/kd/assets/mermaid.esm.min-ClIof-aE.js" as="script"><link rel="prefetch" href="/kd/assets/reveal.esm-CO_yijB4.js" as="script"><link rel="prefetch" href="/kd/assets/markdown.esm-FqDzZkgN.js" as="script"><link rel="prefetch" href="/kd/assets/highlight.esm-UsqGfS9W.js" as="script"><link rel="prefetch" href="/kd/assets/math.esm-DMnd_zjx.js" as="script"><link rel="prefetch" href="/kd/assets/search.esm-BbDx6egk.js" as="script"><link rel="prefetch" href="/kd/assets/notes.esm-DzYVKwhb.js" as="script"><link rel="prefetch" href="/kd/assets/zoom.esm-CFEecXZN.js" as="script"><link rel="prefetch" href="/kd/assets/photoswipe.esm-CKV1Bsxh.js" as="script"><link rel="prefetch" href="/kd/assets/SearchResult-hPj3qyjw.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/kd/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo light" src="/kd/logo.png" alt><img class="vp-nav-logo dark" src="/kd/logo-dark.png" alt><span class="vp-site-name hide-in-pad">æ²–ç”°ã•ã‚“ã®çŸ¥è­˜ãƒ™ãƒ¼ã‚¹</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/kd/" aria-label="ä¸»é¡µ"><!--[--><img class="vp-icon" src="/kd/home.png" alt aria-hidden no-view sizing="height" height="1em"><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/kd/basic/" aria-label="åŸºç¡€"><!--[--><img class="vp-icon" src="/kd/icon/java.png" alt aria-hidden no-view sizing="height" height="1em"><!--]-->åŸºç¡€<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/kd/database/" aria-label="æ•°æ®åº“"><!--[--><img class="vp-icon" src="/kd/icon/database.svg" alt aria-hidden no-view sizing="height" height="1em"><!--]-->æ•°æ®åº“<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/kd/frame/" aria-label="æ¡†æ¶"><!--[--><img class="vp-icon" src="/kd/icon/frame.png" alt aria-hidden no-view sizing="height" height="1em"><!--]-->æ¡†æ¶<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/kd/web/" aria-label="å‰ç«¯"><!--[--><img class="vp-icon" src="/kd/icon/web.png" alt aria-hidden no-view sizing="height" height="1em"><!--]-->å‰ç«¯<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/kd/dotnet/" aria-label=".NET"><!--[--><img class="vp-icon" src="/kd/icon/donet.png" alt aria-hidden no-view sizing="height" height="1em"><!--]-->.NET<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Okita1027/kd/" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!--[--><button type="button" class="slimsearch-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">æœç´¢</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">.NET Core</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">C#è¯­æ³•ç‰¹æ€§</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">EF Core</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">WPF</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/kd/dotnet/wpf/xaml.html" aria-label="XAML"><!---->XAML<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/kd/dotnet/wpf/Component.html" aria-label="ç»„ä»¶"><!---->ç»„ä»¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/kd/dotnet/wpf/Core.html" aria-label="å†…éƒ¨ä¸–ç•Œ"><!---->å†…éƒ¨ä¸–ç•Œ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/kd/dotnet/wpf/ReactiveX.html" aria-label="ReactiveX"><!---->ReactiveX<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/kd/dotnet/wpf/ReactiveUI.html" aria-label="ReactiveUI"><!---->ReactiveUI<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/kd/dotnet/wpf/Prism.html" aria-label="Prism"><!---->Prism<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä¸Šä½æœº</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä¸‹ä½æœº</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Prism</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://zhiyun.space" target="_blank" rel="noopener noreferrer">Okita</a></span><span property="author" content="Okita"></span></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025/12/23</span><meta property="datePublished" content="2025-12-23T08:31:53.000Z"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color6" role>.NET</span><span class="page-category-item color7" role>WPF</span><!--]--><meta property="articleSection" content=".NET,WPF"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color6" role>.NET</span><!--]--><meta property="keywords" content=".NET"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 66 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT66M"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 19845 å­—</span><meta property="wordCount" content="19845"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><blockquote><p><a href="https://coreylyn.github.io/Prism-Documentation-zh/#/" target="_blank" rel="noopener noreferrer">Prism ä¸­æ–‡æ–‡æ¡£</a></p></blockquote><h2 id="å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤"><span>å‘½ä»¤</span></a></h2><h3 id="å‘½ä»¤æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤æ“ä½œ"><span>å‘½ä»¤æ“ä½œ</span></a></h3><h4 id="åˆ›å»ºdelegate-command" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºdelegate-command"><span>åˆ›å»ºDelegate Command</span></a></h4><p>Prism æä¾› <code>DelegateCommand</code> å’Œ <code>DelegateCommand&lt;T&gt;</code>ï¼Œå®ƒä»¬éƒ½æ˜¯ Prism å¯¹ <code>ICommand</code> çš„å°è£…ï¼Œå®ç° MVVM ä¸­å¸¸ç”¨çš„å‘½ä»¤æ¨¡å¼ã€‚</p><h5 id="ä¸å¸¦å‚æ•°çš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ä¸å¸¦å‚æ•°çš„å‘½ä»¤"><span>ä¸å¸¦å‚æ•°çš„å‘½ä»¤</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å®šä¹‰å‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åˆå§‹åŒ–ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰§è¡Œé€»è¾‘ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆ¤æ–­èƒ½å¦æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ExecuteSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">CanExecuteSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ExecuteSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç‚¹å‡»æŒ‰é’®åçš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanExecuteSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è¿”å› true æŒ‰é’®å¯ç”¨ï¼Œè¿”å› false æŒ‰é’®ç¦ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¸¦å‚æ•°çš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¸¦å‚æ•°çš„å‘½ä»¤"><span>å¸¦å‚æ•°çš„å‘½ä»¤</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ³›å‹å®šä¹‰ï¼Œå‡è®¾å‚æ•°æ˜¯ string</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ClickMeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">private</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è¿™é‡Œçš„å‚æ•°ç±»å‹å˜ä¸º string</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    ClickMeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ExecuteClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ExecuteClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // parameter å°±æ˜¯ XAML ä¼ è¿‡æ¥çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE]</p><p><strong><code>DelegateCommand&lt;T&gt;</code> ä¸æ”¯æŒå€¼ç±»å‹</strong>ï¼ˆå¦‚ <code>int</code>, <code>bool</code>ï¼‰ å› ä¸º XAML åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨ <code>CanExecute(null)</code>ï¼Œè‹¥ <code>T</code> æ˜¯å€¼ç±»å‹ä¼šå¯¼è‡´å¼‚å¸¸ã€‚</p></blockquote><h4 id="åœ¨viewä¸­è°ƒç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#åœ¨viewä¸­è°ƒç”¨å‘½ä»¤"><span>åœ¨Viewä¸­è°ƒç”¨å‘½ä»¤</span></a></h4><p>Prism ä¸­çš„å‘½ä»¤é€šå¸¸ä¸ WPF æ§ä»¶çš„ <code>Command</code> å±æ€§ç»‘å®šï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Submit&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SubmitCommand}&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        CommandParameter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;OrderId&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥ç»‘å®šä¼šå°†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶è‡ªåŠ¨å…³è”åˆ° ViewModel ä¸­çš„å‘½ä»¤ï¼ŒåŒæ—¶ä¼ é€’å‘½ä»¤å‚æ•°ï¼ˆå¯é€‰ï¼‰ã€‚å½“å‘½ä»¤çš„ <code>CanExecute</code> è¿”å› <code>false</code> æ—¶ï¼Œè¯¥æŒ‰é’®è‡ªåŠ¨ç¦ç”¨ï¼›å½“è¿”å› <code>true</code> æ—¶æŒ‰é’®å¯ç”¨ã€‚</p><h4 id="é€šçŸ¥uiå‘½ä»¤çŠ¶æ€å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#é€šçŸ¥uiå‘½ä»¤çŠ¶æ€å˜åŒ–"><span>é€šçŸ¥UIå‘½ä»¤çŠ¶æ€å˜åŒ–</span></a></h4><p>Prism æä¾›äº†å¤šç§æ–¹å¼ï¼Œä½¿å¾—å½“ ViewModel å†…éƒ¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥ UI å¯¹å‘½ä»¤çš„å¯æ‰§è¡ŒçŠ¶æ€ï¼ˆCanExecuteï¼‰åšå‡ºå“åº”ï¼š</p><h5 id="raisecanexecutechanged" tabindex="-1"><a class="header-anchor" href="#raisecanexecutechanged"><span>RaiseCanExecuteChanged</span></a></h5><p>æ‰‹åŠ¨è§¦å‘å‘½ä»¤çŠ¶æ€åˆ·æ–°ã€‚</p><p>å½“ ViewModel å†…éƒ¨æŸäº›çŠ¶æ€æ”¹å˜åï¼Œéœ€è¦è®©å‘½ä»¤è‡ªåŠ¨é‡æ–°è¯„ä¼°æ˜¯å¦å¯æ‰§è¡Œï¼Œå¯è°ƒç”¨<code>SubmitCommand.RaiseCanExecuteChanged();</code></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Name</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    set</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰‹åŠ¨å‘Šè¯‰å‘½ä»¤ï¼šçŠ¶æ€å˜äº†ï¼Œè¯·é‡æ–°æ£€æŸ¥ CanExecute</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RaiseCanExecuteChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ‰‹åŠ¨è§¦å‘æ–¹å¼é€‚ç”¨äºé€»è¾‘å¤æ‚æˆ–å¤šæ¡ä»¶å½±å“å‘½ä»¤å¯ç”¨æ€§æ—¶ã€‚</p><h5 id="observesproperty" tabindex="-1"><a class="header-anchor" href="#observesproperty"><span>ObservesProperty</span></a></h5><p>å¦‚æœå‘½ä»¤æ˜¯å¦å¯æ‰§è¡Œå–å†³äºä¸€ä¸ªæˆ–å¤šä¸ª ViewModel å±æ€§ï¼Œå¯ä½¿ç”¨ <code>ObservesProperty</code> æ³¨å†Œè¿™äº›å±æ€§ï¼Œè¿™æ · setter é‡Œå°±ä¸éœ€è¦å†™ RaiseCanExecuteChanged äº†ï¼ŒPrism ä¼šè‡ªåŠ¨å¤„ç†ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> IsEnabled</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ArticleViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">CanSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ObservesProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">IsEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* å®ç°é€»è¾‘ */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> IsEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="observescanexecute" tabindex="-1"><a class="header-anchor" href="#observescanexecute"><span>ObservesCanExecute</span></a></h5><p>è¿™æ˜¯ <code>ObservesProperty</code> çš„ç®€åŒ–ç‰ˆï¼Œé€‚ç”¨äºæ›´ç®€å•çš„åœºæ™¯ã€‚</p><ul><li><strong>åœºæ™¯ï¼š</strong> ä½ çš„ ViewModel ä¸­å·²ç»æœ‰ä¸€ä¸ª <code>bool IsEnabled</code> å±æ€§æ¥æ§åˆ¶æŒ‰é’®çŠ¶æ€ã€‚</li><li><strong>æ–¹æ³•ï¼š</strong> <code>.ObservesCanExecute(() =&gt; IsEnabled)</code></li><li><strong>ç‰¹ç‚¹ï¼š</strong> ä¸éœ€è¦å†å†™ <code>CanExecuteSubmit</code> è¿™ä¸ªæ–¹æ³•äº†ï¼ŒPrism ä¼šç›´æ¥ä½¿ç”¨ <code>IsEnabled</code> çš„å€¼ä½œä¸ºå‘½ä»¤æ˜¯å¦å¯ç”¨çš„ä¾æ®ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> IsEnabled</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ArticleViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸éœ€è¦ç¬¬äºŒä¸ªå‚æ•°ï¼Œç›´æ¥ç»‘å®šåˆ°IsEnabled</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ObservesCanExecute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">IsEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* å®ç°é€»è¾‘ */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE]</p><p>ä¸è¦é“¾å¼è°ƒç”¨å¤šä¸ª <code>ObservesCanExecute</code>ï¼Œåªèƒ½æ³¨å†Œä¸€ä¸ªå±æ€§ã€‚</p></blockquote><h4 id="åŸºäºtaskçš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#åŸºäºtaskçš„å‘½ä»¤"><span>åŸºäº<code>Task</code>çš„å‘½ä»¤</span></a></h4><p>WPF çš„å‘½ä»¤ï¼ˆ<code>ICommand</code>ï¼‰æœ¬èº«æ˜¯åŒæ­¥æ¨¡å‹ï¼Œå®ƒçš„ <code>Execute</code> å’Œ <code>CanExecute</code> æ–¹æ³•ç­¾åä¸èƒ½è¿”å› <code>Task</code>ã€‚</p><p>å› æ­¤ Prism çš„å®˜æ–¹å»ºè®®æ˜¯ï¼š</p><ul><li>å°†å¼‚æ­¥é€»è¾‘æ”¾åœ¨å‘½ä»¤çš„æ‰§è¡Œå§”æ‰˜ä¸­ï¼Œè€Œå‘½ä»¤æœ¬èº«ä»ç„¶æ˜¯åŒæ­¥çš„</li><li>ä½¿ç”¨ <code>async void</code> æˆ–åœ¨å§”æ‰˜ä¸­åŒ…è£¹å¼‚æ­¥æ“ä½œ</li></ul><h5 id="æ–¹å¼1-async-voidæ‰§è¡Œå¼‚æ­¥æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼1-async-voidæ‰§è¡Œå¼‚æ­¥æ–¹æ³•"><span>æ–¹å¼1ï¼šasync voidæ‰§è¡Œå¼‚æ­¥æ–¹æ³•</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleViewModel</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ArticleViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        await </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SomeAsyncMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§å†™æ³•æœ€ç®€æ´ï¼Œä½†è¦æ³¨æ„ <code>async void</code> ä¸é€‚åˆæœ‰è¿”å›å€¼çš„åœºæ™¯ï¼Œä»…é€‚åˆä½œä¸ºäº‹ä»¶å¤„ç†ã€‚</p><h5 id="æ–¹å¼2-æ„é€ å‡½æ•°ä¸­ä½¿ç”¨å¼‚æ­¥lambda" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼2-æ„é€ å‡½æ•°ä¸­ä½¿ç”¨å¼‚æ­¥lambda"><span>æ–¹å¼2ï¼šæ„é€ å‡½æ•°ä¸­ä½¿ç”¨å¼‚æ­¥lambda</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleViewModel</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ArticleViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SubmitCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">async</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ()=&gt; await </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SomeAsyncMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§å†™æ³•å¯ä»¥ä½¿ç”¨æ ‡å‡† <code>Task</code> æ–¹æ³•ï¼Œå¹¶ä¸”ä¿æŒå‘½ä»¤æ‰§è¡Œé€»è¾‘æ›´æ¸…æ™°ã€‚</p><h3 id="å¤åˆå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¤åˆå‘½ä»¤"><span>å¤åˆå‘½ä»¤</span></a></h3><p><strong>å®šä¹‰</strong>ï¼š</p><ul><li>å¤åˆå‘½ä»¤ï¼ˆCompositeCommandï¼‰æ˜¯ä¸€ä¸ªå…¨å±€å¯ç”¨çš„å‘½ä»¤ï¼Œå®ƒå†…éƒ¨èšåˆäº†å¤šä¸ªå­å‘½ä»¤ï¼ˆchild commandsï¼‰ã€‚</li><li>å½“æ‰§è¡Œå¤åˆå‘½ä»¤æ—¶ï¼Œå®ƒä¼šé¡ºåºæ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„å­å‘½ä»¤ã€‚</li><li>å½“æŸ¥è¯¢ CanExecute æ—¶ï¼Œåªæœ‰<strong>æ‰€æœ‰</strong>å­å‘½ä»¤çš„ CanExecute éƒ½è¿”å› true æ—¶ï¼Œå¤åˆå‘½ä»¤æ‰è¿”å› trueã€‚</li></ul><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>å®ç°è·¨å¤šä¸ª ViewModel çš„å…±äº«å‘½ä»¤é€»è¾‘ã€‚</li><li>å…¸å‹åœºæ™¯ï¼šå…¨å±€â€œä¿å­˜â€å‘½ä»¤ï¼ˆSaveAllï¼‰ï¼Œå®ƒä¼šè°ƒç”¨æ‰€æœ‰æ´»åŠ¨æ¨¡å—çš„ä¿å­˜æ“ä½œã€‚</li><li>å…è®¸ä¸åŒæ¨¡å—ç‹¬ç«‹æ³¨å†Œè‡ªå·±çš„å‘½ä»¤å®ç°ï¼Œè€Œæ— éœ€ç›¸äº’ä¾èµ–ã€‚</li></ul><h4 id="åˆ›å»ºcomposite-command" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºcomposite-command"><span>åˆ›å»ºComposite Command</span></a></h4><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationCommands</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¯ä»¥å®šä¹‰ä¸ºé™æ€å•ä¾‹ï¼Œä¾¿äºå…¨å±€è®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CompositeCommand</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> SaveAllCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CompositeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ„é€ å‡½æ•°é€‰é¡¹</strong>ï¼š</p><ul><li><code>CompositeCommand()</code>ï¼šé»˜è®¤è¡Œä¸ºï¼ˆæ‰€æœ‰å­å‘½ä»¤ <code>CanExecute</code> ä¸º true æ—¶æ‰å¯ç”¨ï¼‰ã€‚</li><li><code>CompositeCommand(bool monitorCommandActivity)</code>ï¼šå¦‚æœä¼ å…¥ trueï¼Œä¼šç›‘æ§å­å‘½ä»¤çš„ <code>CanExecuteChanged</code> äº‹ä»¶ã€‚</li></ul><h4 id="ä½¿å¤åˆå‘½ä»¤å…¨å±€å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½¿å¤åˆå‘½ä»¤å…¨å±€å¯ç”¨"><span>ä½¿å¤åˆå‘½ä»¤å…¨å±€å¯ç”¨</span></a></h4><blockquote><p>[!TIP]</p><p>æ¨èä½¿ç”¨<strong>ä¾èµ–æ³¨å…¥</strong>å®ç°ï¼Œä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p></blockquote><h5 id="ä¾èµ–æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–æ³¨å…¥"><span>ä¾èµ–æ³¨å…¥</span></a></h5><ol><li><p>åˆ›å»ºæ¥å£</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IApplicationCommands</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    CompositeCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åˆ›å»ºå®ç°æ¥å£çš„ç±»</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IApplicationCommands</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CompositeCommand</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _saveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CompositeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CompositeCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SaveCommand</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_saveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®šä¹‰ ApplicationCommands ç±»åï¼Œå¿…é¡»å°†å…¶æ³¨å†Œä¸ºå®¹å™¨ä¸­çš„å•ä¸€å®ä¾‹ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> partial</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PrismApplication</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RegisterTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åœ¨ ViewModel æ„é€ å‡½æ•°ä¸­è¯·æ±‚ <code>IApplicationCommands</code> æ¥å£ã€‚æ‹¥æœ‰è¯¥ <code>ApplicationCommands</code> ç±»çš„å®ä¾‹åï¼Œç°åœ¨å¯ä»¥å°† DelegateCommands æ³¨å†Œåˆ°ç›¸åº”çš„ CompositeCommandã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">private</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TabViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">IApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h5 id="é™æ€ç±»" tabindex="-1"><a class="header-anchor" href="#é™æ€ç±»"><span>é™æ€ç±»</span></a></h5><ol><li><p>åˆ›å»ºä¸€ä¸ªè¡¨ç¤º CompositeCommands çš„é™æ€ç±»</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationCommands</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CompositeCommand</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CompositeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åœ¨ ViewModel ä¸­ï¼Œå°†å­å‘½ä»¤å…³è”åˆ°é™æ€ <code>ApplicationCommands</code> ç±»ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">private</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TabViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    ApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="ç»‘å®šåˆ°å…¨å±€å¯ç”¨çš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ç»‘å®šåˆ°å…¨å±€å¯ç”¨çš„å‘½ä»¤"><span>ç»‘å®šåˆ°å…¨å±€å¯ç”¨çš„å‘½ä»¤</span></a></h4><p>åˆ›å»º CompositeCommands åï¼Œç°åœ¨å¿…é¡»å°†å®ƒä»¬ç»‘å®šåˆ° UI å…ƒç´ æ‰èƒ½è°ƒç”¨è¿™äº›å‘½ä»¤ã€‚</p><h5 id="ä¾èµ–æ³¨å…¥-1" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–æ³¨å…¥-1"><span>ä¾èµ–æ³¨å…¥</span></a></h5><p>åœ¨ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ—¶ï¼Œæ‚¨å¿…é¡»æš´éœ² <code>IApplicationCommands</code> ä»¥ä¾¿äºåœ¨è§†å›¾ä¸Šè¿›è¡Œç»‘å®šã€‚åœ¨è§†å›¾çš„ViewModelä¸­ï¼Œéœ€è¦åœ¨æ„é€ å™¨ä¸­è¯·æ±‚ <code>IApplicationCommands</code> ï¼Œå¹¶å°†ä¸€ä¸ªç±»å‹ä¸º <code>IApplicationCommands</code> çš„å±æ€§è®¾ç½®ä¸ºè¯¥å®ä¾‹ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IApplicationCommands</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IApplicationCommands</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> ApplicationCommands</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        ApplicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è§†å›¾ä¸­ï¼Œå°†æŒ‰é’®ç»‘å®šåˆ° <code>ApplicationCommands.SaveCommand</code> å±æ€§ã€‚ <code>SaveCommand</code> æ˜¯åœ¨ <code>ApplicationCommands</code> ç±»ä¸Šå®šä¹‰çš„å±æ€§ã€‚</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Save&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding ApplicationCommands.SaveCommand}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="é™æ€ç±»-1" tabindex="-1"><a class="header-anchor" href="#é™æ€ç±»-1"><span>é™æ€ç±»</span></a></h5><p>å¦‚æœä½¿ç”¨çš„æ˜¯é™æ€ç±»æ–¹æ³•ï¼Œä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å°†æŒ‰é’®ç»‘å®šåˆ° WPF ä¸­çš„é™æ€ <code>ApplicationCommands</code> ç±»ã€‚</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Save&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{x:Static local:ApplicationCommands.SaveCommand}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="æ³¨é”€å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#æ³¨é”€å‘½ä»¤"><span>æ³¨é”€å‘½ä»¤</span></a></h4><p>ä½¿ç”¨ <code>UnregisterCommand</code> åœ¨å¯¹è±¡é”€æ¯æ—¶æ³¨é”€ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Destroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    _applicationCommands</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">UnregisterCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">UpdateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨æ´»åŠ¨è§†å›¾ä¸Šæ‰§è¡Œå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#åœ¨æ´»åŠ¨è§†å›¾ä¸Šæ‰§è¡Œå‘½ä»¤"><span>åœ¨æ´»åŠ¨è§†å›¾ä¸Šæ‰§è¡Œå‘½ä»¤</span></a></h4><p><strong>CompositeCommand</strong> é»˜è®¤ä¼šæ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„å­å‘½ä»¤ã€‚</p><p>åœ¨å¤šè§†å›¾åœºæ™¯ï¼ˆå¦‚ TabControlã€å¤šä¸ª Regionï¼‰ä¸­ï¼Œå¯èƒ½åªæƒ³åœ¨å½“å‰æ´»è·ƒçš„è§†å›¾ä¸Šæ‰§è¡Œå‘½ä»¤ï¼ˆä¾‹å¦‚â€œä¿å­˜â€åªä¿å­˜å½“å‰ Tab çš„å†…å®¹ï¼‰ã€‚</p><p>Prism é€šè¿‡ <strong>IActiveAware</strong> æ¥å£è§£å†³è¿™ä¸ªé—®é¢˜ï¼šåªæœ‰ IsActive == true çš„å­å‘½ä»¤æ‰å‚ä¸æ‰§è¡Œå’Œ CanExecute åˆ¤æ–­ã€‚</p><blockquote><p><strong>è‡ªåŠ¨ç®¡ç†</strong>ï¼šå½“ä½¿ç”¨ Prism çš„ Region å¯¼èˆªï¼ˆIRegionManager.RequestNavigateï¼‰æ—¶ï¼ŒPrism ä¼šè‡ªåŠ¨è®¾ç½®è§†å›¾çš„ IsActive çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†ã€‚</p><p><strong>æ‰‹åŠ¨ç®¡ç†</strong>ï¼šå¦‚æœä¸æ˜¯é€šè¿‡ Region å¯¼èˆªï¼ˆå¦‚è‡ªå®šä¹‰ TabControlï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½® command.IsActive = true/false å¹¶è§¦å‘ IsActiveChangedã€‚</p></blockquote><h5 id="iactiveawareæ¥å£" tabindex="-1"><a class="header-anchor" href="#iactiveawareæ¥å£"><span>IActiveAwareæ¥å£</span></a></h5><p><strong>å®šä¹‰ï¼š</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IActiveAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> IsActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EventHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> IsActiveChanged;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½œç”¨ï¼š</strong></p><ul><li>IsActive å±æ€§è¡¨ç¤ºå‘½ä»¤æ˜¯å¦å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</li><li>IsActiveChanged äº‹ä»¶é€šçŸ¥ CompositeCommand çŠ¶æ€å˜åŒ–ï¼Œè§¦å‘ CanExecute é‡æ–°è¯„ä¼°ã€‚</li></ul><h5 id="å®ç°iactiveawareçš„delegatecommand" tabindex="-1"><a class="header-anchor" href="#å®ç°iactiveawareçš„delegatecommand"><span>å®ç°IactiveAwareçš„DelegateCommand</span></a></h5><p>Prism çš„ <code>DelegateCommand</code> å·²ç»å®ç°äº† <code>IActiveAware</code>ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªå¯æ„ŸçŸ¥æ´»è·ƒçŠ¶æ€çš„å‘½ä»¤</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() : </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">base</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">CanSave</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¿å­˜å½“å‰è§†å›¾çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanSave</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æˆ–æ ¹æ®å½“å‰è§†å›¾çŠ¶æ€åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>DelegateCommand</code> è‡ªåŠ¨å®ç° <code>IActiveAware</code>ï¼ŒPrism çš„ Region å¯¼èˆªä¼šè‡ªåŠ¨è®¾ç½® IsActiveï¼ˆå½“è§†å›¾æ¿€æ´»æ—¶è®¾ä¸º trueï¼Œåœç”¨æ—¶è®¾ä¸º falseï¼‰ã€‚</p><h5 id="åœ¨viewmodelä¸­ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åœ¨viewmodelä¸­ä½¿ç”¨"><span>åœ¨ViewModelä¸­ä½¿ç”¨</span></a></h5><p>é€šå¸¸åœ¨å®ç° <code>INavigationAware</code> æˆ– <code>IConfirmNavigationRequest</code> çš„ ViewModel ä¸­ï¼Œå‘½ä»¤ä¼šè‡ªåŠ¨æ„ŸçŸ¥æ´»è·ƒçŠ¶æ€ã€‚</p><p>ç¤ºä¾‹ï¼šTabé¡µé¢çš„ViewModel</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CustomerViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CustomerViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">CanSave</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // Prism ä¼šè‡ªåŠ¨ç®¡ç† SaveCommand.IsActive</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åªåœ¨å½“å‰ Tab æ´»è·ƒæ—¶æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanSave</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // INavigationAware æ–¹æ³•ä¸­ Prism ä¼šè‡ªåŠ¨è®¾ç½® IsActive</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è§†å›¾æ¿€æ´»æ—¶è§¦å‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è§†å›¾åœç”¨æ—¶è§¦å‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¤åˆå‘½ä»¤çš„è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#å¤åˆå‘½ä»¤çš„è¡Œä¸º"><span>å¤åˆå‘½ä»¤çš„è¡Œä¸º</span></a></h5><p>å½“æ³¨å†Œå®ç° IActiveAware çš„å‘½ä»¤æ—¶ï¼š</p><ul><li><strong>Execute</strong>ï¼šåªæ‰§è¡Œ IsActive == true çš„å­å‘½ä»¤ã€‚</li><li><strong>CanExecute</strong>ï¼šåªè€ƒè™‘æ´»è·ƒå­å‘½ä»¤çš„çŠ¶æ€ï¼ˆæ‰€æœ‰æ´»è·ƒå­å‘½ä»¤éƒ½å¯æ‰§è¡Œæ—¶è¿”å› trueï¼‰ã€‚</li></ul><p>ç¤ºä¾‹ï¼šå…¨å±€SaveAllå‘½ä»¤</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ShellViewModel</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CompositeCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SaveAllCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ShellViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        SaveAllCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CompositeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ³¨å†Œå¤šä¸ª Tab çš„ Save å‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        SaveAllCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CustomerViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        SaveAllCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OrderViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        SaveAllCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ProductViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SaveCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç”¨æˆ·ç‚¹å‡»â€œå…¨éƒ¨ä¿å­˜â€æŒ‰é’®ï¼š</p><ul><li>åªæ‰§è¡Œå½“å‰æ´»è·ƒ Tab çš„ Save å‘½ä»¤ï¼ˆå…¶ä»–éæ´»è·ƒçš„è¢«å¿½ç•¥ï¼‰ã€‚</li><li>å¦‚æœå½“å‰æ´»è·ƒ Tab çš„å‘½ä»¤ä¸å¯æ‰§è¡Œï¼Œæ•´ä¸ª SaveAll æŒ‰é’®ä¼šè¢«ç¦ç”¨ã€‚</li></ul><h5 id="xamlç»‘å®š" tabindex="-1"><a class="header-anchor" href="#xamlç»‘å®š"><span>XAMLç»‘å®š</span></a></h5><p>ä¸æ™®é€šå‘½ä»¤ç›¸åŒï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Save All&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SaveAllCommand}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŒ‰é’®ä¼šæ ¹æ®æ´»è·ƒè§†å›¾çš„å‘½ä»¤çŠ¶æ€è‡ªåŠ¨å¯ç”¨/ç¦ç”¨ã€‚</p><h3 id="å¼‚æ­¥å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¼‚æ­¥å‘½ä»¤"><span>å¼‚æ­¥å‘½ä»¤</span></a></h3><p>Prism åœ¨ 9.0 ç‰ˆæœ¬å¼•å…¥äº†åŸç”Ÿæ”¯æŒå¼‚æ­¥å‘½ä»¤çš„ç±»å‹ <strong><code>AsyncDelegateCommand</code></strong> å’Œ <strong><code>AsyncDelegateCommand&lt;T&gt;</code></strong>ï¼Œç”¨äºæ›´è‡ªç„¶åœ°å¤„ç†åŸºäº <code>Task</code> çš„å¼‚æ­¥æ“ä½œï¼Œè€Œä¸æ˜¯ä½¿ç”¨åŒæ­¥ <code>ICommand</code> åŒ…è£¹å¼‚æ­¥é€»è¾‘ã€‚</p><p>åœ¨ .NET MVVM æ¨¡å¼ä¸­ï¼Œ<code>ICommand</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªäº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œå®ƒçš„ <code>Execute</code> å’Œ <code>CanExecute</code> æ–¹æ³•éƒ½æ˜¯åŒæ­¥å®šä¹‰çš„ï¼ˆæ¥è‡ª <code>ICommand</code>ï¼‰ã€‚ç”±äºè¿™ç§è®¾è®¡ï¼Œå¼‚æ­¥æ“ä½œå¦‚æœç›´æ¥æ”¾å…¥ <code>Execute</code> æˆ–ä½¿ç”¨ <code>async void</code>ï¼Œä¼šå¸¦æ¥æ‰§è¡Œæ§åˆ¶ä¸é”™è¯¯å¤„ç†æ–¹é¢çš„å±€é™æ€§ã€‚</p><p>ä¸ºäº†æ›´å¥½æ”¯æŒ <code>async/await</code> æ¨¡å¼ï¼ŒPrism è®¾è®¡äº† <code>AsyncDelegateCommand</code>ï¼Œå¹¶å®šä¹‰äº†å¦‚ä¸‹æ¥å£ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IAsyncCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ICommand</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ExecuteAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">? </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ExecuteAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">? </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CancellationToken</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> cancellationToken</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ¥å£åœ¨ Prism ä¸­è¢«å®ç°ä¸º <code>AsyncDelegateCommand</code> å’Œ <code>AsyncDelegateCommand&lt;T&gt;</code>ã€‚è¿™æ ·çš„å‘½ä»¤å…è®¸ç¼–å†™çœŸæ­£çš„å¼‚æ­¥é€»è¾‘ï¼ŒåŒæ—¶ä»ç„¶å¯ä»¥ä¸ WPF æˆ–å…¶ä»– XAML å¹³å°çš„æ•°æ®ç»‘å®šå‘½ä»¤ç³»ç»Ÿé…åˆä½¿ç”¨</p><h4 id="åˆ›å»ºå¼‚æ­¥å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¼‚æ­¥å‘½ä»¤"><span>åˆ›å»ºå¼‚æ­¥å‘½ä»¤</span></a></h4><p>åœ¨ViewModelä¸­å®šä¹‰å¼‚æ­¥å‘½ä»¤é€šå¸¸å¦‚ä¸‹ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> AsyncDelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> LoadDataCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> YourViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    LoadDataCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AsyncDelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">LoadDataAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> LoadDataAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚ä» API åŠ è½½æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦ä¼ å‚çš„å¼‚æ­¥å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹ç‰ˆæœ¬ <code>AsyncDelegateCommand&lt;T&gt;</code>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> AsyncDelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> DeleteItemCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> YourViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    DeleteItemCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AsyncDelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">DeleteItemAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DeleteItemAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // åˆ é™¤é¡¹çš„å¼‚æ­¥é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å†™çš„å¥½å¤„æ˜¯å‘½ä»¤æ‰§è¡Œä¼šè¿”å› <code>Task</code>ï¼Œå¯ä»¥ç»“åˆ <code>await</code> æˆ–åç»­çš„çŠ¶æ€å¤„ç†ä»£ç ã€‚</p><h4 id="æ‰§è¡Œasyncdelegatecommand" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œasyncdelegatecommand"><span>æ‰§è¡ŒAsyncDelegateCommand</span></a></h4><p><strong>æ‰§è¡Œè¡Œä¸º</strong>ï¼š</p><ul><li>è°ƒç”¨ Execute æ—¶ï¼Œå‘½ä»¤å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ã€‚</li><li>ä»»åŠ¡è¿è¡ŒæœŸé—´ï¼ŒIsExecuting ä¸º trueã€‚</li><li>ä»»åŠ¡å®Œæˆåï¼ŒIsExecuting æ¢å¤ä¸º falseã€‚</li></ul><p><strong>XAMLç»‘å®šï¼š</strong></p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Submit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SubmitCommand}&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        IsEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SubmitCommand.IsNotExecuting}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ä½¿ç”¨åŠ è½½æŒ‡ç¤ºå™¨ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Submit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button.Style</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Style</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> TargetType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Button&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Setter</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Content&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Submit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Style.Triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DataTrigger</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Binding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SubmitCommand.IsExecuting}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;True&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Setter</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Content&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Submitting...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DataTrigger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Style.Triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Style</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button.Style</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>IsExecutingå±æ€§</strong></p><ul><li><strong>IsExecuting</strong>ï¼š <ul><li>åªè¯»å¸ƒå°”å±æ€§ï¼Œè¡¨ç¤ºå‘½ä»¤æ˜¯å¦æ­£åœ¨æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚</li><li>å¯ç»‘å®šåˆ° UIï¼ˆå¦‚ç¦ç”¨æŒ‰é’®ã€æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼‰ã€‚</li></ul></li><li><strong>IsNotExecuting</strong>ï¼š <ul><li>IsExecuting çš„åè½¬ï¼Œä¾¿äºç»‘å®š IsEnabledã€‚</li></ul></li></ul><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Save&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SaveCommand}&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        IsEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SaveCommand.IsNotExecuting}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ProgressBar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> IsIndeterminate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SaveCommand.IsExecuting}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¹¶è¡Œæ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#å¹¶è¡Œæ‰§è¡Œ"><span>å¹¶è¡Œæ‰§è¡Œ</span></a></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼š</p><ul><li><p><strong>å¼‚æ­¥å‘½ä»¤ä¸å…è®¸å¹¶è¡Œæ‰§è¡Œ</strong>ã€‚</p></li><li><p>Prism ä¼šåœ¨å‘½ä»¤è¿˜æœªå®Œæˆå‰å°† <code>CanExecute</code> è¿”å›ä¸º falseï¼Œä»è€Œé˜»æ­¢é‡å¤è§¦å‘ã€‚</p></li><li><p>å¦‚æœä½ å¸Œæœ›å‘½ä»¤èƒ½å¤Ÿå…è®¸å¤šæ¬¡åŒæ—¶æ‰§è¡Œï¼ˆå³å¹¶è¡Œæ‰§è¡Œï¼‰ï¼Œå¯ä»¥è°ƒç”¨ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">yourAsyncCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EnableParallelExecution</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><p>å¯ç”¨å¹¶è¡Œæ‰§è¡Œåï¼š</p><ul><li>æ¯æ¬¡è§¦å‘å‘½ä»¤éƒ½ä¼šåˆ›å»ºæ–°çš„ä»»åŠ¡ï¼›</li><li>æ­¤å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¸ä¼šé˜»æ­¢æ–°çš„å‘½ä»¤è§¦å‘ã€‚</li></ul><h4 id="cancellationtokensourceé…ç½®" tabindex="-1"><a class="header-anchor" href="#cancellationtokensourceé…ç½®"><span>CancellationTokenSourceé…ç½®</span></a></h4><p>Prism æä¾›å¯¹å‘½ä»¤æ‰§è¡ŒæœŸé—´ CancellationToken çš„é…ç½®æ”¯æŒï¼Œç”¨äºåœ¨å¼‚æ­¥å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­å®ç°å–æ¶ˆæ“ä½œã€‚ä½ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œé…ç½®ï¼š</p><h5 id="è®¾ç½®è¶…æ—¶æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®è¶…æ—¶æ—¶é—´"><span>è®¾ç½®è¶…æ—¶æ—¶é—´</span></a></h5><p>å½“ä½ å¸Œæœ›å‘½ä»¤åœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨å–æ¶ˆæ—¶ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªè¶…æ—¶ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> cmd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AsyncDelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">SomeAsyncMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithCancellationAfter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">TimeSpan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FromSeconds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="è‡ªå®šä¹‰cancellationtoken" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰cancellationtoken"><span>è‡ªå®šä¹‰CancellationToken</span></a></h5><p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨è‡ªå®šä¹‰çš„ <code>CancellationToken</code>ï¼Œä¾‹å¦‚ ViewModel ä¸­å·²æœ‰çš„å–æ¶ˆé€»è¾‘ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> cmd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AsyncDelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">SomeAsyncMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithCancellationToken</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">yourCancellationTokenSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Token</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯¹æ¯”ä¼ ç»Ÿdelegatecommand" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”ä¼ ç»Ÿdelegatecommand"><span>å¯¹æ¯”ä¼ ç»Ÿ<code>DelegateCommand</code></span></a></h4><p>ä¼ ç»Ÿçš„ <code>DelegateCommand</code> å¯ä»¥é€šè¿‡ <code>async void</code> æˆ– <code>async Task</code> åŒ…è£…æ¥æ‰§è¡Œå¼‚æ­¥é€»è¾‘ï¼ˆPrism æ—§æ–‡æ¡£ä¹Ÿæè¿‡è¿™ç§æ–¹å¼ï¼‰ï¼Œ<strong>ä½†ä¸å»ºè®®åœ¨ Execute ä¸­ç›´æ¥ä½¿ç”¨ <code>async void</code></strong>ï¼Œå› ä¸ºï¼š</p><ul><li>æ— æ³•æ•æ‰å¼‚å¸¸ï¼›</li><li>ä¸åˆ©äºå‘½ä»¤æ‰§è¡ŒçŠ¶æ€æ§åˆ¶ï¼›</li><li>ä¸ <code>CanExecute</code> é€»è¾‘åˆ†ç¦»ã€‚</li></ul><h3 id="é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯å¤„ç†"><span>é”™è¯¯å¤„ç†</span></a></h3><p>Prism 9 ä¸º <strong>æ‰€æœ‰å‘½ä»¤ç±»å‹</strong>ï¼ˆåŒ…æ‹¬ <code>DelegateCommand</code>ã€<code>AsyncDelegateCommand</code> ç­‰ï¼‰å¼•å…¥äº†æ›´å¼ºçš„é”™è¯¯å¤„ç†æ”¯æŒï¼Œå…¶ç›®æ ‡æ˜¯ï¼š</p><ol><li><strong>å‡å°‘åœ¨æ¯ä¸ªå‘½ä»¤ä¸­æ‰§è¡Œ try/catch çš„éœ€æ±‚ï¼›</strong></li><li><strong>å…è®¸æ ¹æ®å¼‚å¸¸ç±»å‹æä¾›ä¸åŒå¤„ç†é€»è¾‘ï¼›</strong></li><li><strong>ä¾¿äºåœ¨å¤šä¸ªå‘½ä»¤é—´å…±äº«é”™è¯¯å¤„ç†é€»è¾‘ã€‚</strong></li></ol><h4 id="å‘½ä»¤é“¾ä¸Šé…ç½®é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤é“¾ä¸Šé…ç½®é”™è¯¯å¤„ç†"><span>å‘½ä»¤é“¾ä¸Šé…ç½®é”™è¯¯å¤„ç†</span></a></h4><p>åœ¨ä½¿ç”¨ Prism çš„å‘½ä»¤æ—¶ï¼Œä½ å¯ä»¥é“¾å¼è°ƒç”¨é”™è¯¯å¤„ç†é€»è¾‘ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ä¸šåŠ¡é€»è¾‘ */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NullReferenceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // é’ˆå¯¹ NullReferenceException çš„å¤„ç†é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // catch å…¶ä»–æ‰€æœ‰å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡º <code>NullReferenceException</code>ï¼Œåˆ™ä¼˜å…ˆæ‰§è¡Œç‰¹å®šå¤„ç†å™¨ã€‚</li><li>å¦‚æœæŠ›å‡ºå…¶ä»–å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œé€šç”¨å¤„ç†å™¨ã€‚</li></ul><h2 id="ä¾èµ–æ³¨å…¥-2" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–æ³¨å…¥-2"><span>ä¾èµ–æ³¨å…¥</span></a></h2><h4 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ"><span>ç”Ÿå‘½å‘¨æœŸ</span></a></h4><h5 id="transient" tabindex="-1"><a class="header-anchor" href="#transient"><span>Transient</span></a></h5><ul><li>æ¯æ¬¡ä»å®¹å™¨è§£æéƒ½ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ–°çš„å®ä¾‹</strong>ã€‚</li><li>é€‚ç”¨äºæ— çŠ¶æ€æœåŠ¡ã€è§†å›¾æ¨¡å‹ç­‰ä¸éœ€è¦ä¿æŒè·¨ç•ŒçŠ¶æ€çš„ç±»å‹ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è‹¥åªä¼ å…¥ä¸€ä¸ªç±»å‹ï¼Œåˆ™é»˜è®¤è¡Œä¸ºæ˜¯è‡ªèº«å®ç°ï¼ˆæ— éœ€æ¥å£ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">FooService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IBarService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BarService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="singleton" tabindex="-1"><a class="header-anchor" href="#singleton"><span>Singleton</span></a></h5><ul><li>æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶åœ¨åç»­æ¯æ¬¡è¯·æ±‚æ—¶å¤ç”¨è¯¥å®ä¾‹ã€‚</li><li>é€‚ç”¨äºèµ„æºç®¡ç†æœåŠ¡ã€è·¨æ¨¡å—å…±äº«çŠ¶æ€æœåŠ¡ç­‰ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">FooService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IBarService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BarService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE]</p><p>å•ä¾‹æœåŠ¡ç›´åˆ°ç¬¬ä¸€æ¬¡è§£ææ—¶æ‰ä¼šçœŸæ­£å®ä¾‹åŒ–ï¼Œæœ‰åŠ©äºå»¶è¿Ÿèµ„æºå ç”¨ã€‚</p></blockquote><h5 id="scoped" tabindex="-1"><a class="header-anchor" href="#scoped"><span>Scoped</span></a></h5><ul><li>åœ¨ Prism å¤§å¤šæ•°å¹³å°ä¸Š<strong>é»˜è®¤ä¸å¯ç”¨</strong>ï¼ˆé™¤ MAUI ä¸­æ¯ä¸ª Page Scopeï¼‰ã€‚</li><li>å½“ä½ å¸Œæœ›åœ¨æŸä¸ªé€»è¾‘ä½œç”¨åŸŸå†…å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼Œä½†åœ¨ä½œç”¨åŸŸç»“æŸåé‡Šæ”¾ï¼Œå¯ä½¿ç”¨ Scopedã€‚</li><li>åœ¨ MAUI ä¸­ï¼ŒPrism å·²å°†å¯¼èˆªç”Ÿç”Ÿå‘½å‘¨æœŸï¼ˆPage æ˜¾ç¤ºå‘¨æœŸï¼‰è§†ä¸ºä¸€ä¸ªä½œç”¨åŸŸã€‚</li></ul><h4 id="æ³¨å†Œå·²å­˜åœ¨çš„æœåŠ¡å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œå·²å­˜åœ¨çš„æœåŠ¡å®ä¾‹"><span>æ³¨å†Œå·²å­˜åœ¨çš„æœåŠ¡å®ä¾‹</span></a></h4><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å·²ç»å®ä¾‹åŒ–äº†æŸä¸ªå¯¹è±¡ <strong>å¹¶å¸Œæœ›æŠŠå®ƒä½œä¸ºæœåŠ¡æä¾›ç»™ DI å®¹å™¨</strong>ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å®ä¾‹æ³¨å†Œï¼Œä¾‹å¦‚é›†æˆç¬¬ä¸‰æ–¹åº“å¯¹è±¡</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IFoo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">FooImplementation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IBarrel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Barrel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ³¨å†ŒåŒæ ·é»˜è®¤ä¸ºSingletonã€‚</p><h4 id="æ£€æŸ¥æœåŠ¡æ˜¯å¦å·²æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥æœåŠ¡æ˜¯å¦å·²æ³¨å†Œ"><span>æ£€æŸ¥æœåŠ¡æ˜¯å¦å·²æ³¨å†Œ</span></a></h4><p>æœ‰æ—¶å€™åœ¨æ¨¡å—æˆ–æ’ä»¶åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦åˆ¤æ–­æŸä¸ªæœåŠ¡æ˜¯å¦å·²è¢«æ³¨å†Œï¼Œè¿™å¯ç”¨æ¥å®ç° <strong>é»˜è®¤å®ç°æˆ–æ¡ä»¶æ³¨å†Œ</strong>ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">IsRegistered</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ISomeService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æŒ‰éœ€å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE]</p><p>å¯¹äº Prisma æ¨¡å—è€Œè¨€ï¼Œå¦‚æœæŸä¸ªæœåŠ¡æ˜¯å¿…éœ€çš„ï¼Œåº”è¯¥é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼Œè¿™æ ·ç¼ºå°‘æ³¨å†Œä¼šåœ¨åˆå§‹åŒ–é˜¶æ®µç›´æ¥æŠ›å¼‚å¸¸ï¼Œè€Œä¸æ˜¯å»¶è¿Ÿåˆ¤æ–­ã€‚</p></blockquote><h4 id="æ‡’åŠ è½½" tabindex="-1"><a class="header-anchor" href="#æ‡’åŠ è½½"><span>æ‡’åŠ è½½</span></a></h4><p>ä¸ºäº†ä¼˜åŒ–æ€§èƒ½æˆ–èŠ‚çœå†…å­˜ï¼ŒPrism æ”¯æŒåœ¨æ³¨å…¥æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <strong><code>Func&lt;T&gt;</code> æˆ– <code>Lazy&lt;T&gt;</code></strong> æ¥å®ç°æ‡’åŠ è½½ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ViewAViewModel</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ViewAViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Func</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IFoo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fooFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Lazy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IBar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">lazyBar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼ä¼šå»¶è¿ŸæœåŠ¡å®ä¾‹åŒ–ç›´åˆ°ä½ çœŸæ­£éœ€è¦ä½¿ç”¨å®ƒã€‚</p><blockquote><p>å¯¹å•ä¾‹æœåŠ¡ä½¿ç”¨è¿™ç§æ–¹å¼å¾€å¾€æ„ä¹‰ä¸å¤§ï¼Œå› ä¸ºå•ä¾‹æœ¬èº«å°±åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p></blockquote><h4 id="å¤šå®ç°æ³¨å†Œä¸æ‰¹é‡è§£æ" tabindex="-1"><a class="header-anchor" href="#å¤šå®ç°æ³¨å†Œä¸æ‰¹é‡è§£æ"><span>å¤šå®ç°æ³¨å†Œä¸æ‰¹é‡è§£æ</span></a></h4><p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½ä¼šä¸ºåŒä¸€ä¸ªæ¥å£æ³¨å†Œå¤šä¸ªä¸åŒçš„å®ç°ï¼Œå…¸å‹ç”¨äºæ’ä»¶æˆ–æ¨¡å—æ‰©å±•ç‚¹ã€‚è¿™æ—¶å¯ä»¥æ³¨å…¥ <code>IEnumerable&lt;T&gt;</code> æ¥è·å–æ‰€æœ‰å®ç°ç±»å‹ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SomeService</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SomeService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IEnumerable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IFoo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fooCollection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™è®©ä½ å¯ä»¥ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰å®ç°ï¼Œè€Œæ— éœ€æ‰‹åŠ¨é€ä¸€è§£æã€‚</p><blockquote><p>å½“å‰è¯¥ç‰¹æ€§ä¸»è¦åœ¨ DryIoc ä¸­å¯ç”¨ï¼ŒUnity å®¹å™¨çš„æ”¯æŒå¯èƒ½éšç€ç‰ˆæœ¬æ”¹è¿›è€Œå¢å¼º</p></blockquote><h3 id="å…³äº-iservicecollection-çš„æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#å…³äº-iservicecollection-çš„æ”¯æŒ"><span>å…³äº <code>IServiceCollection</code> çš„æ”¯æŒ</span></a></h3><p>Prism çš„ä¾èµ–æ³¨å…¥ä½“ç³»ä¸»è¦å›´ç»• <strong>Prism è‡ªå·±çš„æŠ½è±¡æ¥å£ï¼ˆ<code>IContainerRegistry</code> / <code>IContainerProvider</code>ï¼‰</strong> å®ç°ï¼Œè€Œå¹¶ <strong>ä¸ç›´æ¥é‡‡ç”¨ <code>Microsoft.Extensions.DependencyInjection</code> çš„é»˜è®¤ DI å®¹å™¨</strong>ã€‚è¿™æ˜¯ Prism è®¾è®¡ä¸Šçš„ä¸€ä¸ªé‡è¦å†³å®šï¼Œä¸ Web å¹³å° DI æœ‰æ˜æ˜¾åŒºåˆ†ã€‚</p><h4 id="ä¸ºä»€ä¹ˆéœ€è¦ä¸iservicecollectionååŒ" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦ä¸iservicecollectionååŒ"><span>ä¸ºä»€ä¹ˆéœ€è¦ä¸<code>IServiceCollection</code>ååŒ</span></a></h4><p>åœ¨ .NET ç”Ÿæ€ä¸­ï¼Œç‰¹åˆ«æ˜¯ ASP.NET Core / .NET MAUI ç­‰æ¡†æ¶ä¸­ï¼Œ<code>Microsoft.Extensions.DependencyInjection</code>ï¼ˆä»¥ä¸‹ç®€ç§° <strong>Ms DI</strong>ï¼‰æ˜¯ä¸€ä¸ªè¡Œä¸šæ ‡å‡† DI æ³¨å†Œæœºåˆ¶ï¼š</p><ul><li>å®ƒé€šè¿‡ <code>IServiceCollection</code> æ³¨å†ŒæœåŠ¡ï¼›</li><li>ç”± <code>IServiceProvider</code> æä¾›è§£æï¼›</li><li>æ”¯æŒä¸‰ç§ç”Ÿå‘½å‘¨æœŸï¼ˆScopedã€Singletonã€Transientï¼‰ã€‚</li></ul><p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚åœ¨ MAUI åº”ç”¨ä¸­ï¼š</p><ul><li>ä½ å¯èƒ½æƒ³ä½¿ç”¨å®˜æ–¹åº“å¸¦çš„æ‰©å±•æ–¹æ³•ï¼ˆå¦‚ <code>HttpClientFactory</code>ã€Entity Framework Core ç­‰ï¼‰ï¼›</li><li>è¿™äº›æ‰©å±•æ–¹æ³•è§„èŒƒåŒ–åœ°åŸºäº <code>IServiceCollection</code>ï¼›</li><li>å¦‚æœ Prism æ— æ³•è¯†åˆ«è¿™äº›æ³¨å†Œæ‰©å±•ï¼Œåˆ™æ— æ³•ä¸ Prism å®¹å™¨å…±äº«æœåŠ¡ã€‚</li></ul><p>ä¸ºäº†æ‰©å¤§å…¼å®¹æ€§ï¼ŒPrism åœ¨ 9.0 ç‰ˆæœ¬ä¸­åšäº†å¢å¼ºï¼Œå…è®¸ä½ <strong>å°† Ms DI çš„æœåŠ¡æ³¨å†Œæ‰©å±•ä¸ Prism DI å®¹å™¨é›†æˆ</strong>ã€‚</p><h4 id="prism-ä¸ºä»€ä¹ˆä»åšæŒä½¿ç”¨è‡ªå·±çš„-di-æŠ½è±¡è€Œä¸æ˜¯-ms-di" tabindex="-1"><a class="header-anchor" href="#prism-ä¸ºä»€ä¹ˆä»åšæŒä½¿ç”¨è‡ªå·±çš„-di-æŠ½è±¡è€Œä¸æ˜¯-ms-di"><span>Prism ä¸ºä»€ä¹ˆä»åšæŒä½¿ç”¨è‡ªå·±çš„ DI æŠ½è±¡è€Œä¸æ˜¯ Ms DI</span></a></h4><p>Prism å¼ºä¾èµ– <strong>å¯å˜å®¹å™¨</strong>ï¼Œå³åœ¨åº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­æœåŠ¡æ³¨å†Œå¯è¢«ä¿®æ”¹ï¼ˆä¾‹å¦‚æ¨¡å—åŠ è½½æ—¶æ³¨å†ŒæœåŠ¡ï¼‰ã€‚è€Œ Ms DI å®¹å™¨ä¸€æ—¦æ„å»ºå°±å˜ä¸ºä¸å¯å˜ï¼ˆImmutableï¼‰ï¼š</p><ul><li>Ms DI çš„è®¾è®¡é€‚åˆ Web è¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼›</li><li>å¯¹äºæ¡Œé¢æˆ–ç§»åŠ¨åº”ç”¨ï¼Œè¿™é™åˆ¶äº†åŠ¨æ€æ³¨å†Œçš„èƒ½åŠ›ï¼ˆPrism æ¨¡å—åŒ–ã€è§†å›¾æ³¨å†Œç­‰éœ€è¦åŠ¨æ€è¡Œä¸ºï¼‰ã€‚</li></ul><h4 id="å¦‚ä½•è®©prismæ”¯æŒiservicecollectionæ‰©å±•æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è®©prismæ”¯æŒiservicecollectionæ‰©å±•æ³¨å†Œ"><span>å¦‚ä½•è®©Prismæ”¯æŒ<code>IServiceCollection</code>æ‰©å±•æ³¨å†Œ</span></a></h4><p>Prism æ”¯æŒå°† <strong>Ms DI çš„ <code>IServiceCollection</code> ä¸ Prism è‡ªèº«å®¹å™¨å…¼å®¹</strong>ï¼Œæ–¹å¼é€šå¸¸æ˜¯ï¼š</p><ol><li>åœ¨åˆ›å»º Prism å®¹å™¨ä¹‹å‰æ„å»ºä¸€ä¸ª <code>ServiceCollection</code>ï¼›</li><li>ä½¿ç”¨é€‚é…å™¨ï¼ˆé’ˆå¯¹å…·ä½“å®¹å™¨å®ç°ï¼Œæ¯”å¦‚ DryIocï¼‰å°† <code>ServiceCollection</code> çš„æœåŠ¡åˆå¹¶åˆ° Prism å®¹å™¨ï¼›</li><li>è¿”å›åŸºäºè¯¥é›†æˆåçš„å®¹å™¨ä½œä¸ºåº”ç”¨ DI å®¹å™¨ã€‚</li></ol><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> services</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ServiceCollection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä½¿ç”¨ Ms DI æ‰©å±•æ³¨å†ŒæœåŠ¡ï¼Œä¾‹å¦‚ AddHttpClientã€AddLogging ç­‰</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddHttpClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ISomeService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SomeService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å°†å…¶é€‚é…åˆ° Prism æ”¯æŒçš„å®¹å™¨ï¼ˆä¾‹å¦‚ DryIocï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> container</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DryIoc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è¿™é‡Œ WithDependencyInjectionAdapter æ–¹æ³•æŠŠ Ms DI æ³¨å†ŒåŠ å…¥ DryIoc</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithDependencyInjectionAdapter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å°†å®¹å™¨åŒ…è£…ä¸º Prism çš„ IContainerExtension å¹¶è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DryIocContainerExtension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨ Ms DI çš„æ‰©å±•æ–¹æ³•æ³¨å†ŒæœåŠ¡ï¼›</li><li>Prism çš„ DI å®¹å™¨ä»ç„¶è´Ÿè´£æœ€ç»ˆè§£æä¾èµ–ã€‚</li></ul><h3 id="å¹³å°ç‰¹å®šæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¹³å°ç‰¹å®šæœåŠ¡"><span>å¹³å°ç‰¹å®šæœåŠ¡</span></a></h3><h3 id="å¼‚å¸¸å¤„ç†" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸å¤„ç†"><span>å¼‚å¸¸å¤„ç†</span></a></h3><p>Prism 8 åŠä»¥ä¸Šç‰ˆæœ¬å¯¹ <strong>ä¾èµ–æ³¨å…¥è§£æé”™è¯¯</strong> æä¾›äº†ä¸“é—¨çš„æœºåˆ¶ã€‚å½“ DI å®¹å™¨åœ¨è¿è¡Œæ—¶å°è¯•è§£æç±»å‹æ—¶ï¼Œå¯èƒ½å› ä¸ºå„ç§åŸå› å¤±è´¥ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æœªæ³¨å†ŒæœåŠ¡ï¼›</li><li>è¯•å›¾è§£ææŠ½è±¡ç±»å‹ï¼›</li><li>å¾ªç¯ä¾èµ–ï¼›</li><li>XAML è§†å›¾è§£ææ—¶å‘ç”Ÿå¼‚å¸¸ã€‚</li></ul><p>ä¸ºäº†å¸®åŠ©ä½ æ›´å¿«å®šä½é—®é¢˜ï¼ŒPrism å°†åº•å±‚å®¹å™¨å¼‚å¸¸æ•è·å¹¶é‡æ–°æŠ›å‡ºä¸º <strong><code>ContainerResolutionException</code></strong>ï¼Œå®ƒåŒ…å«æ›´å¤šè¯Šæ–­ä¿¡æ¯ã€‚</p><h4 id="ä¸ºä»€ä¹ˆéœ€è¦å¤„ç†è§£æé”™è¯¯" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦å¤„ç†è§£æé”™è¯¯"><span>ä¸ºä»€ä¹ˆéœ€è¦å¤„ç†è§£æé”™è¯¯</span></a></h4><p>åœ¨å¤§å‹ Prism åº”ç”¨ä¸­ï¼Œä¾èµ–æ³¨å…¥æ˜¯åœ¨å¯åŠ¨ã€æ¨¡å—åŠ è½½ã€å¯¼èˆªè§£æ View/VM çš„è¿‡ç¨‹ä¸­å¹¿æ³›ä½¿ç”¨çš„ã€‚å¦‚æœæŸä¸ªç±»å‹åœ¨å®¹å™¨ä¸­ <strong>æœªæ³¨å†Œæˆ–è€…æ— æ³•åˆ›å»º</strong>ï¼Œæ¡†æ¶éœ€è¦ï¼š</p><ul><li>æä¾›<strong>æ¸…æ™°æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯</strong>ï¼›</li><li>å…è®¸ä½ åœ¨åº”ç”¨å±‚æ•è·é”™è¯¯å¹¶å¤„ç†ã€‚</li></ul><p>ç‰¹åˆ«æ˜¯åœ¨æ¨¡å—åˆå§‹åŒ–æˆ–é¡µé¢å¯¼èˆªæ—¶ï¼Œè¿™ç±»é”™è¯¯å¾ˆå¸¸è§ä¸”éš¾è°ƒè¯•ï¼Œå› æ­¤å®˜æ–¹å¢å¼ºäº†é”™è¯¯åé¦ˆæœºåˆ¶ã€‚</p><h4 id="containerresolutionexception" tabindex="-1"><a class="header-anchor" href="#containerresolutionexception"><span>ContainerResolutionException</span></a></h4><p>å½“å‘ç”Ÿè§£æé”™è¯¯æ—¶ï¼ŒPrism å®¹å™¨æ‰©å±•ç»Ÿä¸€æŠ›å‡º <strong><code>ContainerResolutionException</code></strong>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">throw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ContainerResolutionException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(...);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥å¼‚å¸¸åŒ…å«ä»¥ä¸‹å…³é”®ç‰¹æ€§ï¼š</p><ul><li><strong>å¸¸é‡æ¶ˆæ¯</strong>ï¼šæ¯”å¦‚ â€œ<code>MissingRegistration</code>â€ï¼ˆæœªæ³¨å†Œï¼‰ã€â€œ<code>CannotResolveAbstractType</code>â€ï¼ˆæ— æ³•è§£ææŠ½è±¡ç±»å‹ï¼‰ã€â€œ<code>CyclicalDependency</code>â€ï¼ˆå¾ªç¯ä¾èµ–ï¼‰ç­‰ï¼›</li><li><strong>å±æ€§ä¿¡æ¯</strong>ï¼šåŒ…å«æ­£åœ¨è§£æçš„ <strong>ServiceType</strong>ï¼ˆæˆ–åç§°ï¼‰ï¼›</li><li><strong>GetErrors() æ–¹æ³•</strong>ï¼šè¿”å›ä¸€ç»„é”™è¯¯å…ƒç»„ï¼Œç”¨äºé€é¡¹æ£€æŸ¥å…·ä½“å¤±è´¥åŸå› ã€‚</li></ul><h4 id="åœ¨æ¨¡å—åŠ è½½é˜¶æ®µæ•è·è§£æé”™è¯¯" tabindex="-1"><a class="header-anchor" href="#åœ¨æ¨¡å—åŠ è½½é˜¶æ®µæ•è·è§£æé”™è¯¯"><span>åœ¨æ¨¡å—åŠ è½½é˜¶æ®µæ•è·è§£æé”™è¯¯</span></a></h4><p>Prism çš„æ¨¡å—ç®¡ç†å™¨ï¼ˆ<code>IModuleManager</code>ï¼‰å¯ä»¥åœ¨æ¨¡å—åŠ è½½å®Œæˆäº‹ä»¶ä¸­æ•è·è¿™ä¸ªå¼‚å¸¸å¹¶åˆ†æé”™è¯¯ç»†èŠ‚ã€‚å¤„ç†å…¸å‹æµç¨‹å¦‚ä¸‹ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> InitializeModules</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> manager</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IModuleManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    manager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">LoadModuleCompleted</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> +=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> LoadModuleCompleted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    manager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> LoadModuleCompleted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> sender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">LoadModuleCompletedEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Error</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è¿›è¡Œé”™è¯¯å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        HandleModuleLoadError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å›è°ƒä¸­ï¼Œä½ å¯ä»¥æ£€æŸ¥æ˜¯å¦æ˜¯ <strong>ContainerResolutionException</strong> å¹¶è°ƒç”¨å…¶ <code>GetErrors()</code>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HandleModuleLoadError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> is </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ContainerResolutionException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> cre</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> errors</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> cre</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetErrors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (type, ex) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> errors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;Error with: {</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">FullName</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;{</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ex</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetType</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">().</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}: {</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ex</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºå¯èƒ½ç±»ä¼¼ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Error </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">with</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">MyProject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">Services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.IServiceIForgotToRegister  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ContainerResolutionException: </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">No</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Registration was found </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the container </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the specified </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">type</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ä½ å°±å¯ä»¥å®šä½æ˜¯å“ªä¸ªç±»å‹è§£æå¤±è´¥å¹¶è¿…é€Ÿä¿®å¤æ³¨å†Œé—®é¢˜ã€‚</p><h3 id="å®¹å™¨å®šä½å™¨" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨å®šä½å™¨"><span>å®¹å™¨å®šä½å™¨</span></a></h3><p>åœ¨ Prism 9/8 çš„ DI æ¨¡å‹ä¸­ï¼Œ<strong><code>ContainerLocator</code></strong> æ˜¯ä¸€ä¸ªé™æ€è¾…åŠ©ç±»ï¼Œç”¨äºé›†ä¸­ç®¡ç†å½“å‰ Prism DI å®¹å™¨å®ä¾‹ï¼ˆ<code>IContainerExtension</code> / <code>IContainerProvider</code>ï¼‰ã€‚å®ƒä¸»è¦ç”¨äºè§£å†³ä»¥ä¸‹å‡ ä¸ªåœºæ™¯ï¼š<a href="https://docs.prismlibrary.com/docs/dependency-injection/container-locator.html?utm_source=chatgpt.com" target="_blank" rel="noopener noreferrer">Prism Library</a></p><ul><li>åœ¨ <strong>XAML æ ‡è®°æ‰©å±•ï¼ˆMarkup Extensionsï¼‰</strong> æˆ–é™æ€ä¸Šä¸‹æ–‡ä¸­è®¿é—®å®¹å™¨è§£ææœåŠ¡ã€‚</li><li>åœ¨ <strong>åº”ç”¨å¯åŠ¨ä¹‹å‰æå‰é…ç½®æˆ–å…±äº«å®¹å™¨</strong>ï¼ˆä¾‹å¦‚ä¸ç¬¬ä¸‰æ–¹åº“æ¡†æ¶é›†æˆï¼‰ã€‚</li><li>åœ¨ <strong>å•å…ƒæµ‹è¯•æˆ–è·¨æ¨¡å—æ’ä»¶åœºæ™¯</strong> ä¸­ä¸´æ—¶è®¾ç½®/é‡ç½®å®¹å™¨ã€‚</li></ul><h4 id="ä¸ºä»€ä¹ˆéœ€è¦containerlocator" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦containerlocator"><span>ä¸ºä»€ä¹ˆéœ€è¦<code>ContainerLocator</code></span></a></h4><p>Prism åŸæœ¬ä¾èµ– <code>CommonServiceLocator</code> åœ¨å†…éƒ¨è®¿é—®å®¹å™¨ä»¥æ”¯æŒæ—§çš„ service locator è¡Œä¸ºï¼Œä½† Prism ä» <strong>8.0 ç‰ˆæœ¬èµ·ç§»é™¤å¯¹å®ƒçš„ä¾èµ–</strong>ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ç”± Prism æä¾›çš„æ›´æ¸…æ™°çš„é™æ€å®¹å™¨è®¿é—®ç‚¹ï¼š<code>ContainerLocator</code>ã€‚</p><p>è¿™ç§åšæ³•ä¸»è¦ä¸ºäº†è§£å†³å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p><ol><li><p><strong>åœ¨ XAML æ‰©å±•ä¸­è®¿é—®å®¹å™¨</strong> æœ‰äº›æ ‡è®°æ‰©å±•éœ€è¦åœ¨ XAML æ‰§è¡Œé˜¶æ®µè§£ææœåŠ¡ç±»å‹ï¼Œè€Œæ­¤æ—¶ ViewModel/åº”ç”¨å°šæœªåˆå§‹åŒ–ã€‚<code>ContainerLocator</code> å…è®¸é™æ€è®¿é—®æ³¨å†Œå¥½çš„ DI å®¹å™¨ã€‚</p></li><li><p><strong>æå‰æ„å»ºå’Œå…±äº«å®¹å™¨</strong></p><p>å½“ä½ éœ€è¦åœ¨ PrismApplication åˆ›å»ºä¹‹å‰æ„å»ºå®¹å™¨ï¼ˆä¾‹å¦‚é›†æˆ Shinyã€ç¬¬ä¸‰æ–¹ DI æ–¹æ¡ˆã€æˆ–æå‰æ³¨å…¥ Ms DI æœåŠ¡é›†åˆï¼‰æ—¶ï¼Œ<code>ContainerLocator</code> æä¾›å¯å»¶è¿Ÿè®¾ç½®å®¹å™¨çš„æ–¹æ³•ã€‚</p></li><li><p><strong>æµ‹è¯•åœºæ™¯çš„å®¹å™¨é‡ç½®</strong> åœ¨å•å…ƒæµ‹è¯•è¿‡ç¨‹ä¸­ä¸ºäº†ç¡®ä¿çŠ¶æ€éš”ç¦»ï¼Œä½ å¯ä»¥é‡ç½®å®¹å™¨ï¼Œä½¿å…¶åœ¨æ¯ä¸ªæµ‹è¯•é—´æ¸…ç©ºã€‚</p></li></ol><h4 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•"><span>ä½¿ç”¨æ–¹æ³•</span></a></h4><p>Prism æä¾›ä¸¤ä¸ªä¸»è¦é™æ€å…¥å£ï¼š</p><h5 id="è®¾ç½®å®¹å™¨çš„åˆ›å»ºé€»è¾‘-æƒ°æ€§å»¶è¿Ÿ" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®å®¹å™¨çš„åˆ›å»ºé€»è¾‘-æƒ°æ€§å»¶è¿Ÿ"><span>è®¾ç½®å®¹å™¨çš„åˆ›å»ºé€»è¾‘ï¼ˆæƒ°æ€§å»¶è¿Ÿï¼‰</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> createContainerExtension</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () =&gt; new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DryIocContainerExtension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ContainerLocator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetContainerExtension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">createContainerExtension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç å°†ä¸€ä¸ªå®¹å™¨åˆ›å»ºå‡½æ•°æ³¨å†Œç»™ <code>ContainerLocator</code>ï¼š</p><ul><li>DI å®¹å™¨ <strong>ä¸ä¼šç«‹å³åˆ›å»º</strong>ï¼›</li><li>å®¹å™¨ä¼šåœ¨ä½ ç¬¬ä¸€æ¬¡è®¿é—® <code>ContainerLocator.Container</code> æ—¶æ‰çœŸæ­£å®ä¾‹åŒ–</li></ul><blockquote><p>[!NOTE]</p><p>å¦‚æœæ²¡æœ‰è°ƒç”¨ <code>ContainerLocator.Container</code> è®¿é—®å®ƒï¼Œéšåå†æ¬¡è°ƒç”¨ <code>SetContainerExtension</code> ä¼šè¦†ç›–ä¹‹å‰è®¾ç½®çš„åˆ›å»ºå§”æ‰˜ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸è¦å¿˜è®°è§¦å‘å®¹å™¨åˆå§‹åŒ–ã€‚</p></blockquote><h5 id="è®¿é—®å½“å‰å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#è®¿é—®å½“å‰å®¹å™¨"><span>è®¿é—®å½“å‰å®¹å™¨</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> container</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> ContainerLocator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥å±æ€§è¿”å›å½“å‰ Prism DI å®¹å™¨çš„ <strong><code>IContainerExtension</code></strong> å®ä¾‹ï¼š</p><ul><li>ä½ å¯ä»¥ä½¿ç”¨å®ƒæ‰§è¡Œæ³¨å†Œï¼ˆåœ¨å¯åŠ¨å‰ï¼‰ï¼›</li><li>æˆ–è€…ç›´æ¥åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è§£ææœåŠ¡ã€‚</li></ul><blockquote><p>[!NOTE]</p><p>Prism åº”ç”¨åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­é€šå¸¸å†…éƒ¨å·²ç»è®¾ç½®å¥½å®¹å™¨ï¼Œå› æ­¤åœ¨æ­£å¸¸åº”ç”¨å¯åŠ¨ä¸‹ä½ é€šå¸¸ä¸éœ€è¦æ˜¾å¼ <code>SetContainer</code>ã€‚åªæœ‰åœ¨éœ€è¦ç‰¹æ®Šåœºæ™¯æ‰ç”¨ã€‚</p></blockquote><h4 id="åœ¨xamlæ ‡è®°æ‰©å±•ä¸­è®¿é—®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åœ¨xamlæ ‡è®°æ‰©å±•ä¸­è®¿é—®æœåŠ¡"><span>åœ¨XAMLæ ‡è®°æ‰©å±•ä¸­è®¿é—®æœåŠ¡</span></a></h4><p>æœ‰æ—¶å€™ä½ ä¼šåœ¨ XAML æ‰©å±•å†…éƒ¨æƒ³è¦è§£ææœåŠ¡ï¼Œä¾‹å¦‚è·å–å…¨å±€çš„ <code>IEventAggregator</code>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> readonly</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Lazy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IEventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_lazyEventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Lazy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IEventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ContainerLocator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IEventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;());</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·åœ¨ MarkupExtension çš„æ‰§è¡ŒæœŸé—´å°±èƒ½è®¿é—® Prism æ³¨å†Œçš„æœåŠ¡äº†ï¼Œè€Œä¸ç”¨ä¾èµ–å½“å‰ ViewModel ç¯å¢ƒã€‚</p><h4 id="é‡ç½®å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#é‡ç½®å®¹å™¨"><span>é‡ç½®å®¹å™¨</span></a></h4><p>å½“ä½ åœ¨å•å…ƒæµ‹è¯•ä¸­é‡å¤ä½¿ç”¨å®¹å™¨å¯èƒ½å¯¼è‡´çŠ¶æ€æ±¡æŸ“ï¼ˆsingletonã€æ³¨å†Œå†²çªç­‰ï¼‰ï¼Œå¯ä»¥è°ƒç”¨ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ContainerLocator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ResetContainer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥æ–¹æ³•ä¼šï¼š</p><ul><li>æ¸…ç©ºå½“å‰å®¹å™¨å®ä¾‹ï¼›</li><li>æ¸…é™¤åˆ›å»ºå§”æ‰˜ï¼›</li><li>å®¹å™¨æœ¬èº«ä¼šè¢«é‡Šæ”¾ã€‚</li></ul><h3 id="prismå®¹å™¨æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#prismå®¹å™¨æ‰©å±•"><span>Prismå®¹å™¨æ‰©å±•</span></a></h3><h4 id="èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#èƒŒæ™¯"><span>èƒŒæ™¯</span></a></h4><p>Prism é»˜è®¤æä¾›äº†åŸºæœ¬çš„ DI æ³¨å†Œä¸è§£æèƒ½åŠ›ï¼Œé€šå¸¸å·²ç»èƒ½æ»¡è¶³å¤§å¤šæ•°åœºæ™¯ï¼š</p><ul><li>å•ä¾‹ä¸ç¬æ€æ³¨å†Œï¼›</li><li>æ ‡å‡†æœåŠ¡ä¸é¡µé¢/å¯¼èˆªæ³¨å†Œï¼›</li><li>æ„é€ å‡½æ•°æ³¨å…¥ç­‰ã€‚</li></ul><p>ä½†åœ¨æŸäº›å¤æ‚åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½éœ€è¦ï¼š</p><ul><li><strong>åˆ©ç”¨å·¥å‚æ–¹æ³•æ³¨å†ŒæœåŠ¡</strong>ï¼›</li><li>ä¸ºä¸€ä¸ªç±»å‹åŒæ—¶æ³¨å†Œå¤šä¸ªæ¥å£ï¼›</li><li>åœ¨ä¸åŒæ¥å£è§£ææ—¶ä¿è¯ä½¿ç”¨ <strong>åŒä¸€ä¸ªå®ä¾‹</strong>ï¼›</li><li>æˆ–è€…è¦ä¸ä¸€äº›ç¬¬ä¸‰æ–¹åº“æœ¬èº«è®¾è®¡çš„ DI ä½“ç³»é…åˆã€‚</li></ul><p>è¿™æ—¶ Prism å®˜æ–¹æä¾›äº† <strong>å®¹å™¨æ‰©å±•åŒ…ï¼ˆPrism.Container.Extensionsï¼‰</strong> ä½œä¸ºå¯é€‰è¡¥å……ã€‚</p><h4 id="ä½•æ—¶ä½¿ç”¨prismå®¹å™¨æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#ä½•æ—¶ä½¿ç”¨prismå®¹å™¨æ‰©å±•"><span>ä½•æ—¶ä½¿ç”¨Prismå®¹å™¨æ‰©å±•</span></a></h4><h5 id="ä½¿ç”¨å·¥å‚æ–¹æ³•æ³¨å†ŒæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å·¥å‚æ–¹æ³•æ³¨å†ŒæœåŠ¡"><span>ä½¿ç”¨å·¥å‚æ–¹æ³•æ³¨å†ŒæœåŠ¡</span></a></h5><p>Prism é»˜è®¤çš„æ³¨å†Œæ–¹æ³•åŸºæœ¬æ˜¯ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IMyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœä½ å¸Œæœ›é€šè¿‡å·¥å‚æ–¹æ³•æ¥åˆ›å»ºæœåŠ¡å®ä¾‹ï¼ˆä¾‹å¦‚éœ€è¦æ ¹æ®è¿è¡Œæ—¶é€»è¾‘åˆ›å»ºå¯¹è±¡ï¼‰ï¼Œåˆ™å¯åˆ©ç”¨æ‰©å±• API æ”¯æŒæ³¨å†Œï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IMyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(() =&gt; new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(...));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>å®é™… API åç§°ä¾æ®æ‰©å±•åŒ…ä¸åŒå¯èƒ½ç•¥æœ‰å·®å¼‚ï¼Œä½†æ‰©å±•åŒ…æœ¬è´¨ä¸Šæä¾›äº†æ›´çµæ´»çš„æ³¨å†Œæ–¹å¼ã€‚</p></blockquote><h5 id="ä¸ºä¸€ä¸ªå®ç°ç±»åŒæ—¶æ³¨å†Œå¤šä¸ªæœåŠ¡æ¥å£" tabindex="-1"><a class="header-anchor" href="#ä¸ºä¸€ä¸ªå®ç°ç±»åŒæ—¶æ³¨å†Œå¤šä¸ªæœåŠ¡æ¥å£"><span>ä¸ºä¸€ä¸ªå®ç°ç±»åŒæ—¶æ³¨å†Œå¤šä¸ªæœåŠ¡æ¥å£</span></a></h5><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå®ç°ç±» <code>MyService</code> åŒæ—¶å®ç°äº†å¤šä¸ªæ¥å£ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IMyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IYourService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ™®é€š Prism æ³¨å†Œæ—¶éœ€è¦å†™ä¸¤è¡Œä»£ç ï¼Œè€Œæ‰©å±•åŒ…å¾€å¾€å…è®¸ä½ å†™æˆæ›´ç®€æ´çš„ä¸€è¡Œï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶æ˜¯å¦å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼Œè¿™å¯¹äºä¸€äº›å¤æ‚å®¹å™¨åœºæ™¯éå¸¸æ–¹ä¾¿</p><h3 id="è‡ªå®šä¹‰å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å®¹å™¨"><span>è‡ªå®šä¹‰å®¹å™¨</span></a></h3><h2 id="å¯¹è¯æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æœåŠ¡"><span>å¯¹è¯æœåŠ¡</span></a></h2><p>Prism æä¾›äº†ä¸€ä¸ª <strong>è·¨å¹³å°çš„å¯¹è¯æ¡†æœåŠ¡æŠ½è±¡ (<code>IDialogService</code>)</strong>ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºä¸­æ˜¾ç¤ºå¯è‡ªå®šä¹‰çš„å¯¹è¯æ¡†ï¼ˆDialogï¼‰ã€‚è¿™ç§æœåŠ¡éµå¾ª MVVM æ¨¡å¼ï¼Œå¯è®©ä½ ä½¿ç”¨ Prism çš„ DIã€æ•°æ®ç»‘å®šå’Œ ViewModel ç”Ÿå‘½å‘¨æœŸç®¡ç†ç‰¹æ€§ã€‚</p><p>å¯¹è¯æ¡†å¯ç”¨äºå±•ç¤ºæ¶ˆæ¯ã€ç¡®è®¤æ“ä½œã€è¾“å…¥è¡¨å•ç­‰åœºæ™¯ï¼Œå¹¶åˆ©ç”¨ Prism çš„æœºåˆ¶æ”¯æŒå‚æ•°ä¼ é€’ä¸ç»“æœå›è°ƒã€‚</p><h4 id="è®¾è®¡ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡ç›®æ ‡"><span>è®¾è®¡ç›®æ ‡</span></a></h4><p>Prism Dialog Service çš„è®¾è®¡ç†å¿µæ˜¯ï¼š</p><ul><li>ä½¿ç”¨ä½ çš„è‡ªå®šä¹‰ View/XAML ä½œä¸ºå¯¹è¯æ¡†å†…å®¹ï¼›</li><li>è®©æ˜¾ç¤ºã€å‚æ•°ä¼ é€’ã€äº‹ä»¶å›è°ƒéƒ½éµå¾ª <strong>MVVM æ¨¡å¼</strong>ï¼›</li><li>ä¸ Prism çš„ä¾èµ–æ³¨å…¥æœºåˆ¶æ— ç¼åä½œï¼Œä½¿å¯¹è¯æ¡† ViewModel é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥æœåŠ¡ã€‚</li></ul><p>Prism 9.0 å¯¹ <code>IDialogService</code> åšäº†æ”¹è¿›ï¼Œé‡ç‚¹æ˜¯å¼•å…¥äº† <strong>DialogCallback</strong> ç±»å‹ï¼Œè®©è°ƒç”¨è€…åœ¨å¯¹è¯æ¡†å…³é—­æ—¶å¯ä»¥æ›´çµæ´»åœ°å¤„ç†å›è°ƒé€»è¾‘ï¼ˆæ”¯æŒåŒæ­¥æˆ–å¼‚æ­¥å¤„ç†ï¼‰ã€‚</p><h4 id="dialogcallbackå›è°ƒæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#dialogcallbackå›è°ƒæœºåˆ¶"><span>DialogCallbackå›è°ƒæœºåˆ¶</span></a></h4><p>åœ¨æ–°ç‰ˆ Prism ä¸­ï¼Œä¸ºäº†å¢å¼ºå¯¹è¯ç»“æœçš„å¤„ç†èƒ½åŠ›ï¼Œå¼•å…¥äº† <code>DialogCallback</code> ç±»ï¼š</p><p><strong>åŸºæœ¬Closeå›è°ƒ</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;The Dialog Closed&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æˆ–è·å–å¯¹è¯æ¡†è¿”å›å€¼ï¼š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;Dialog result: {</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ”¯æŒ<strong>å¼‚æ­¥å›è°ƒ</strong>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnCloseAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CompletedTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¹Ÿå¯ä»¥å¼‚æ­¥è·å–ç»“æœï¼š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnCloseAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CompletedTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é”™è¯¯å¤„ç†å›è°ƒ" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯å¤„ç†å›è°ƒ"><span>é”™è¯¯å¤„ç†å›è°ƒ</span></a></h4><p>å¯ä»¥ä¸ºå¯¹è¯æ¡†å›è°ƒé…ç½®é”™è¯¯å¤„ç†é€»è¾‘ï¼Œä»…åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸æ—¶è§¦å‘ï¼š</p><h5 id="é€šå¸¸å¼‚å¸¸å¤„ç†" tabindex="-1"><a class="header-anchor" href="#é€šå¸¸å¼‚å¸¸å¤„ç†"><span>é€šå¸¸å¼‚å¸¸å¤„ç†</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Whoops... something bad happened!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æˆ–è·å–å¼‚å¸¸å®ä¾‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ç‰¹å®šå¼‚å¸¸å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ç‰¹å®šå¼‚å¸¸å¤„ç†"><span>ç‰¹å®šå¼‚å¸¸å¤„ç†</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NullReferenceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">nre</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;NullReferenceException occurred.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¹¶ä¸”å¯ä»¥ç»“åˆå¯¹è¯ç»“æœä¸€èµ·å¤„ç†ï¼š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NullReferenceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;((</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">nre</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;Result: {</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">nre</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¯¹äºé”™è¯¯å¤„ç†åŒæ ·æ”¯æŒå¼‚æ­¥ç‰ˆæœ¬æ–¹æ³•ï¼š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DialogCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OnErrorAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CompletedTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯¹è¯æ¡†æœåŠ¡æ ¸å¿ƒæµç¨‹" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æ¡†æœåŠ¡æ ¸å¿ƒæµç¨‹"><span>å¯¹è¯æ¡†æœåŠ¡æ ¸å¿ƒæµç¨‹</span></a></h4><blockquote><p>ä¸‹è¿°æµç¨‹é€‚ç”¨äºå¤§å¤šæ•°æ”¯æŒ <code>IDialogService</code> çš„å¹³å°ï¼Œä¾‹å¦‚ WPFï¼Œä»¥åŠ Prism.Forms æ—¶ä»£çš„ Xamarin.Formsï¼›MAUI å¹³å°ä¹Ÿæä¾›ç±»ä¼¼æœºåˆ¶æˆ–æ‰©å±•æ’ä»¶æ”¯æŒã€‚</p></blockquote><h5 id="åˆ›å»ºå¯¹è¯æ¡†view" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¯¹è¯æ¡†view"><span>åˆ›å»ºå¯¹è¯æ¡†View</span></a></h5><p>å¯¹è¯æ¡†é€šå¸¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ Viewï¼ˆWPF çš„ UserControl æˆ– Xamarin.Forms/MAUI çš„ ContentViewï¼‰ï¼Œå¹¶ç”± ViewModel ç®¡ç†ã€‚å¯¹è¯æ¡† ViewModel å¿…é¡»å®ç° <code>IDialogAware</code> æ¥å£æ‰èƒ½ä½¿ç”¨ DialogServiceï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IDialogAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    string</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> Title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; RequestClose;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanCloseDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogOpened</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogClosed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¯¹è¯æ¡†viewmodel" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æ¡†viewmodel"><span>å¯¹è¯æ¡†ViewModel</span></a></h5><p>å¯¹è¯æ¡† ViewModel åœ¨éœ€è¦å…³é—­æ—¶è§¦å‘ <code>RequestClose</code> äº‹ä»¶ï¼Œå¹¶ä¼ é€’ <code>IDialogResult</code> ä»¥å‘ŠçŸ¥è°ƒç”¨è€…å¯¹è¯æ¡†çš„æŒ‰é’®ç»“æœæˆ–å‚æ•°ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> NotificationDialogViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; RequestClose;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CloseDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ³¨å†Œå¯¹è¯æ¡†" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œå¯¹è¯æ¡†"><span>æ³¨å†Œå¯¹è¯æ¡†</span></a></h5><p>éœ€è¦åœ¨ Prism å®¹å™¨æ³¨å†Œå¯¹è¯æ¡†åŠå…¶ ViewModelï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NotificationDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NotificationDialogViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æä¾›<strong>è‡ªå®šä¹‰åç§°</strong>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NotificationDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NotificationDialogViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;notifyDialog&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="è°ƒç”¨å¯¹è¯æ¡†" tabindex="-1"><a class="header-anchor" href="#è°ƒç”¨å¯¹è¯æ¡†"><span>è°ƒç”¨å¯¹è¯æ¡†</span></a></h5><p>åœ¨ ViewModel ä¸­æ³¨å…¥ <code>IDialogService</code> å¹¶è°ƒç”¨ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;notifyDialog&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;message={</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>DialogParameters</code> æ”¯æŒä¼ å…¥é”®å€¼å¯¹ï¼Œä»¥å‚æ•°å½¢å¼ä¼ é€’ç»™å¯¹è¯æ¡† ViewModelã€‚</p><h4 id="è‡ªå®šä¹‰å¯¹è¯æ¡†å®¿ä¸»çª—å£" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å¯¹è¯æ¡†å®¿ä¸»çª—å£"><span>è‡ªå®šä¹‰å¯¹è¯æ¡†å®¿ä¸»çª—å£</span></a></h4><p>åœ¨ WPFï¼ˆæˆ– Uno å¹³å°ï¼‰ä¸­ï¼Œä½ å¯ä»¥å®šåˆ¶å¯¹è¯æ¡† <strong>å®¿ä¸»çª—å£ï¼ˆDialog Windowï¼‰</strong>ï¼š</p><ul><li>å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª Window ä¸”å®ç° <code>IDialogWindow</code> çš„çª—å£ï¼›</li><li>æ³¨å†Œè¯¥çª—å£ç±»å‹ï¼š</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterDialogWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyCustomDialogWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è‹¥æœ‰å¤šä¸ªçª—å£ï¼Œå¯ä½¿ç”¨åç§°æ³¨å†Œå¹¶åœ¨è°ƒç”¨æ—¶æŒ‡å®šåç§°ã€‚</p><h3 id="dialog-aware" tabindex="-1"><a class="header-anchor" href="#dialog-aware"><span>Dialog-Aware</span></a></h3><p>åœ¨ Prism çš„å¯¹è¯æ¡†æœåŠ¡ä¸­ï¼Œ<strong>å¯¹è¯æ¡† ViewModel å¿…é¡»å®ç°æ¥å£ <code>IDialogAware</code></strong>ã€‚è¿™æ˜¯å¯¹è¯æ¡†ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œäº¤äº’çš„åŸºç¡€ï¼Œå®ƒè®©å¯¹è¯æ¡†æœåŠ¡çŸ¥é“ä½•æ—¶å…³é—­ã€ä½•æ—¶æ‰“å¼€ä»¥åŠå®ƒçš„æ ‡é¢˜ç­‰ä¿¡æ¯ã€‚</p><h4 id="idialogawareæ¥å£" tabindex="-1"><a class="header-anchor" href="#idialogawareæ¥å£"><span>IDialogAwareæ¥å£</span></a></h4><p><code>IDialogAware</code> æ˜¯å¯¹è¯æ¡† ViewModel å¿…é¡»å®ç°çš„æ¥å£ï¼Œå®ƒå®šä¹‰äº†ä»¥ä¸‹æˆå‘˜ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IDialogAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanCloseDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogClosed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogOpened</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    DialogCloseListener</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="canclosedialog" tabindex="-1"><a class="header-anchor" href="#canclosedialog"><span>CanCloseDialog()</span></a></h5><p>ç”¨äºå†³å®šå¯¹è¯æ¡†æ˜¯å¦å¯ä»¥è¢«å…³é—­ã€‚</p><ul><li>åœ¨å…³é—­å¯¹è¯æ¡†ä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ã€‚</li><li>å¦‚æœè¿”å› <code>false</code>ï¼Œåˆ™å¯¹è¯æ¡†ä¸ä¼šè¢«å…³é—­ï¼ˆPrism ä¸ä¼šæ‰§è¡Œå…³é—­æ“ä½œï¼‰ã€‚</li><li>å¸¸ç”¨äºéœ€è¦æ ¡éªŒç”¨æˆ·è¾“å…¥çš„åœºæ™¯ï¼Œæ¯”å¦‚å†…å®¹æœªå¡«å†™å®Œæ•´æ—¶é˜»æ­¢å…³é—­ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanCloseDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å½“ Name ä¸ºç©ºæ—¶é˜»æ­¢å…³é—­å¯¹è¯æ¡†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">IsNullOrEmpty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ondialogopened-idialogparameters-parameters" tabindex="-1"><a class="header-anchor" href="#ondialogopened-idialogparameters-parameters"><span>OnDialogOpened(IDialogParameters parameters)</span></a></h5><p>å½“å¯¹è¯æ¡†æ‰“å¼€æ—¶è¢«è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºï¼š</p><ul><li>ä»å‚æ•°ä¸­æå–æ•°æ®ï¼›</li><li>åˆå§‹åŒ– ViewModel å±æ€§ï¼›</li><li>è§¦å‘ç¬¬ä¸€æ¬¡æ˜¾ç¤ºé€»è¾‘ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogOpened</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;message&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    Message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ondialogclosed" tabindex="-1"><a class="header-anchor" href="#ondialogclosed"><span>OnDialogClosed()</span></a></h5><p>å¯¹è¯æ¡†å…³é—­åæ‰§è¡Œçš„æ¸…ç†é€»è¾‘ï¼Œå¸¸ç”¨äºï¼š</p><ul><li>æ¸…é™¤ä¸´æ—¶çŠ¶æ€ï¼›</li><li>åœæ­¢å®šæ—¶å™¨/å–æ¶ˆå¼‚æ­¥ä»»åŠ¡ï¼›</li><li>å…¶ä»–èµ„æºé‡Šæ”¾ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogClosed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ¸…ç†é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯¹è¯æ¡†å…³é—­é€šçŸ¥" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æ¡†å…³é—­é€šçŸ¥"><span>å¯¹è¯æ¡†å…³é—­é€šçŸ¥</span></a></h4><p><code>RequestClose</code>å±æ€§</p><p>è¿™æ˜¯ä¸€ä¸ªç”±å¯¹è¯æ¡†æœåŠ¡è®¾ç½®çš„ç›‘å¬å™¨ï¼Œä½ åœ¨ ViewModel ä¸­ä½¿ç”¨è¯¥å±æ€§é€šçŸ¥ Prism å…³é—­å¯¹è¯æ¡†ã€‚<strong>ä¸è¦è‡ªå·±ä¸ºæ­¤å±æ€§èµ‹å€¼</strong>ï¼Œè€Œåº”è¯¥è°ƒç”¨ <code>.Invoke()</code> è§¦å‘å…³é—­é€»è¾‘</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> DialogCloseListener</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>è°ƒç”¨æ–¹å¼ï¼š</strong></p><p>é€šè¿‡ <code>Invoke</code> ä¼ é€’ä¸åŒå‚æ•°æ¥å…³é—­å¯¹è¯æ¡†å¹¶è¿”å›ç»“æœæˆ–å‚æ•°ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 0. æ— å‚æ•°å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 1. ä¼ é€’å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Key&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 2. ä¼ é€’æŒ‰é’®ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 3. ä¼ é€’å‚æ•°å’Œç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Key&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 4. ä½¿ç”¨å®Œæ•´ç»“æœå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogResult</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Key&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    Result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OK</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿™äº›è°ƒç”¨éƒ½å°†è§¦å‘å¯¹è¯æ¡†å…³é—­ï¼Œå¹¶å°†æ•°æ®ä¼ å›ç»™è§¦å‘å¯¹è¯æ¡†çš„è°ƒç”¨è€…ï¼ˆä¾‹å¦‚é€šè¿‡ <code>IDialogService.ShowDialog</code>ï¼‰</p></blockquote><h2 id="äº‹ä»¶èšåˆå™¨" tabindex="-1"><a class="header-anchor" href="#äº‹ä»¶èšåˆå™¨"><span>äº‹ä»¶èšåˆå™¨</span></a></h2><p>äº‹ä»¶èšåˆå™¨æ˜¯ä¸€ç§ <strong>å‘å¸ƒ/è®¢é˜…æ¨¡å¼</strong> çš„å®ç°ï¼Œå®ƒå…è®¸åº”ç”¨ä¸­ä¸åŒç»„ä»¶ï¼ˆä¾‹å¦‚ ViewModelã€æœåŠ¡æ¨¡å—ç­‰ï¼‰é€šè¿‡äº‹ä»¶è¿›è¡Œé€šä¿¡ï¼Œè€Œæ— éœ€å½¼æ­¤å¼•ç”¨ï¼Œä»è€Œä¿æŒæ¾è€¦åˆæ¶æ„ã€‚</p><p>åœ¨ MVVM å’Œæ¨¡å—åŒ–åº”ç”¨ä¸­ï¼š</p><ul><li>å„ç»„ä»¶å¯èƒ½éœ€è¦äº’ç›¸å‘é€æ¶ˆæ¯ï¼ˆä¾‹å¦‚ä» A æ¨¡å—é€šçŸ¥ B æ‰§è¡ŒæŸé€»è¾‘ï¼‰ï¼›</li><li>ä½†ä¸å¸Œæœ›æ¨¡å—é—´å­˜åœ¨ç›´æ¥ä¾èµ–ï¼›</li><li>Event Aggregator æ­£æ˜¯ä¸ºè¿™ç§è·¨æ¨¡å—æ¶ˆæ¯è®¾è®¡çš„ä¸­ä»‹ã€‚</li></ul><p>Prism æä¾›äº†å¼ºç±»å‹ã€å¯è®¢é˜…/å‘å¸ƒçš„æœºåˆ¶ï¼š</p><ul><li><strong>å‘å¸ƒè€…ï¼ˆPublisherï¼‰</strong> å‘å¸ƒäº‹ä»¶ï¼›</li><li><strong>è®¢é˜…è€…ï¼ˆSubscriberï¼‰</strong> æ³¨å†Œäº‹ä»¶å›è°ƒï¼›</li><li><strong>æ²¡æœ‰å¼•ç”¨ä¾èµ–</strong>ï¼Œåªä¾èµ–äº‹ä»¶ç±»å‹ã€‚</li></ul><h4 id="ieventaggregator" tabindex="-1"><a class="header-anchor" href="#ieventaggregator"><span><code>IEventAggregator</code></span></a></h4><p>è¿™æ˜¯äº‹ä»¶èšåˆå™¨çš„æœåŠ¡æ¥å£ï¼Œé€šå¸¸é€šè¿‡ä¾èµ–æ³¨å…¥è·å–ã€‚å®ƒè´Ÿè´£ï¼š</p><ul><li>ç®¡ç†äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼›</li><li>æ‰¾åˆ°æˆ–åˆ›å»ºäº‹ä»¶å®ä¾‹ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SomeViewModel</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> readonly</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IEventAggregator</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SomeViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IEventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        _eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–äº‹ä»¶ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> myEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> _eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyCustomEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Prism ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶åˆ›å»ºäº‹ä»¶å¯¹è±¡ï¼Œæ— éœ€æ‰‹åŠ¨åˆå§‹åŒ–ã€‚</p><h4 id="pubsubevent-tpayload" tabindex="-1"><a class="header-anchor" href="#pubsubevent-tpayload"><span><code>PubSubEvent&lt;TPayload&gt;</code></span></a></h4><p>è¿™æ˜¯ Prism æä¾›çš„äº‹ä»¶åŸºç±»ï¼Œç”¨äºè¡¨ç¤ºæŸç§å¸¦è´Ÿè½½ï¼ˆpayloadï¼‰çš„äº‹ä»¶ï¼š</p><ul><li><code>TPayload</code> æ˜¯äº‹ä»¶æ•°æ®çš„ç±»å‹ï¼›</li><li>å¤šä¸ªå‘å¸ƒè€…å¯ä»¥å‘å¸ƒåŒä¸€ä¸ªäº‹ä»¶ï¼›</li><li>å¤šä¸ªè®¢é˜…è€…å¯ä»¥å“åº”ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TickerSymbolSelectedEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PubSubEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; { }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="å‘å¸ƒäº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒäº‹ä»¶"><span>å‘å¸ƒäº‹ä»¶</span></a></h4><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TickerSymbolSelectedEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Publish</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;STOCK0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>GetEvent</code> è·å–äº‹ä»¶å®ä¾‹ï¼›</li><li><code>Publish</code> è§¦å‘äº‹ä»¶ï¼Œå¹¶å°† payload ä¼ é€’ç»™æ‰€æœ‰è®¢é˜…è€…ã€‚</li></ul><h4 id="è®¢é˜…äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#è®¢é˜…äº‹ä»¶"><span>è®¢é˜…äº‹ä»¶</span></a></h4><p>è®¢é˜…è€…ä½¿ç”¨äº‹ä»¶å®ä¾‹çš„ <code>Subscribe</code> æ–¹æ³•æ³¨å†Œå›è°ƒï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TickerSymbolSelectedEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Subscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">OnTickerSelected</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ <code>OnTickerSelected(string symbol)</code> æ˜¯å›è°ƒæ–¹æ³•</p><p><strong>è®¢é˜…æ—¶å¯ä»¥æŒ‡å®šçº¿ç¨‹è°ƒåº¦ï¼š</strong></p><ul><li><strong><code>PublisherThread</code></strong>ï¼šåœ¨å‘å¸ƒè€…çº¿ç¨‹ä¸Šå›è°ƒï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ï¼›</li><li><strong><code>UIThread</code></strong>ï¼šç¡®ä¿å›è°ƒåœ¨ UI çº¿ç¨‹æ‰§è¡Œï¼ˆé€‚ç”¨äºæ›´æ–° UIï¼‰ï¼›</li><li><strong><code>BackgroundThread</code></strong>ï¼šåœ¨çº¿ç¨‹æ± çº¿ç¨‹å¼‚æ­¥æ¥æ”¶äº‹ä»¶ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åœ¨UIçº¿ç¨‹è°ƒåº¦</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TickerSymbolSelectedEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">               .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Subscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">OnTickerSelected</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ThreadOption</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UIThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¿‡æ»¤è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#è¿‡æ»¤è®¢é˜…"><span>è¿‡æ»¤è®¢é˜…</span></a></h4><p>è‹¥ä»…æƒ³å¤„ç†ç‰¹å®š payloadï¼Œå¯ä½¿ç”¨è¿‡æ»¤æ¡ä»¶ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">eventAggregator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TickerSymbolSelectedEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">               .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Subscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">OnTickerSelected</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                          ThreadOption</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UIThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                          filter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">symbol</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">symbol</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;STOCK0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åªæœ‰æ»¡è¶³è¿‡æ»¤æ¡ä»¶çš„äº‹ä»¶æ‰ä¼šå›è°ƒã€‚</p><h4 id="å¼•ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨æ–¹å¼"><span>å¼•ç”¨æ–¹å¼</span></a></h4><p>é»˜è®¤æƒ…å†µä¸‹ Prism ä½¿ç”¨ <strong>å¼±å¼•ç”¨</strong> ä¿å­˜è®¢é˜…è€…æ–¹æ³•ï¼š</p><ul><li>å¦‚æœè®¢é˜…è€…å¯¹è±¡æ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼Œåˆ™åƒåœ¾å›æ”¶å¯ä»¥é‡Šæ”¾å®ƒï¼›</li><li>è®¢é˜…è€…è‡ªåŠ¨å–æ¶ˆè®¢é˜…ï¼Œå‡å°‘å†…å­˜æ³„æ¼é£é™©ã€‚</li></ul><p>è‹¥éœ€è¦ä¿æŒå¼ºå¼•ç”¨ä»¥æé«˜æ€§èƒ½ï¼ˆä¾‹å¦‚å¤§é‡äº‹ä»¶é¢‘ç¹å‘å¸ƒï¼‰æˆ–ç¡®ä¿å¯¹è±¡é•¿æ—¶é—´è®¢é˜…ï¼Œåˆ™è®¾ç½®:</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">tickerEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Subscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">OnTickerSelected</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ThreadOption</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UIThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">keepSubscriberReferenceAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ­¤æ—¶è®¢é˜…è€…å¿…é¡» <strong>æ‰‹åŠ¨å–æ¶ˆè®¢é˜…</strong>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¯¹è±¡ä¸ä¼šé‡Šæ”¾</p><h4 id="å–æ¶ˆè®¢é˜…" tabindex="-1"><a class="header-anchor" href="#å–æ¶ˆè®¢é˜…"><span>å–æ¶ˆè®¢é˜…</span></a></h4><p>Prism æ”¯æŒä¸¤ç§å–æ¶ˆæ–¹å¼ï¼š</p><ol><li><p>ä½¿ç”¨æ–¹æ³•å¼•ç”¨å–æ¶ˆï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">tickerEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Unsubscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">OnTickerSelected</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>ä½¿ç”¨è®¢é˜…ä»¤ç‰Œå–æ¶ˆï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> token</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> tickerEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Subscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">OnTickerSelected</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">tickerEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Unsubscribe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">token</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¢é˜…ä»¤ç‰Œå¯¹ä½¿ç”¨åŒ¿åæ–¹æ³•æˆ– lambda æ—¶å°¤ä¸ºæœ‰ç”¨</p></li></ol><h2 id="mvvm" tabindex="-1"><a class="header-anchor" href="#mvvm"><span>MVVM</span></a></h2><h3 id="bindablebase" tabindex="-1"><a class="header-anchor" href="#bindablebase"><span>BindableBase</span></a></h3><p>ViewModel é€šå¸¸éœ€è¦è®© View å±‚å¯¹å±æ€§çš„æ”¹å˜åšå‡ºå“åº”ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œéœ€è¦å®ç° <code>INotifyPropertyChanged</code> æ¥å£ã€‚Prism ä¸ºæ­¤æä¾›äº†ä¸€ä¸ªåŸºç±» <strong><code>BindableBase</code></strong>ï¼Œå®ƒå°è£…äº†å¸¸è§çš„å®ç°ç»†èŠ‚å¹¶ç®€åŒ–äº†å¼€å‘æµç¨‹ã€‚</p><blockquote><p>è™½ç„¶ Prism æ¨èä½¿ç”¨ <code>BindableBase</code>ï¼Œä½†ä½ ä¸<strong>å¿…é¡»</strong>ä½¿ç”¨å®ƒï¼›ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å®ç°ï¼ˆä¾‹å¦‚ .NET è‡ªèº«å®ç°ã€CommunityToolkit çš„ MVVM åŠŸèƒ½ç­‰ï¼‰</p></blockquote><h4 id="ä¸ºä»€ä¹ˆéœ€è¦bindablebase" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦bindablebase"><span>ä¸ºä»€ä¹ˆéœ€è¦BindableBase</span></a></h4><p>åœ¨ MVVM ä¸­ï¼ŒViewModel çš„å±æ€§é€šå¸¸ç»‘å®šåˆ° View ä¸Šï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">TextBlock</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding Message}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¦ç¡®ä¿å½“ ViewModel ä¸­çš„ <code>Message</code> æ”¹å˜æ—¶ View å±‚è‡ªåŠ¨åˆ·æ–°ï¼Œå°±å¿…é¡»é€šçŸ¥ UI å±æ€§å·²æ›´æ”¹ã€‚è¿™å°±æ˜¯ <code>INotifyPropertyChanged</code> çš„ç”¨é€”ã€‚</p><p>æ‰‹å†™å®ç° <code>INotifyPropertyChanged</code> æ˜¯é‡å¤ä¸”å®¹æ˜“å‡ºé”™çš„ã€‚Prism çš„ <code>BindableBase</code>ï¼š</p><ul><li>å®ç°äº† <code>INotifyPropertyChanged</code>ï¼›</li><li>æä¾›äº†ç®€åŒ–å±æ€§ setter çš„è¾…åŠ©æ–¹æ³•ï¼›</li><li>è‡ªåŠ¨å¤„ç†å¤šæ¬¡è®¾ç½®ç›¸åŒå€¼æ—¶é¿å…ä¸å¿…è¦çš„äº‹ä»¶è§¦å‘ã€‚</li></ul><h4 id="å¯é€šçŸ¥çš„å±æ€§" tabindex="-1"><a class="header-anchor" href="#å¯é€šçŸ¥çš„å±æ€§"><span>å¯é€šçŸ¥çš„å±æ€§</span></a></h4><h5 id="åˆ›å»ºæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–¹å¼"><span>åˆ›å»ºæ–¹å¼</span></a></h5><p>è¦ä½¿ç”¨ <code>BindableBase</code>ï¼Œä½ å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å®šä¹‰ ViewModelï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ViewAViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> Message</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>SetProperty</code> ä¼šæ¯”è¾ƒæ—§å€¼ä¸æ–°å€¼ï¼›</li><li>å¦‚æœç›¸åŒåˆ™ä¸è§¦å‘äº‹ä»¶ï¼›</li><li>å¦‚æœä¸åŒï¼Œå®ƒä¼šè®¾ç½®å€¼å¹¶å¼•å‘ <code>PropertyChanged</code>ã€‚</li></ul><h5 id="ä¸ºä»€ä¹ˆæ˜¯setpropertyè€Œä¸æ˜¯æ‰‹åŠ¨è§¦å‘" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯setpropertyè€Œä¸æ˜¯æ‰‹åŠ¨è§¦å‘"><span>ä¸ºä»€ä¹ˆæ˜¯<code>SetProperty</code>è€Œä¸æ˜¯æ‰‹åŠ¨è§¦å‘</span></a></h5><p>ä½ å½“ç„¶å¯ä»¥è‡ªå·±å†™ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RaisePropertyChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†è¿™ç§å†™æ³•çš„é—®é¢˜åŒ…æ‹¬ï¼š</p><ul><li>æ¯æ¬¡è®¾ç½®ç›¸åŒå€¼æ—¶éƒ½ä¼šè§¦å‘ UI æ›´æ–°ï¼›</li><li>ä»£ç è¾ƒå†—é•¿ã€æ˜“å‡ºé”™ï¼›</li><li>éœ€è¦æ‰‹åŠ¨ä¼ å…¥å±æ€§åæˆ–ä¾èµ– CallerMemberNameã€‚</li></ul><p><code>SetProperty</code> è‡ªåŠ¨å¤„ç†ï¼š</p><ul><li>å€¼å¯¹æ¯”ï¼›</li><li>äº‹ä»¶è§¦å‘ï¼›</li><li>å±æ€§åç§°æ¨æ–­ï¼ˆåŸºäº CallerMemberNameï¼‰ã€‚</li></ul><h4 id="å±æ€§å˜æ›´æ—¶æ‰§è¡Œé¢å¤–é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#å±æ€§å˜æ›´æ—¶æ‰§è¡Œé¢å¤–é€»è¾‘"><span>å±æ€§å˜æ›´æ—¶æ‰§è¡Œé¢å¤–é€»è¾‘</span></a></h4><p>æœ‰æ—¶å€™ä½ ä¸åªéœ€è¦é€šçŸ¥ UIï¼Œè¿˜å¸Œæœ›åœ¨å±æ€§å˜æ›´æ—¶æ‰§è¡ŒæŸæ®µé€»è¾‘ã€‚<code>SetProperty</code> æ”¯æŒä¼ å…¥ä¸€ä¸ªå›è°ƒï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _isActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> IsActive</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_isActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _isActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, () =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            OnIsActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            OnIsNotActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> virtual</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnIsActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> virtual</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnIsNotActive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§å†™æ³•è®©ä½ åœ¨å±æ€§å˜æ›´æ—¶æ‰§è¡Œé¢å¤–æ“ä½œï¼Œè€Œä¸å¿…é‡å¤å†™ <code>RaisePropertyChanged</code>ã€‚</p><h3 id="viewmodelå®šä½å™¨" tabindex="-1"><a class="header-anchor" href="#viewmodelå®šä½å™¨"><span>ViewModelå®šä½å™¨</span></a></h3><p>åœ¨ Prism çš„ MVVM æ¨¡å¼ä¸­ï¼Œ<strong>è§†å›¾ï¼ˆViewï¼‰ä¸å…¶è§†å›¾æ¨¡å‹ï¼ˆViewModelï¼‰ä¹‹é—´çš„ç»‘å®šæ˜¯è‡ªåŠ¨å®Œæˆçš„</strong>ï¼Œè€Œæ— éœ€åœ¨ä»£ç é‡Œæ‰‹åŠ¨è®¾ç½® DataContextã€‚Prism é€šè¿‡ä¸€ä¸ªå«åš <strong>ViewModel Locator</strong> çš„æœºåˆ¶å®ç°è¿™ç‚¹ï¼Œä½¿å¾—å¼€å‘æ›´ç®€æ´ã€ç¬¦åˆ MVVM çº¦å®šã€‚</p><h4 id="è‡ªåŠ¨ç»‘å®šæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨ç»‘å®šæœºåˆ¶"><span>è‡ªåŠ¨ç»‘å®šæœºåˆ¶</span></a></h4><p><code>ViewModelLocator</code> æ˜¯ Prism çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒé€šè¿‡ <strong>é™„åŠ å±æ€§ä¸çº¦å®š</strong> è‡ªåŠ¨å°† View ä¸å¯¹åº”çš„ ViewModel å®ä¾‹å…³è”èµ·æ¥ã€‚</p><p>æ ¸å¿ƒæ˜¯ Prism çš„é™„åŠ å±æ€§ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">prism:ViewModelLocator.AutoWireViewModel=&quot;True&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å½“è¿™ä¸ªå±æ€§è®¾ç½®ä¸º <code>True</code> æ—¶ï¼š</p><ol><li>Prism ä¼šè°ƒç”¨å†…éƒ¨çš„ <code>ViewModelLocationProvider</code> é€»è¾‘ï¼›</li><li>æ ¹æ® <strong>çº¦å®šè§„åˆ™</strong> æˆ– <strong>è‡ªå®šä¹‰æ˜ å°„</strong> æ¥å®šä½ ViewModelï¼›</li><li>ä½¿ç”¨ Prism çš„ DI å®¹å™¨åˆ›å»º ViewModel å®ä¾‹ï¼›</li><li>å°†è¯¥å®ä¾‹è®¾ç½®ä¸º View çš„ DataContextã€‚</li></ol><p>é»˜è®¤è¡Œä¸ºæ˜¯å¼€å¯è‡ªåŠ¨ç»‘å®šï¼ˆAutoWireViewModelï¼‰</p><h4 id="é»˜è®¤çº¦å®šè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤çº¦å®šè§„åˆ™"><span>é»˜è®¤çº¦å®šè§„åˆ™</span></a></h4><p>Prism é»˜è®¤é€šè¿‡ä¸€ä¸ª <strong>å‘½åçº¦å®š</strong> æ¥æ¨æ–­ ViewModel ç±»å‹ï¼š</p><p>åœ¨æ²¡æœ‰æ˜¾å¼æ³¨å†Œæ˜ å°„çš„æƒ…å†µä¸‹ï¼š</p><ul><li><strong>ViewModel ä¸ View å¿…é¡»ä½äºåŒä¸€ç¨‹åºé›†</strong>ï¼›</li><li>View ä½äº <code>*.Views</code> å‘½åç©ºé—´ï¼›</li><li>ViewModel ä½äº <code>*.ViewModels</code> å‘½åç©ºé—´ï¼›</li><li>ViewModel åç§°å¿…é¡»æ˜¯ View åç§°åŠ ä¸Š <code>ViewModel</code> åç¼€ã€‚</li></ul><p><strong>ä¸¾ä¾‹ï¼š</strong></p><table><thead><tr><th>è§†å›¾ç±»å‹</th><th>é¢„æœŸçš„ ViewModel ç±»å‹</th></tr></thead><tbody><tr><td><code>MyApp.Views.MainPage</code></td><td><code>MyApp.ViewModels.MainPageViewModel</code></td></tr></tbody></table><h4 id="è‡ªå®šä¹‰viewmodelæ˜ å°„" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰viewmodelæ˜ å°„"><span>è‡ªå®šä¹‰ViewModelæ˜ å°„</span></a></h4><p>å¦‚æœä¸éµå¾ªé»˜è®¤çº¦å®šï¼Œæˆ–è€… ViewModel åç§°/å‘½åç©ºé—´ä¸åŒï¼Œå¯ä»¥ç”¨<code>ViewModelLocationProvider.Register</code> <strong>æ˜¾å¼æ˜ å°„</strong></p><p><strong>é€šè¿‡ç±»å‹æ˜ å°„æ³¨å†Œï¼š</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModelLocationProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CustomViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ³›å‹æ–¹å¼ï¼š</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModelLocationProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CustomViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="ä½¿ç”¨å·¥å‚åˆ›å»ºviewmodel" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å·¥å‚åˆ›å»ºviewmodel"><span>ä½¿ç”¨å·¥å‚åˆ›å»ºViewModelï¼š</span></a></h5><p>å¦‚æœä½ æƒ³æ‰‹åŠ¨æ§åˆ¶å¦‚ä½•åˆ›å»º ViewModel å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ³¨å†Œå·¥å‚ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModelLocationProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    () =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CustomViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;());</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è‡ªå®šä¹‰é»˜è®¤å‘½åè§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰é»˜è®¤å‘½åè§„èŒƒ"><span>è‡ªå®šä¹‰é»˜è®¤å‘½åè§„èŒƒ</span></a></h4><p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ä¸åŒäºé»˜è®¤çº¦å®šçš„è§„åˆ™æ¥æ¨æ–­ ViewModel ç±»å‹ï¼Œå¯ä»¥ <strong>è¦†ç›– Prism é»˜è®¤çš„è§„åˆ™</strong>ï¼š</p><p>åœ¨ <code>App.xaml.cs</code> ä¸­é‡å†™ <code>ConfigureViewModelLocator</code>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfigureViewModelLocator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    base</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ConfigureViewModelLocator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    ViewModelLocationProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetDefaultViewTypeToViewModelTypeResolver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">viewType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è‡ªå®šä¹‰è§„åˆ™ï¼šæ ¹æ® viewType è®¡ç®— viewModel ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> viewName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> viewType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">FullName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Replace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.Views.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.CustomVMs.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> viewModelName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> $&quot;{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">viewName</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}VM, {</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">viewType</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetTypeInfo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">().</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Assembly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">FullName</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">viewModelName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è‡ªå®šä¹‰viewmodelåˆ›å»ºæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰viewmodelåˆ›å»ºæ–¹æ³•"><span>è‡ªå®šä¹‰ViewModelåˆ›å»ºæ–¹æ³•</span></a></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å®šä½åˆ° ViewModel ç±»å‹åï¼ŒPrism ä¼šä½¿ç”¨ <strong>DI å®¹å™¨</strong> å»è§£æè¯¥ ViewModel çš„å®ä¾‹ã€‚å¦‚æœä½ æƒ³è‡ªå®šä¹‰å®ä¾‹åŒ–é€»è¾‘ï¼Œä¾‹å¦‚ä½¿ç”¨å¦ä¸€ä¸ªå®¹å™¨æˆ–åˆå§‹åŒ–å‚æ•°ï¼Œå¯ä»¥ä¿®æ”¹é»˜è®¤å·¥å‚ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModelLocationProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetDefaultViewModelFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">viewModelType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> MyCustomContainer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">viewModelType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…åŸºäº View çš„ç±»å‹åšæ›´å¤æ‚å¤„ç†ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModelLocationProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetDefaultViewModelFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">viewModelType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> is </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SomeSpecialView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> MyCustomResolver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ResolveSpecial</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">viewModelType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">viewModelType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ¨¡å—åŒ–" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—åŒ–"><span>æ¨¡å—åŒ–</span></a></h2><p>æ¨¡å—åŒ–æ˜¯ä¸€ç§å°†å¤§å‹åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹åŠŸèƒ½å•å…ƒï¼ˆæ¨¡å—ï¼‰çš„è®¾è®¡æ€è·¯ã€‚æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥å•ç‹¬å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ï¼ŒåŒæ—¶è¢«åŠ¨æ€é›†æˆåˆ°ä¸»åº”ç”¨ä¸­ã€‚Prism çš„æ¨¡å—åŒ–æ”¯æŒè¿™ç§æ¶æ„ï¼Œå¹¶æä¾›æ¨¡å—çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€åŠ¨æ€åŠ è½½ã€ä¾èµ–æ’åºç­‰èƒ½åŠ›ã€‚</p><p>ä¸€ä¸ª <strong>æ¨¡å—ï¼ˆModuleï¼‰</strong> æ˜¯èƒ½å¤Ÿå°è£…æŸä¸€åŠŸèƒ½åŒºåŸŸæˆ–æœåŠ¡é€»è¾‘çš„æœ€å°å•å…ƒï¼Œå®ƒé€šå¸¸åŒ…å«ï¼š</p><ul><li>ç›¸å…³çš„è§†å›¾ï¼ˆViewsï¼‰ã€è§†å›¾æ¨¡å‹ï¼ˆViewModelsï¼‰ï¼›</li><li>å¿…è¦çš„æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘ï¼›</li><li>åˆå§‹åŒ–ä¸æ³¨å†Œé€»è¾‘ã€‚</li></ul><p>æ¨¡å—åŒ–æ¶æ„ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ul><li><strong>ç‹¬ç«‹å¼€å‘ä¸æµ‹è¯•</strong>ï¼šå›¢é˜Ÿå¯å°†ä¸åŒåŠŸèƒ½åˆ’åˆ†ç»™ä¸åŒå¼€å‘è€…ï¼›</li><li><strong>ç®€åŒ–ç»´æŠ¤</strong>ï¼šæ¨¡å—è¾¹ç•Œæ¸…æ™°ï¼Œä¾¿äºå®šä½é—®é¢˜ï¼›</li><li><strong>å¯æ‰©å±•/å¯æ’æ‹”</strong>ï¼šæ”¯æŒæŒ‰éœ€åŠ è½½ã€åå°åŠ è½½å’Œæ’ä»¶å¼éƒ¨ç½²ã€‚</li></ul><h3 id="æ¨¡å—å®ç°-imodule" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—å®ç°-imodule"><span>æ¨¡å—å®ç°ï¼š<code>IModule</code></span></a></h3><p>åœ¨ Prism ä¸­ï¼Œæ¯ä¸ªæ¨¡å—éƒ½ç”±ä¸€ä¸ªå®ç°äº† <code>IModule</code> æ¥å£çš„ç±»è¡¨ç¤ºã€‚è¯¥æ¥å£å®šä¹‰äº†ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IModule</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RegisterTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnInitialized</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong><code>RegisterTypes</code></strong>ï¼šåœ¨æ¨¡å—åŠ è½½å‰è°ƒç”¨ï¼Œç”¨äºåœ¨ DI å®¹å™¨ä¸­æ³¨å†Œæ¨¡å—å†…éƒ¨æœåŠ¡ã€ç±»å‹æˆ–åŠŸèƒ½æ¥å£ã€‚</li><li><strong><code>OnInitialized</code></strong>ï¼šåœ¨æ‰€æœ‰ç±»å‹æ³¨å†Œå®Œæ¯•ä¹‹åè°ƒç”¨ï¼Œå¯åœ¨æ­¤åšè§†å›¾æ³¨å†Œã€å¯¼èˆªæ³¨å†Œæˆ–å…¶å®ƒåˆå§‹åŒ–é€»è¾‘ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IModule</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RegisterTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ISomeService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SomeService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnInitialized</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterViewWithRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¨¡å—åŠ è½½ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—åŠ è½½ç”Ÿå‘½å‘¨æœŸ"><span>æ¨¡å—åŠ è½½ç”Ÿå‘½å‘¨æœŸ</span></a></h3><p>Prism æ¨¡å—åŠ è½½åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p><ol><li><strong>å‘ç°æ¨¡å—ï¼ˆDiscoveryï¼‰</strong> åˆ†ææ¨¡å—ç›®å½•æˆ– Catalog å®šä¹‰æ–‡ä»¶ä»¥æŸ¥æ‰¾å¯ç”¨æ¨¡å—ä¿¡æ¯ã€‚</li><li><strong>åŠ è½½æ¨¡å—ç¨‹åºé›†ï¼ˆLoadingï¼‰</strong> å°†åŒ…å«æ¨¡å—çš„ç¨‹åºé›†åŠ è½½åˆ°åº”ç”¨ç¨‹åºè¿›ç¨‹ä¸­ã€‚</li><li><strong>åˆ›å»ºæ¨¡å—å®ä¾‹ï¼ˆInstantiationï¼‰</strong> é€šè¿‡ Prism DI å®¹å™¨åˆ›å»ºæ¨¡å—ç±»å®ä¾‹ã€‚</li><li><strong>æ‰§è¡Œæ¨¡å—é€»è¾‘ï¼ˆInitializationï¼‰</strong> ä¾æ¬¡æ‰§è¡Œ <code>RegisterTypes</code> å’Œ <code>OnInitialized</code> æ–¹æ³•ã€‚</li></ol><h3 id="æ¨¡å—ç›®å½•" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—ç›®å½•"><span>æ¨¡å—ç›®å½•</span></a></h3><p><strong>æ¨¡å—ç›®å½•ï¼ˆModule Catalogï¼‰</strong> ç”¨äºæè¿°å“ªäº›æ¨¡å—å¯ç”¨ã€åŠ è½½é¡ºåºã€ä¾èµ–å…³ç³»ç­‰ä¿¡æ¯ã€‚å®ƒåŒ…å«å¤šä¸ª <strong>ModuleInfo</strong> é¡¹ï¼Œæ¯ä¸ªé¡¹æè¿°ä¸€ä¸ªæ¨¡å—ã€‚</p><h4 id="ä»£ç æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#ä»£ç æ³¨å†Œ"><span>ä»£ç æ³¨å†Œ</span></a></h4><p>åœ¨ <code>PrismApplication</code> ä¸­é‡å†™ <code>ConfigureModuleCatalog</code>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfigureModuleCatalog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    ModuleCatalog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ModuleInfo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        ModuleName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;OrdersModule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        ModuleType</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">OrdersModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">AssemblyQualifiedName</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ï¼ˆå¯æŒ‡å®šåˆå§‹åŒ–æ¨¡å¼ã€ä¾èµ–ç­‰ï¼‰</p></blockquote><h4 id="xamlæ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#xamlæ³¨å†Œ"><span>XAMLæ³¨å†Œ</span></a></h4><p>åœ¨ XAML æ–‡ä»¶ä¸­å£°æ˜æ¨¡å—ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Modularity:ModuleCatalog</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> xmlns:Modularity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;clr-namespace:Prism.Modularity;assembly=Prism.Core&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Modularity:ModuleInfo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ModuleName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;CustomerModule&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                             ModuleType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MyApp.Modules.Customer.CustomerModule, MyApp.Modules.Customer&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Modularity:ModuleCatalog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ï¼ˆé€šè¿‡ <code>CreateFromXaml()</code> æ–¹æ³•åŠ è½½ï¼‰</p></blockquote><h4 id="é…ç½®æ–‡ä»¶æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶æ³¨å†Œ"><span>é…ç½®æ–‡ä»¶æ³¨å†Œ</span></a></h4><p>åœ¨ <code>App.config / Web.config</code> ä¸­å®šä¹‰æ¨¡å—åˆ—è¡¨å’Œä¾èµ–å…³ç³»ï¼Œç„¶ååœ¨ <code>CreateModuleCatalog</code> ä¸­è¿”å› <code>ConfigurationModuleCatalog</code>ã€‚</p><h4 id="ç›®å½•æ‰«ææ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#ç›®å½•æ‰«ææ³¨å†Œ"><span>ç›®å½•æ‰«ææ³¨å†Œ</span></a></h4><p>é€šè¿‡ <code>DirectoryModuleCatalog</code> æŒ‡å®šæŸä¸ªç›®å½•è·¯å¾„ï¼ŒPrism ä¼šæ‰«æè¯¥ç›®å½•ä¸‹æ‰€æœ‰ç¨‹åºé›†å¹¶è‡ªåŠ¨å¯»æ‰¾æ¨¡å—å®ç°ç±»ã€‚</p><h3 id="æ¨¡å—åŠ è½½æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—åŠ è½½æ§åˆ¶"><span>æ¨¡å—åŠ è½½æ§åˆ¶</span></a></h3><p>æ¨¡å—çš„åŠ è½½æ—¶æœºå¯ä»¥é€šè¿‡åˆå§‹åŒ–æ¨¡å¼æ§åˆ¶ï¼š</p><ul><li><p>WhenAvailableï¼ˆé»˜è®¤ï¼‰ï¼šåº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½</p></li><li><p>OnDemandï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ï¼šç›´åˆ°ç¨‹åºæ˜ç¡®è°ƒç”¨æ‰åŠ è½½</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ModuleCatalog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ModuleInfo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    ModuleName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;SalesModule&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    ModuleType</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SalesModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">AssemblyQualifiedName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    InitializationMode</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> InitializationMode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OnDemand</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ï¼ˆä¸»ç¨‹åºå¯åœ¨éœ€è¦æ—¶è°ƒç”¨ <code>IModuleManager.LoadModule(&quot;SalesModule&quot;)</code>ï¼‰</p></blockquote></li></ul><h3 id="æ¨¡å—é—´ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—é—´ä¾èµ–"><span>æ¨¡å—é—´ä¾èµ–</span></a></h3><p>Prism å…è®¸å£°æ˜æ¨¡å—ä¾èµ–å…³ç³»ï¼Œä»¥ä¿è¯åŠ è½½é¡ºåºå’Œåˆå§‹åŒ–é¡ºåºã€‚ä½ å¯ä»¥ä½¿ç”¨å±æ€§ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Module</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;">ModuleName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ModuleA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ModuleDependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ModuleD&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ModuleA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { â€¦ }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆè¡¨ç¤º ModuleA ä¾èµ–äº ModuleDï¼Œ Prism ä¼šåœ¨ ModuleD åˆå§‹åŒ–åå†åˆå§‹åŒ– ModuleAï¼‰</p><p>è¿™ç§ä¾èµ–æœºåˆ¶ç¡®ä¿äº†ä¸åŒæ¨¡å—æŒ‰ç…§æ­£ç¡®é€»è¾‘é¡ºåºè½½å…¥ã€‚</p><h3 id="åŠ¨æ€æŒ‰éœ€åŠ è½½æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€æŒ‰éœ€åŠ è½½æ¨¡å—"><span>åŠ¨æ€æŒ‰éœ€åŠ è½½æ¨¡å—</span></a></h3><ul><li><p><strong>æ˜¾å¼è¯·æ±‚åŠ è½½</strong></p><p>ä½¿ç”¨ <code>IModuleManager</code> è¿›è¡ŒæŒ‰éœ€åŠ è½½ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">moduleManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LoadModule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ModuleName&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ï¼ˆå½“å‡ºç°ç‰¹å®šä¸šåŠ¡éœ€æ±‚æ—¶å†åŠ è½½æ¨¡å—ï¼‰</p></li><li><p><strong>åŠ è½½å®Œæˆäº‹ä»¶ç›‘å¬</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">moduleManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">LoadModuleCompleted</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> +=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¤„ç†åŠ è½½ç»“æœæˆ–é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆå¯è·å–é”™è¯¯çŠ¶æ€ã€æ—¥å¿—ç­‰ä¿¡æ¯ï¼‰</p></li></ul><h2 id="å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆª"><span>å¯¼èˆª</span></a></h2><h3 id="å¯¼èˆªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå‚æ•°"><span>å¯¼èˆªå‚æ•°</span></a></h3><p>Prism çš„å¯¼èˆªæœåŠ¡æ”¯æŒé€šè¿‡ <strong>å‚æ•°å¯¹è±¡</strong> åœ¨é¡µé¢ä¹‹é—´ä¼ é€’æ•°æ®ã€‚æ— è®ºæ˜¯åŸºäº Region å¯¼èˆªè¿˜æ˜¯åŸºäº <code>INavigationService</code> çš„é¡µé¢å¯¼èˆªï¼Œéƒ½å¯ä»¥ä½¿ç”¨å¯¼èˆªå‚æ•°æœºåˆ¶ç»Ÿä¸€å¤„ç†ã€‚</p><p>å¯¼èˆªå‚æ•°ç”± <strong><code>INavigationParameters</code> / <code>NavigationParameters</code></strong> è¡¨ç¤ºï¼Œå®ƒæ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œç±»ä¼¼äºå­—å…¸ï¼Œä½†æ›´é€‚ç”¨äºå¯¼èˆªåœºæ™¯ã€‚</p><h4 id="åˆ›å»ºå¯¼èˆªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¯¼èˆªå‚æ•°"><span>åˆ›å»ºå¯¼èˆªå‚æ•°</span></a></h4><h5 id="ä½¿ç”¨navigationparameterså¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨navigationparameterså¯¹è±¡"><span>ä½¿ç”¨NavigationParameterså¯¹è±¡</span></a></h5><p>è¿™æ˜¯æœ€å¸¸è§ä¸”æ˜ç¡®çš„æ–¹å¼ã€‚ä½ åˆ›å»ºä¸€ä¸ª <code>NavigationParameters</code> å®ä¾‹ï¼Œç„¶åé€šè¿‡ <code>Add</code> æ·»åŠ é”®å€¼å¯¹ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">123</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;User&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Gemini&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å‘èµ·å¯¼èˆª</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ContentRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UserDetailsView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²"><span>ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²</span></a></h5><p>å¯ä»¥åœ¨ URI å­—ç¬¦ä¸²ä¸­åµŒå…¥å‚æ•°ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç›´æ¥æ‹¼æ¥åœ¨è·¯å¾„åé¢</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ContentRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UserDetailsView?ID=123&amp;Mode=Edit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Prism ä¼šè§£æè¿™äº›å‚æ•°å¹¶æ„å»ºå†…éƒ¨çš„ <code>NavigationParameters</code>ã€‚</p><h5 id="æ··åˆä½¿ç”¨å‚æ•°å¯¹è±¡å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#æ··åˆä½¿ç”¨å‚æ•°å¯¹è±¡å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²"><span>æ··åˆä½¿ç”¨å‚æ•°å¯¹è±¡å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²</span></a></h5><p>æ—¢å¯ä»¥åœ¨ URI ä¸­å®šä¹‰ä¸€äº›å‚æ•°ï¼Œåˆé€šè¿‡ <code>NavigationParameters</code> å¯¹è±¡ä¼ å…¥å…¶ä»–å‚æ•°ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;extra&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">extraData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NavigateAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;DetailPage?id=42&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Prism ä¼šå°†ä¸¤è€…åˆå¹¶ä¼ é€’ã€‚</p><h4 id="è®¿é—®å¯¼èˆªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#è®¿é—®å¯¼èˆªå‚æ•°"><span>è®¿é—®å¯¼èˆªå‚æ•°</span></a></h4><h5 id="getvalue-t" tabindex="-1"><a class="header-anchor" href="#getvalue-t"><span><code>GetValue&lt;T&gt;</code></span></a></h5><p>è‹¥è¦ä»å¯¼èˆªå‚æ•°ä¸­è®¿é—®å•ä¸ªå€¼ï¼Œåº”ä½¿ç”¨å¦‚ä¸‹ <code>GetValue</code> æ–¹æ³•ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Title&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="trygetvalue-t" tabindex="-1"><a class="header-anchor" href="#trygetvalue-t"><span><code>TryGetValue&lt;T&gt;</code></span></a></h5><p>è‹¥è¦ä»…åœ¨é”®å­˜åœ¨æ—¶è®¿é—®å€¼ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ <code>TryGetValue</code> æ–¹æ³•ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TryGetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Title&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">out</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    Title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="getvalues-t" tabindex="-1"><a class="header-anchor" href="#getvalues-t"><span><code>GetValues&lt;T&gt;</code></span></a></h5><p>è‹¥è¦è®¿é—®å¤šä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ <code>GetValues</code> æ–¹æ³•ã€‚å¦‚æœæœªæä¾›ä»»ä½•å€¼ï¼Œè¿™å°†è¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> colors</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Color</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SelectedColors&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="åœ¨ç›®æ ‡viewmodelä¸­æ¥æ”¶å‚æ•°" tabindex="-1"><a class="header-anchor" href="#åœ¨ç›®æ ‡viewmodelä¸­æ¥æ”¶å‚æ•°"><span>åœ¨ç›®æ ‡ViewModelä¸­æ¥æ”¶å‚æ•°</span></a></h4><p>è¦è·å–å¯¼èˆªå‚æ•°ï¼Œä½ çš„ ViewModel å¯ä»¥å®ç°æ¥å£ï¼š</p><ul><li><code>INavigationAware</code> å®šä¹‰æ–¹æ³• <code>OnNavigatedTo(INavigationParameters parameters)</code>ï¼Œå½“å¯¼èˆªè¿›å…¥æ­¤ ViewModel æ—¶è°ƒç”¨ã€‚</li><li><code>IInitialize</code> / <code>IInitializeAsync</code> Prism è¿˜æ”¯æŒåœ¨å¯¼èˆªä¹‹å‰è¿›è¡Œåˆå§‹åŒ–å¤„ç†å¹¶ä¼ é€’å‚æ•°ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 1. ä» Parameters å­—å…¸ä¸­è·å– (æ”¯æŒå¼ºç±»å‹è·å–)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ContainsKey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 2. è·å–å¤æ‚å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;User&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ”¯æŒçš„å‚æ•°ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ”¯æŒçš„å‚æ•°ç±»å‹"><span>æ”¯æŒçš„å‚æ•°ç±»å‹</span></a></h4><p>Prism çš„å¯¼èˆªå‚æ•°å€¼ä¸å±€é™äºåŸºæœ¬ç±»å‹ã€‚ä½ å¯ä»¥ä¼ é€’ï¼š</p><ul><li>å­—ç¬¦ä¸²ã€æ•°å€¼ç­‰åŸºç¡€ç±»å‹ï¼›</li><li>è‡ªå®šä¹‰å¯¹è±¡ï¼ˆå¦‚ä¸šåŠ¡æ¨¡å‹ï¼‰ï¼›</li><li>æ•°ç»„æˆ–é›†åˆç±»å‹ã€‚</li></ul><p>å› ä¸º <code>NavigationParameters</code> å®ç°äº†ç±»ä¼¼ <code>IEnumerable&lt;KeyValuePair&lt;string, object&gt;&gt;</code> çš„ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å†…éƒ¨å°†å¤šä¸ªå€¼ç»‘å®šåˆ°åŒä¸€é”®åã€‚</p><h4 id="åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è¯»å–å‚æ•°" tabindex="-1"><a class="header-anchor" href="#åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è¯»å–å‚æ•°"><span>åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è¯»å–å‚æ•°</span></a></h4><h5 id="åœ¨onnavigatetoä¸­è¯»å–" tabindex="-1"><a class="header-anchor" href="#åœ¨onnavigatetoä¸­è¯»å–"><span>åœ¨<code>OnNavigateTo</code>ä¸­è¯»å–</span></a></h5><p>è¿™æ˜¯æœ€ä¸»è¦çš„è¯»å–ä½ç½®ï¼Œå½“å¯¼èˆªå®Œæˆåä¼šè§¦å‘:</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="åœ¨iinitialize-iinitializeasyncä¸­è¯»å–" tabindex="-1"><a class="header-anchor" href="#åœ¨iinitialize-iinitializeasyncä¸­è¯»å–"><span>åœ¨<code>IInitialize</code>/<code>IInitializeAsync</code>ä¸­è¯»å–</span></a></h5><p>å¦‚æœä½ çš„ ViewModel è¦åœ¨å¯¼èˆªå®Œæˆå‰åˆå§‹åŒ–æ•°æ®ï¼Œç‰¹åˆ«æ˜¯éœ€è¦å¼‚æ­¥å·¥ä½œï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Initialize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { â€¦ }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æˆ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> InitializeAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { â€¦ }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸¤ç§æ–¹å¼é€‚åˆäºå¯¹è¯»åˆ°çš„å‚æ•°æ‰§è¡Œé€»è¾‘åˆå§‹åŒ–ï¼ˆå¦‚å¼‚æ­¥åŠ è½½ API æ•°æ®ï¼‰<strong>å¹¶å½±å“å¯¼èˆªç»“æœ</strong>ã€‚</p><h4 id="è·å–åŸå§‹navigationcontext" tabindex="-1"><a class="header-anchor" href="#è·å–åŸå§‹navigationcontext"><span>è·å–åŸå§‹NavigationContext</span></a></h4><p>åœ¨åŸºäº Region çš„å¯¼èˆªä¸­ï¼Œä½ å¯ä»¥è®¿é—® <code>NavigationContext</code>ï¼ˆå¦‚ <code>OnNavigatedFrom</code>, <code>IsNavigationTarget</code> ç­‰å›è°ƒå‚æ•°ä¸­ï¼‰ï¼Œä»å…¶ <code>NavigationParameters</code> å±æ€§è¯»å–æ•°æ®</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼æ›´åº•å±‚ï¼Œé€‚åˆéœ€è¦åŒæ—¶è®¿é—® URI å’Œå‚æ•°çš„åœºæ™¯</p><h3 id="åŒºåŸŸå¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#åŒºåŸŸå¯¼èˆª"><span>åŒºåŸŸå¯¼èˆª</span></a></h3><p>åœ¨ Prism ä¸­ï¼Œâ€œåŒºåŸŸï¼ˆRegionï¼‰â€æ˜¯ä¸€ä¸ª <strong>é€»è¾‘å ä½ç¬¦</strong>ï¼Œä½ å¯ä»¥åœ¨ UI å¸ƒå±€ä¸­å®šä¹‰å®ƒï¼Œç„¶åå°†å¤šä¸ªè§†å›¾åŠ¨æ€åœ°æ³¨å…¥åˆ°è¿™äº›åŒºåŸŸä¸­ï¼Œä»è€Œå®ç°åº”ç”¨çš„è§†å›¾åˆ‡æ¢ä¸å¯¼èˆªã€‚åŒºåŸŸå¯¼èˆªæŠ½è±¡äº† UI çš„ç»„ç»‡æ–¹å¼ï¼Œä½¿å¾—ï¼š</p><ul><li>è§†å›¾å†…å®¹å¯ä»¥æ ¹æ®ç”¨æˆ·æ“ä½œæˆ–ä¸šåŠ¡çŠ¶æ€åŠ¨æ€å˜åŒ–ï¼›</li><li>å„æ¨¡å—å¯ä»¥ <strong>æ¾è€¦åˆåœ°</strong> å°†è‡ªå·±çš„è§†å›¾æ’å…¥åˆ°ä¸»ç•Œé¢ä¸åŒä½ç½®ï¼›</li><li>UI ç»“æ„ä¸å¯¼èˆªé€»è¾‘è§£è€¦ï¼Œç¬¦åˆ MVVM å’Œæ¨¡å—åŒ–æ¶æ„ã€‚</li></ul><h4 id="åŒºåŸŸ" tabindex="-1"><a class="header-anchor" href="#åŒºåŸŸ"><span>åŒºåŸŸ</span></a></h4><h5 id="å£°æ˜åŒºåŸŸ" tabindex="-1"><a class="header-anchor" href="#å£°æ˜åŒºåŸŸ"><span>å£°æ˜åŒºåŸŸ</span></a></h5><p>è¦å£°æ˜ä¸€ä¸ªåŒºåŸŸï¼Œä½ åªéœ€åœ¨ XAML æ§ä»¶ä¸Šè®¾ç½®ä¸€ä¸ªé™„åŠ å±æ€§ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ContentControl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> prism:RegionManager.RegionName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™è¡¨ç¤ºè¯¥ <code>ContentControl</code> æˆä¸ºä¸€ä¸ªåä¸º <code>&quot;MainRegion&quot;</code> çš„ Prism åŒºåŸŸã€‚ä¹‹åä½ å°±å¯ä»¥é€šè¿‡ Prism ç®¡ç†å™¨å‘è¿™ä¸ªåŒºåŸŸå¯¼èˆªæˆ–æ³¨å…¥è§†å›¾</p><blockquote><p>åœ¨ Prism 9.0 ä»¥åï¼Œç›¸å…³ Region API ç§»åŠ¨åˆ°äº† Prism.Navigation.Regions å‘½åç©ºé—´ï¼ˆä¾‹å¦‚ <code>using Prism.Navigation.Regions;</code>ï¼‰ã€‚è¿™ä¸åŒäºæ—§ç‰ˆ Prism çš„ <code>Prism.Regions</code>ã€‚</p></blockquote><h5 id="åŒºåŸŸä¸regionmanager" tabindex="-1"><a class="header-anchor" href="#åŒºåŸŸä¸regionmanager"><span>åŒºåŸŸä¸RegionManager</span></a></h5><p>Prism æä¾›äº†ä¸€ä¸ªä¸­å¤®æœåŠ¡ <strong><code>IRegionManager</code></strong> è´Ÿè´£ç®¡ç†æ‰€æœ‰å®šä¹‰çš„åŒºåŸŸï¼š</p><ul><li>æ³¨å†ŒåŒºåŸŸï¼›</li><li>æ³¨å†Œè§†å›¾ä¸åŒºåŸŸçš„å…³ç³»ï¼›</li><li>æ‰§è¡ŒåŒºåŸŸå¯¼èˆªã€‚</li></ul><p>ä½ å¯ä»¥é€šè¿‡ DI æ³¨å…¥ RegionManager å®ä¾‹åˆ° ViewModelã€æœåŠ¡æˆ–æ¨¡å—åˆå§‹åŒ–ç±»ã€‚</p><h5 id="å‘åŒºåŸŸæ˜¾ç¤ºviews" tabindex="-1"><a class="header-anchor" href="#å‘åŒºåŸŸæ˜¾ç¤ºviews"><span>å‘åŒºåŸŸæ˜¾ç¤ºViews</span></a></h5><h6 id="viewæ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#viewæ³¨å…¥"><span>Viewæ³¨å…¥</span></a></h6><p>å‘åŒºåŸŸæ‰‹åŠ¨æ³¨å…¥ä¸€ä¸ª View å®ä¾‹ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> region</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Regions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> view</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SomeView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æ–¹å¼ç§°ä¸º <strong>è§†å›¾æ³¨å…¥ï¼ˆView Injectionï¼‰</strong>ï¼Œå…è®¸ä½ æ‰‹åŠ¨å®Œå…¨æ§åˆ¶å®ä¾‹åˆ›å»ºä¸æ·»åŠ é€»è¾‘ã€‚</p><h6 id="è§†å›¾å‘ç°" tabindex="-1"><a class="header-anchor" href="#è§†å›¾å‘ç°"><span>è§†å›¾å‘ç°</span></a></h6><p>ç”¨ RegionManager æ³¨å†Œ View ä¸åŒºåŸŸåç§°ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterViewWithRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SomeView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å½“åŒºåŸŸé¦–æ¬¡æ˜¾ç¤ºæ—¶ Prism ä¼šè‡ªè¡Œåˆ›å»ºè¯¥ View å¹¶åŠ å…¥åŒºåŸŸã€‚è¿™ç§°ä¸º <strong>è§†å›¾å‘ç°ï¼ˆView Discoveryï¼‰</strong>ï¼Œé€‚ç”¨äºé™æ€å†…å®¹ã€‚</p><h5 id="åŒºåŸŸå¯¼èˆª-1" tabindex="-1"><a class="header-anchor" href="#åŒºåŸŸå¯¼èˆª-1"><span>åŒºåŸŸå¯¼èˆª</span></a></h5><p>åœ¨ Prism ä¸­å¯¼èˆªæ˜¯æŒ‡é€šè¿‡ <strong>URI</strong> æ§åˆ¶åŒºåŸŸå†…è§†å›¾çš„åˆ‡æ¢ã€‚Prism çš„åŒºåŸŸå¯¼èˆªæ”¯æŒï¼š</p><ul><li><strong>è§†å›¾åˆ‡æ¢</strong>ï¼šå°†æŒ‡å®šçš„ View å¯¼èˆªåˆ°åŒºåŸŸï¼›</li><li><strong>ä¼ªå¼‚æ­¥</strong>ï¼šå¯¼èˆªè¿‡ç¨‹å¯èƒ½å…è®¸ç¡®è®¤æˆ–å–æ¶ˆç­‰é€»è¾‘ã€‚</li></ul><h6 id="æ‰§è¡Œå¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œå¯¼èˆª"><span>æ‰§è¡Œå¯¼èˆª</span></a></h6><p>å¯ä»¥è°ƒç”¨ RegionManager çš„ RequestNavigate æ–¹æ³•ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;InboxView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ–è€…ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Uri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;InboxView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UriKind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Relative</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Prism ä¼šï¼š</p><ol><li>åœ¨å®¹å™¨ä¸­è§£ææŒ‡å®š Viewï¼›</li><li>åˆ›å»º View å’Œå…¶ ViewModelï¼›</li><li>æ³¨å…¥åˆ°åŒºåŸŸå¯¹åº”ä½ç½®ï¼›</li><li>æ¿€æ´»è¯¥ Viewã€‚</li></ol><h6 id="å¯¼èˆªå›è°ƒ" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå›è°ƒ"><span>å¯¼èˆªå›è°ƒ</span></a></h6><p>RequestNavigate å…è®¸ä½ é™„åŠ å›è°ƒå‡½æ•°ä»¥å¤„ç†å¯¼èˆªç»“æŸï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;InboxView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* æˆåŠŸ */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ <code>NavigationResult</code> ä½ å¯ä»¥åˆ¤æ–­æˆåŠŸ/å¤±è´¥å¹¶è¯»å–é”™è¯¯ç­‰ä¿¡æ¯ã€‚</p><h5 id="region-navigationçš„ç”Ÿå‘½å‘¨æœŸå‚ä¸" tabindex="-1"><a class="header-anchor" href="#region-navigationçš„ç”Ÿå‘½å‘¨æœŸå‚ä¸"><span>Region Navigationçš„ç”Ÿå‘½å‘¨æœŸå‚ä¸</span></a></h5><p>ä¸ºäº†è®© View/ViewModel èƒ½å‚ä¸æˆ–å“åº”å¯¼èˆªï¼ŒPrism å®šä¹‰äº†è‹¥å¹²æ¥å£ï¼š</p><h6 id="inavigationaware" tabindex="-1"><a class="header-anchor" href="#inavigationaware"><span><code>INavigationAware</code></span></a></h6><ul><li><code>IsNavigationTarget</code>: è¡¨ç¤ºå½“å‰ View æ˜¯å¦å¯ä»¥å¤ç”¨ï¼›</li><li><code>OnNavigatedFrom</code>: å¯¼èˆªç¦»å¼€æ—¶è°ƒç”¨ï¼›</li><li><code>OnNavigatedTo</code>: å¯¼èˆªåˆ°è¯¥ View æ—¶è°ƒç”¨ã€‚</li></ul><h6 id="viewmodelä¸viewçš„å‚ä¸" tabindex="-1"><a class="header-anchor" href="#viewmodelä¸viewçš„å‚ä¸"><span>ViewModelä¸Viewçš„å‚ä¸</span></a></h6><p>Prism ä¼šå…ˆæ£€æŸ¥ View æ˜¯å¦å®ç°è¯¥æ¥å£ï¼›å¦‚æœæ²¡æœ‰ï¼Œå†æ£€æŸ¥ View çš„ DataContextã€‚è¿™æ ·ä½ çš„ ViewModel ä¹Ÿèƒ½å‚ä¸å¯¼èˆªäº‹ä»¶ã€‚</p><h5 id="å¤šè§†å›¾ã€æ´»åŠ¨çŠ¶æ€ä¸ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#å¤šè§†å›¾ã€æ´»åŠ¨çŠ¶æ€ä¸ç”Ÿå‘½å‘¨æœŸ"><span>å¤šè§†å›¾ã€æ´»åŠ¨çŠ¶æ€ä¸ç”Ÿå‘½å‘¨æœŸ</span></a></h5><p>åŒºåŸŸå¯ä»¥å®¹çº³å¤šä¸ª View å®ä¾‹ï¼ˆä¾‹å¦‚ TabControlï¼‰ï¼š</p><ul><li><strong>Active Views</strong>ï¼šè¡¨ç¤ºå½“å‰æ˜¾ç¤ºçš„è§†å›¾ï¼›</li><li><strong>é Active Views</strong>ï¼šå½“å‰æœªæ˜¾ç¤ºä½†ä»å­˜åœ¨äºåŒºåŸŸä¸­ã€‚</li></ul><p>å¦‚æœä½ å¸Œæœ›åœ¨å¯¼èˆªåè®©æ—§è§†å›¾è¢«ç§»é™¤è€Œéåªæ˜¯ deactivateï¼Œå¯ä»¥é€šè¿‡ <code>IRegionMemberLifetime</code> æ¥å£æ§åˆ¶ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è¿™è®© Prism åœ¨å¯¼èˆªåæ¸…ç†è¯¥ Viewã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> KeepAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¯¼èˆªå†å²" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå†å²"><span>å¯¼èˆªå†å²</span></a></h5><p>åŒºåŸŸå¯¼èˆªæœ‰ç±»ä¼¼æµè§ˆå™¨çš„å†å²è®°å½•ï¼š</p><ul><li><code>GoBack</code>ã€<code>GoForward</code> ç­‰æ–¹æ³•ï¼›</li><li><code>CanGoBack</code>ã€<code>CanGoForward</code> å±æ€§ï¼›</li><li>å½“å‰è®°å½•ä¹Ÿå¯è®¿é—®ç”¨äºè‡ªå®šä¹‰æ“ä½œã€‚</li></ul><h4 id="åŸºæœ¬åŒºåŸŸå¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬åŒºåŸŸå¯¼èˆª"><span>åŸºæœ¬åŒºåŸŸå¯¼èˆª</span></a></h4><h5 id="å‘èµ·åŒºåŸŸå¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#å‘èµ·åŒºåŸŸå¯¼èˆª"><span>å‘èµ·åŒºåŸŸå¯¼èˆª</span></a></h5><p>å¯¼èˆªæ˜¯åœ¨ <strong>IRegion æˆ– IRegionManager</strong> ä¹‹ä¸Šè¿›è¡Œè°ƒç”¨çš„ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦å…¥å£ï¼š</p><h6 id="regionå®ä¾‹ä¸Šçš„å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#regionå®ä¾‹ä¸Šçš„å¯¼èˆª"><span>Regionå®ä¾‹ä¸Šçš„å¯¼èˆª</span></a></h6><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mainRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> â€¦;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">mainRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Uri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;InboxView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">UriKind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Relative</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æˆ–è€…æ›´ç®€æ´çš„å†™æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">mainRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;InboxView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œ <code>&quot;InboxView&quot;</code> å°±æ˜¯è¦åŠ è½½çš„è§†å›¾åç§°ï¼ˆå®ƒåº”è¯¥å·²æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼‰ã€‚</p><h6 id="regionmapperä¸Šçš„å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#regionmapperä¸Šçš„å¯¼èˆª"><span>RegionMapperä¸Šçš„å¯¼èˆª</span></a></h6><p>æ›´å¸¸ç”¨çš„æ˜¯é€šè¿‡ RegionManagerï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 1. æ³¨å…¥ IRegionManager</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MainWindowViewModel</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> readonly</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IRegionManager</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        _regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Navigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 2. è°ƒç”¨å¯¼èˆªï¼šå‚æ•°1æ˜¯ Region åï¼Œå‚æ•°2æ˜¯ View çš„æ³¨å†Œå</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        _regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ContentRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ViewA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¯¼èˆªuriå®šä¹‰è§†å›¾" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªuriå®šä¹‰è§†å›¾"><span>å¯¼èˆªURIå®šä¹‰è§†å›¾</span></a></h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒURI æŒ‡å‘çš„æ˜¯è¦åˆ›å»ºè§†å›¾çš„æ³¨å†Œåç§°ã€‚ä¹Ÿå°±æ˜¯è¯´ Prism ä¼šåœ¨å®¹å™¨ä¸­æŸ¥æ‰¾è¿™ä¸€åç§°å¯¹åº”çš„è§†å›¾ç±»å‹å¹¶åˆ›å»ºå®ƒã€‚å…¶å¯¹åº”çš„ ViewModel è‹¥ä½¿ç”¨ ViewModelLocator æœºåˆ¶ä¼šè‡ªåŠ¨æ³¨å…¥ã€‚</p><p>Prism åŒæ—¶æ”¯æŒ <strong>è§†å›¾ä¼˜å…ˆï¼ˆView-Firstï¼‰</strong> å’Œ <strong>è§†å›¾æ¨¡å‹ä¼˜å…ˆï¼ˆViewModel-Firstï¼‰</strong> å¯¼èˆªï¼š</p><ul><li><em>View-First</em>ï¼šURI æŒ‡å‘è§†å›¾åç§°ï¼Œå®¹å™¨å…ˆåˆ›å»ºè§†å›¾å’Œç›¸å…³ ViewModelï¼›</li><li><em>ViewModel-First</em>ï¼šURI æŒ‡å‘ ViewModel åç§°ï¼Œå¦‚æœä½ å°† View ä¸ ViewModel çš„æ˜ å°„æ³¨å†Œåˆ°å®¹å™¨ï¼Œåˆ™ Prism ä¼šå…ˆåˆ›å»º ViewModelï¼Œå¹¶é€šè¿‡æ•°æ®æ¨¡æ¿ç»‘å®š Viewã€‚</li></ul><h5 id="å¯¼èˆªå®Œæˆå›è°ƒ" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå®Œæˆå›è°ƒ"><span>å¯¼èˆªå®Œæˆå›è°ƒ</span></a></h5><p>ä½ å¯ä»¥åœ¨è°ƒç”¨ RequestNavigate æ—¶æŒ‡å®šä¸€ä¸ª <strong>å›è°ƒå§”æ‰˜</strong>ï¼Œç”¨äºæ¥æ”¶å¯¼èˆªå®Œæˆçš„ç»“æœï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;InboxView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">NavigationCompleted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> NavigationCompleted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationResult</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¯¼èˆªæˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¯¼èˆªå¤±è´¥ï¼Œå¯ä» result.Error è·å–å¼‚å¸¸ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>NavigationResult</code> æä¾›ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š</p><ul><li><strong>Result</strong>ï¼šæ˜¯å¦æˆåŠŸï¼›</li><li><strong>Error</strong>ï¼šå¤±è´¥æ—¶çš„å¼‚å¸¸ä¿¡æ¯ï¼›</li><li><strong>Context</strong>ï¼šåŒ…å«å¯¼èˆª URI å’Œå‚æ•°ï¼›</li><li><strong>NavigationService</strong>ï¼šæ‰§è¡Œå¯¼èˆªçš„æœåŠ¡å®ä¾‹ã€‚</li></ul><h5 id="å¯¼èˆªå·¥ä½œæµ" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå·¥ä½œæµ"><span>å¯¼èˆªå·¥ä½œæµ</span></a></h5><p>å½“ä½ è°ƒç”¨ <code>RequestNavigate</code> æ—¶ï¼ŒPrism åå°ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><strong>æŸ¥æ‰¾åŒºåŸŸ</strong>ï¼šåœ¨ <code>RegionManager</code> ä¸­å¯»æ‰¾åä¸º &quot;ContentRegion&quot; çš„åŒºåŸŸã€‚</li><li><strong>è§£æè§†å›¾</strong>ï¼šä»å®¹å™¨ä¸­è·å– &quot;ViewA&quot; çš„å®ä¾‹ã€‚</li><li><strong>è§£æ ViewModel</strong>ï¼šå¦‚æœå¼€å¯äº† <code>ViewModelLocator</code>ï¼Œè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ ViewModel å¹¶ç»‘å®šåˆ° View çš„ <code>DataContext</code>ã€‚</li><li><strong>æ·»åŠ åˆ°åŒºåŸŸ</strong>ï¼šå°† View æ·»åŠ åˆ° Region çš„è§†å›¾é›†åˆä¸­ã€‚</li><li><strong>æ¿€æ´»è§†å›¾</strong>ï¼šè°ƒç”¨ Region çš„ <code>Activate</code> æ–¹æ³•å°† View æ˜¾ç¤ºå‡ºæ¥ï¼ˆæ­¤æ—¶æ—§è§†å›¾ä¼šè¢« <code>Deactivate</code>ï¼‰ã€‚</li></ol><h5 id="å¯¼èˆªæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªæ—¥å¿—"><span>å¯¼èˆªæ—¥å¿—</span></a></h5><p>è¿™æ˜¯ Prism 9.0 éå¸¸å¼ºå¤§çš„åŠŸèƒ½ã€‚æ¯ä¸ª Region éƒ½æ‹¥æœ‰ä¸€ä¸ª <strong>Journal (æ—¥å¿—)</strong>ï¼Œç±»ä¼¼äºæµè§ˆå™¨çš„å‰è¿›/åé€€å†å²è®°å½•ã€‚</p><p><strong>å¦‚ä½•è·å–</strong>ï¼šé€šè¿‡ <code>NavigationContext</code> è·å– <code>IRegionNavigationJournal</code>ã€‚</p><p><strong>å¸¸ç”¨æ“ä½œ</strong>ï¼š</p><ul><li><code>journal.GoBack()</code>: è¿”å›ä¸Šä¸€ä¸ªé¡µé¢ã€‚</li><li><code>journal.GoForward()</code>: å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ã€‚</li><li><code>journal.CanGoBack</code>: åˆ¤æ–­æ˜¯å¦å¯ä»¥å›é€€ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åœ¨ ViewModel ä¸­å®ç° INavigationAware åï¼Œå¯ä»¥æ‹¿åˆ°ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    _journal</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NavigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanGoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="è§†å›¾çš„é‡ç”¨" tabindex="-1"><a class="header-anchor" href="#è§†å›¾çš„é‡ç”¨"><span>è§†å›¾çš„é‡ç”¨</span></a></h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¤šæ¬¡è¯·æ±‚å¯¼èˆªåˆ° &quot;ViewA&quot; æ—¶ï¼ŒPrism ä¼šæ£€æŸ¥å½“å‰çš„ View æ˜¯å¦å¯ä»¥é‡ç”¨ã€‚</p><ul><li>è¿™æ˜¯é€šè¿‡å®ç° <code>INavigationAware.IsNavigationTarget</code> æ¥æ§åˆ¶çš„ã€‚</li><li>å¦‚æœè¿”å› <code>true</code>ï¼šPrism ä¼šé‡ç”¨å·²å­˜åœ¨çš„ View å®ä¾‹ï¼Œåªè°ƒç”¨å®ƒçš„ <code>OnNavigatedTo</code>ã€‚</li><li>å¦‚æœè¿”å› <code>false</code>ï¼šPrism ä¼šé”€æ¯æ—§çš„ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ View å®ä¾‹ã€‚</li></ul><h5 id="åŒºåŸŸå¯¼èˆªä¸è§†å›¾å‘ç°-è§†å›¾æ³¨å…¥çš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#åŒºåŸŸå¯¼èˆªä¸è§†å›¾å‘ç°-è§†å›¾æ³¨å…¥çš„å…³ç³»"><span>åŒºåŸŸå¯¼èˆªä¸è§†å›¾å‘ç°/è§†å›¾æ³¨å…¥çš„å…³ç³»</span></a></h5><p>åœ¨æ—§ Prism æ¨¡å¼ä¸­ï¼š</p><ul><li><strong>è§†å›¾æ³¨å…¥ï¼ˆView Injectionï¼‰</strong>ï¼šä½ é€šè¿‡ RegionManager ç›´æ¥æ³¨å…¥è§†å›¾å®ä¾‹ï¼›</li><li><strong>è§†å›¾å‘ç°ï¼ˆView Discoveryï¼‰</strong>ï¼šè‡ªåŠ¨åœ¨é¦–æ¬¡æ˜¾ç¤ºåŒºåŸŸæ—¶å‘åŒºåŸŸæ³¨å…¥æ³¨å†Œè§†å›¾ã€‚</li></ul><p>Prism ç°åœ¨æŠŠè¿™äº›éƒ½å½’çº³ä¸ºåŒºåŸŸå¯¼èˆªçš„åŸºç¡€æ¦‚å¿µï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•äº†æ›´é€šç”¨ã€URI é©±åŠ¨çš„å¯¼èˆª APIï¼Œä½¿å¯¼èˆªæ›´ç»Ÿä¸€ã€å¯æ‰©å±•ã€‚</p><h5 id="ä¼ªå¼‚æ­¥-å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#ä¼ªå¼‚æ­¥-å¯¼èˆª"><span>â€œä¼ªå¼‚æ­¥â€å¯¼èˆª</span></a></h5><p>Prism çš„ <code>INavigateAsync</code> æ¥å£åŒ…å« <code>RequestNavigate</code> æ–¹æ³•ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> INavigateAsync</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(...);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒå¯èƒ½è¡¨ç°å¾—åƒ<strong>å¼‚æ­¥å¯¼èˆª</strong>ï¼ˆè°ƒç”¨åå¯¼èˆªå¯èƒ½ä»åœ¨å¤„ç†ï¼Œå› ä¸ºå¯èƒ½è§¦å‘ç”¨æˆ·ç¡®è®¤ç­‰é€»è¾‘ï¼‰ï¼Œä½†å®ƒä¸è¡¨ç¤ºçœŸæ­£çš„åå°çº¿ç¨‹å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæ˜¯æ”¯æŒå¼‚æ­¥äº¤äº’é€»è¾‘ï¼Œä¾‹å¦‚å…è®¸å¯¼èˆªç¡®è®¤ã€‚</p><p>è¿™ä½¿å¾—ä½ å¯ä»¥ä½¿ç”¨å›è°ƒç»§ç»­å¯¼èˆªæµç¨‹ï¼Œè€Œæ— éœ€è‡ªå·±å®ç°å¼‚æ­¥æœºåˆ¶ã€‚</p><h4 id="è§†å›¾ä¸è§†å›¾æ¨¡å‹å‚ä¸å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#è§†å›¾ä¸è§†å›¾æ¨¡å‹å‚ä¸å¯¼èˆª"><span>è§†å›¾ä¸è§†å›¾æ¨¡å‹å‚ä¸å¯¼èˆª</span></a></h4><h5 id="inavigationaware-å‚ä¸å¯¼èˆªç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#inavigationaware-å‚ä¸å¯¼èˆªç”Ÿå‘½å‘¨æœŸ"><span><code>INavigationAware</code>ï¼šå‚ä¸å¯¼èˆªç”Ÿå‘½å‘¨æœŸ</span></a></h5><p>æœ€æ ¸å¿ƒçš„æ¥å£æ˜¯ <strong><code>INavigationAware</code></strong>ã€‚ä»»æ„è§†å›¾æˆ–å…¶ ViewModel å®ç°æ­¤æ¥å£ï¼Œå°±èƒ½åœ¨å¯¼èˆªæ—¶å‚ä¸ä¸‹é¢çš„è¿‡ç¨‹ï¼ˆPrism ä¼šè‡ªåŠ¨æ£€æµ‹ï¼‰ï¼š</p><ul><li>è§†å›¾è‡ªèº«æ˜¯å¦å®ç°äº† <code>INavigationAware</code>ï¼›</li><li>å¦åˆ™æ£€æŸ¥è§†å›¾çš„ DataContextï¼ˆé€šå¸¸æ˜¯ ViewModelï¼‰æ˜¯å¦å®ç°ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> INavigationAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="isnavigationtarget-ç¡®å®šç›®æ ‡é‡ç”¨" tabindex="-1"><a class="header-anchor" href="#isnavigationtarget-ç¡®å®šç›®æ ‡é‡ç”¨"><span><code>IsNavigationTarget</code>(ç¡®å®šç›®æ ‡é‡ç”¨)</span></a></h6><p>å½“å¯¼èˆªè¯·æ±‚å‘ç”Ÿæ—¶ï¼ŒPrism ä¼šè¯¢é—®å½“å‰ Region ä¸­å·²æœ‰çš„è§†å›¾ï¼šâ€œä½ èƒ½å¤„ç†è¿™ä¸ªè¯·æ±‚å—ï¼Ÿâ€</p><ul><li><strong>è¿”å› <code>true</code></strong>ï¼šé‡ç”¨å½“å‰å®ä¾‹ï¼ˆåªè§¦å‘ <code>OnNavigatedTo</code>ï¼‰ã€‚</li><li><strong>è¿”å› <code>false</code></strong>ï¼šPrism ä¼šåˆ›å»ºä¸€ä¸ªè¯¥è§†å›¾çš„æ–°å®ä¾‹ã€‚</li><li><strong>å…¸å‹ç”¨é€”</strong>ï¼šå¦‚æœä½ æ­£åœ¨æŸ¥çœ‹ç”¨æˆ· ID ä¸º 1 çš„é¡µé¢ï¼Œæ–°çš„å¯¼èˆªè¯·æ±‚ä¹Ÿæ˜¯ ID ä¸º 1ï¼Œåˆ™é‡ç”¨ï¼›å¦‚æœæ–°è¯·æ±‚æ˜¯ ID ä¸º 2ï¼Œåˆ™å¯èƒ½éœ€è¦è¿”å› <code>false</code> æ¥åˆ›å»ºæ–°é¡µé¢ï¼ˆå–å†³äºä½ çš„ä¸šåŠ¡é€»è¾‘ï¼‰ã€‚</li></ul><h6 id="onnavigatedto-å¯¼èˆªåˆ°è¾¾" tabindex="-1"><a class="header-anchor" href="#onnavigatedto-å¯¼èˆªåˆ°è¾¾"><span><code>OnNavigatedTo</code>ï¼ˆå¯¼èˆªåˆ°è¾¾ï¼‰</span></a></h6><p>åœ¨å¯¼èˆªç¦»å¼€å½“å‰è§†å›¾ä¹‹å‰è°ƒç”¨ã€‚å¯ä»¥ç”¨äºï¼š</p><ul><li>ä¿å­˜ UI æˆ–ä¸šåŠ¡çŠ¶æ€ï¼›</li><li>å–æ¶ˆæœªå®Œæˆæ“ä½œï¼›</li><li>åœ¨å¯¼èˆªå‰æ‰§è¡Œæ¸…ç†ã€‚</li></ul><p>ä¾‹å¦‚ä¿å­˜ç”¨æˆ·è¾“å…¥æœªæäº¤çš„æ•°æ®ã€‚</p><h6 id="onnavigatedfrom-å¯¼èˆªç¦»å¼€" tabindex="-1"><a class="header-anchor" href="#onnavigatedfrom-å¯¼èˆªç¦»å¼€"><span><code>OnNavigatedFrom</code>ï¼ˆå¯¼èˆªç¦»å¼€ï¼‰</span></a></h6><p>å½“å¯¼èˆªå®Œæˆå¹¶ä¸”å½“å‰è§†å›¾å˜ä¸ºæ´»åŠ¨è§†å›¾åè°ƒç”¨ã€‚ç”¨äºï¼š</p><ul><li>æ¥æ”¶å¯¼èˆªå‚æ•°ï¼›</li><li>åˆå§‹åŒ–è§†å›¾æˆ–åŠ è½½æ•°æ®ï¼›</li><li>æ ¹æ®å¯¼èˆªä¸Šä¸‹æ–‡è°ƒæ•´çŠ¶æ€ã€‚</li></ul><h5 id="å‚ä¸è€…ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#å‚ä¸è€…ä¼˜å…ˆçº§"><span>å‚ä¸è€…ä¼˜å…ˆçº§</span></a></h5><p>å½“å¯¼èˆªå‘ç”Ÿæ—¶ï¼ŒPrism ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾å¹¶è°ƒç”¨æ¥å£æ–¹æ³•ï¼š</p><ol><li><strong>è§†å›¾ (View)</strong>ï¼šé¦–å…ˆæ£€æŸ¥ View æ˜¯å¦å®ç°äº† <code>INavigationAware</code>ã€‚</li><li><strong>è§†å›¾æ¨¡å‹ (ViewModel)</strong>ï¼šæ¥ç€æ£€æŸ¥ View çš„ <code>DataContext</code>ï¼ˆå³ ViewModelï¼‰æ˜¯å¦å®ç°äº†è¯¥æ¥å£ã€‚</li></ol><p>å¦‚æœä¸¤è€…éƒ½å®ç°äº†ï¼Œ<strong>ä¸¤è€…çš„æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨</strong>ã€‚è¿™å…è®¸ä½ åœ¨ View ä¸­å¤„ç† UI ç›¸å…³çš„é€»è¾‘ï¼ˆå¦‚èšç„¦ï¼‰ï¼ŒåŒæ—¶åœ¨ ViewModel ä¸­å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p><h5 id="iconfirmnavigationrequestæ¥å£" tabindex="-1"><a class="header-anchor" href="#iconfirmnavigationrequestæ¥å£"><span><code>IConfirmNavigationRequest</code>æ¥å£</span></a></h5><p>æœ‰æ—¶å€™ï¼Œä½ ä¸å¸Œæœ›ç”¨æˆ·ç›´æ¥ç¦»å¼€ï¼ˆä¾‹å¦‚ï¼šè¡¨å•è¿˜æ²¡å¡«å®Œï¼‰ã€‚è¿™æ—¶éœ€è¦å®ç° <code>IConfirmNavigationRequest</code>ï¼Œå®ƒç»§æ‰¿è‡ª <code>INavigationAware</code>ã€‚</p><ul><li><strong>æ–°å¢æ–¹æ³•</strong>ï¼š<code>ConfirmNavigationRequest(navigationContext, continuationCallback)</code>ã€‚</li><li><strong>å·¥ä½œåŸç†</strong>ï¼š <ol><li>Prism ä¼šæš‚åœå¯¼èˆªã€‚</li><li>ä½ å¯ä»¥å¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†è¯¢é—®ç”¨æˆ·ï¼šâ€œç¡®å®šç¦»å¼€å—ï¼Ÿâ€</li><li>æ ¹æ®ç”¨æˆ·çš„é€‰æ‹©ï¼Œè°ƒç”¨ <code>continuationCallback(true)</code> å…è®¸å¯¼èˆªï¼Œæˆ–è°ƒç”¨ <code>continuationCallback(false)</code> <strong>æ‹¦æˆªå¹¶å–æ¶ˆ</strong>å¯¼èˆªã€‚</li></ol></li></ul><h5 id="æ–¹æ³•æ‰§è¡Œé¡ºåº" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•æ‰§è¡Œé¡ºåº"><span>æ–¹æ³•æ‰§è¡Œé¡ºåº</span></a></h5><p>å½“ä» <code>ViewA</code> å¯¼èˆªåˆ° <code>ViewB</code> æ—¶ï¼Œæ‰§è¡Œé“¾å¦‚ä¸‹ï¼š</p><ol><li><strong>ViewA / VMA</strong>: è°ƒç”¨ <code>ConfirmNavigationRequest</code> (å¦‚æœå®ç°äº†)ã€‚</li><li><strong>ViewA / VMA</strong>: è°ƒç”¨ <code>OnNavigatedFrom</code>ã€‚</li><li><strong>ViewB / VMB</strong>: è°ƒç”¨ <code>IsNavigationTarget</code> (ç¡®å®šæ˜¯å¦é‡ç”¨æ—§çš„ ViewB)ã€‚</li><li><strong>ViewB / VMB</strong>: è°ƒç”¨ <code>OnNavigatedTo</code>ã€‚</li></ol><h5 id="æ§åˆ¶è§†å›¾ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶è§†å›¾ç”Ÿå‘½å‘¨æœŸ"><span>æ§åˆ¶è§†å›¾ç”Ÿå‘½å‘¨æœŸ</span></a></h5><p>æ¥å£ <strong><code>IRegionMemberLifetime</code></strong>ï¼Œç”¨äºæ§åˆ¶å¯¼èˆªåè§†å›¾æ˜¯å¦ä¿ç•™åœ¨åŒºåŸŸå†…ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EmployeeDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegionMemberLifetime</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> KeepAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ <code>KeepAlive == false</code> æ—¶ï¼Œè§†å›¾å°†ä»åŒºåŸŸä¸­å®Œå…¨ç§»é™¤ï¼Œè€Œä¸æ˜¯ç®€å• deactivateï¼Œè¿™æœ‰åŠ©äºé‡Šæ”¾èµ„æºã€‚</p><h4 id="å¯¼èˆªåˆ°å·²æœ‰è§†å›¾" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªåˆ°å·²æœ‰è§†å›¾"><span>å¯¼èˆªåˆ°å·²æœ‰è§†å›¾</span></a></h4><p>åœ¨å¾ˆå¤š UI åœºæ™¯ä¸‹ï¼Œå½“ä½ å¯¼èˆªåˆ°æŸä¸ªè§†å›¾æ—¶ï¼Œ<strong>å¹¶ä¸æ€»æ˜¯å¸Œæœ›åˆ›å»ºè¯¥è§†å›¾çš„æ–°å®ä¾‹</strong>ã€‚ä¾‹å¦‚ï¼š</p><ol><li>ç›¸åŒç±»å‹è§†å›¾ä½†å†…å®¹ä¸åŒ ç”¨æˆ·å½“å‰æ­£åœ¨ç¼–è¾‘å®¢æˆ· ID 123 çš„è¯¦æƒ…é¡µï¼Œå¦‚æœä»–è¦ç¼–è¾‘å®¢æˆ· ID 456ï¼Œä½ å¯ä»¥é‡ç”¨åŒä¸€ä¸ªè§†å›¾å®ä¾‹ï¼Œæ›´æ–°æ•°æ®å¹¶å±•ç¤ºã€‚</li><li>å¤šä¸ªå®ä¾‹å­˜åœ¨äº UI ä¸­ åº”ç”¨å…è®¸åŒæ—¶æ‰“å¼€å¤šä¸ªç¼–è¾‘çª—å£ï¼Tabï¼Œä¾‹å¦‚åŒæ—¶æ˜¾ç¤ºå®¢æˆ· 123 å’Œå®¢æˆ· 456 çš„è¯¦æƒ…é¡µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹é’ˆå¯¹ä¸åŒæ•°æ®åº”æ˜¾ç¤ºå·²æœ‰å®ä¾‹ã€‚</li></ol><p>Prism çš„å¯¼èˆªæœºåˆ¶æ”¯æŒè¿™ç±»æƒ…æ™¯ï¼Œè®©ä½ èƒ½å¤Ÿ <strong>åˆ¤æ–­æ˜¯å¦å¤ç”¨å·²æœ‰è§†å›¾æˆ–åˆ›å»ºæ–°å®ä¾‹</strong>ï¼Œä»è€Œæé«˜æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶é¿å…é‡å¤åˆ›å»ºç›¸åŒè§†å›¾ã€‚</p><h5 id="isnavigationtargetæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#isnavigationtargetæ–¹æ³•"><span><code>IsNavigationTarget</code>æ–¹æ³•</span></a></h5><p>Prism ä½¿ç”¨ <strong><code>INavigationAware</code> æ¥å£ä¸­çš„ <code>IsNavigationTarget</code> æ–¹æ³•</strong> æ¥å†³å®š â€œå¯¼èˆªç›®æ ‡æ˜¯å¦å¯ä»¥å¤ç”¨ç°æœ‰è§†å›¾â€ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> INavigationAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å½“å‘èµ·å¯¼èˆªæ—¶ï¼ŒPrism ä¼šæ£€æŸ¥åŒºåŸŸä¸­å·²æœ‰ä¸ç›®æ ‡è§†å›¾ç±»å‹åŒ¹é…çš„æ‰€æœ‰å®ä¾‹ã€‚</li><li>å¯¹æ¯ä¸ªåŒ¹é…çš„å®ä¾‹è°ƒç”¨ <code>IsNavigationTarget</code>ã€‚</li><li>å¦‚æœæŸä¸ªè§†å›¾è¿”å› <code>true</code>ï¼ŒPrism å°† <strong>å¤ç”¨è¯¥å®ä¾‹</strong>ï¼Œå¹¶ä¸ä¼šåˆ›å»ºæ–°è§†å›¾ã€‚</li><li>å¦‚æœæ‰€æœ‰å®ä¾‹éƒ½è¿”å› <code>false</code>ï¼ˆæˆ–è€…æ²¡æœ‰å·²æœ‰å®ä¾‹ï¼‰ï¼ŒPrism ä¼šåˆ›å»ºæ–°çš„è§†å›¾å®ä¾‹ã€‚</li></ul><h5 id="é»˜è®¤åŒ¹é…è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤åŒ¹é…è¡Œä¸º"><span>é»˜è®¤åŒ¹é…è¡Œä¸º</span></a></h5><p>Prism é»˜è®¤è®¤ä¸º <strong>å¯¼èˆª URI ä¸­çš„èµ„æºåç§°å³æ˜¯è§†å›¾çš„ç±»å‹å</strong>ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;EmployeeDetailsView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Prism ä¼šå‡è®¾è¿™ä»£è¡¨äº†ç±»å‹åä¸º <code>EmployeeDetailsView</code> çš„è§†å›¾ç±»åˆ«ï¼Œå¹¶ç”¨è¿™ä¸ªåç§°å»æŸ¥æ‰¾ç°æœ‰è§†å›¾å®ä¾‹ã€‚ è§†å›¾ç±»åä¸å¯¼èˆª URI åå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™ Prism æ— æ³•æ­£ç¡®è°ƒç”¨ <code>IsNavigationTarget</code></p><h5 id="åœ¨isnavigationtargetä¸­åˆ¤æ–­å¤ç”¨é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#åœ¨isnavigationtargetä¸­åˆ¤æ–­å¤ç”¨é€»è¾‘"><span>åœ¨<code>IsNavigationTarget</code>ä¸­åˆ¤æ–­å¤ç”¨é€»è¾‘</span></a></h5><p>å¯ä»¥åŸºäºå¯¼èˆªå‚æ•°åˆ¤æ–­å®ä¾‹æ˜¯å¦é€‚åˆä½œä¸ºå¯¼èˆªç›®æ ‡ã€‚ä¾‹å¦‚æœ‰ä¸€ä¸ªå®¢æˆ·è¯¦æƒ…é¡µï¼Œå½“è§†å›¾å½“å‰æ˜¾ç¤ºçš„æ˜¯åŒä¸€ä¸ªå®¢æˆ·æ—¶å¯ä»¥å¤ç”¨ï¼Œå¦åˆ™æ–°å»ºè§†å›¾ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EmployeeDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        string</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> _currentCustomer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Equals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { â€¦ }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { â€¦ }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>å¦‚æœå½“å‰å®ä¾‹çš„å®¢æˆ· ID ä¸å¯¼èˆªå‚æ•°ä¸­çš„ ID ç›¸åŒï¼Œè¿”å› <code>true</code> â†’ Prism ä¼šå¤ç”¨è¯¥è§†å›¾ã€‚</li><li>å¦åˆ™ Prism ä¼šåˆ›å»ºæ–°çš„è§†å›¾å®ä¾‹ã€‚</li></ul><h5 id="è‹¥æ€»æ˜¯å¤ç”¨è§†å›¾" tabindex="-1"><a class="header-anchor" href="#è‹¥æ€»æ˜¯å¤ç”¨è§†å›¾"><span>è‹¥æ€»æ˜¯å¤ç”¨è§†å›¾</span></a></h5><p>å¦‚æœä½ å¸Œæœ›åœ¨è¯¥åŒºåŸŸä¸­å§‹ç»ˆåªä¿ç•™ä¸€ä¸ªè§†å›¾ï¼ˆå³ä¸ç®¡å‚æ•°ä¸åŒéƒ½å¤ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼‰ï¼Œå¯ä»¥è®© <code>IsNavigationTarget</code> <strong>æ— æ¡ä»¶è¿”å› true</strong>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™ç§å†™æ³•ä¼šç¡®ä¿æ¯æ¬¡å¯¼èˆªéƒ½å®šä½åˆ°å­˜åœ¨çš„è§†å›¾ï¼Œè€Œä¸æ˜¯å®ä¾‹åŒ–æ›´å¤šè§†å›¾ã€‚</p><h4 id="ä¼ é€’å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ä¼ é€’å‚æ•°"><span>ä¼ é€’å‚æ•°</span></a></h4><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯¼èˆªåˆ°æ–°è§†å›¾æ—¶å¾€å¾€ä¸ä»…éœ€è¦æŒ‡å®šç›®æ ‡åç§°ï¼Œè¿˜éœ€è¦ä¼ é€’æ•°æ®ç»™ç›®æ ‡è§†å›¾/è§†å›¾æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œä»åˆ—è¡¨é¡µé¢ä¼ é€’å½“å‰é€‰ä¸­é¡¹çš„ ID ç»™è¯¦æƒ…é¡µæˆ–ä¼ é€’å¤æ‚å¯¹è±¡ç­‰ã€‚</p><p><code>NavigationParameters</code> æ˜¯ Prism æä¾›çš„ä¸€ä¸ªå‚æ•°å®¹å™¨ï¼Œå®ƒæœ¬è´¨ç±»ä¼¼äºä¸€ç»„ <strong>é”®å€¼å¯¹ï¼ˆkey-value pairsï¼‰</strong>ï¼Œç”¨äºåœ¨å¯¼èˆªè¿‡ç¨‹ä¸­æºå¸¦æ•°æ®ã€‚Prism ä¼šè‡ªåŠ¨å°†å®ƒä¸å¯¼èˆªä¸Šä¸‹æ–‡ <code>NavigationContext</code> å…³è”ï¼Œä½¿ç›®æ ‡è§†å›¾/è§†å›¾æ¨¡å‹å¯ä»¥åœ¨å¯¼èˆªå®Œæˆåè¯»å–è¿™äº›å‚æ•°ã€‚</p><h5 id="åˆ›å»ºå¹¶ä¼ é€’å‚æ•°" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¹¶ä¼ é€’å‚æ•°"><span>åˆ›å»ºå¹¶ä¼ é€’å‚æ•°</span></a></h5><h6 id="ä½¿ç”¨navigationparameterså®ä¾‹ä¼ å‚" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨navigationparameterså®ä¾‹ä¼ å‚"><span>ä½¿ç”¨NavigationParameterså®ä¾‹ä¼ å‚</span></a></h6><p>è¿™æ˜¯æœ€å¸¸è§çš„åšæ³•ï¼šå…ˆæ„é€ ä¸€ä¸ª <code>NavigationParameters</code> å¯¹è±¡ï¼Œç„¶åé€šè¿‡ <code>RequestNavigate</code> çš„é‡è½½å°†å®ƒä½œä¸ºå‚æ•°ä¼ å…¥ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">employee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;myObjectParam&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">someObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;EmployeeDetailsView&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>ID</code> æ˜¯ä¸€ä¸ªåŸºç¡€ç±»å‹å‚æ•°ï¼›</li><li><code>myObjectParam</code> æ˜¯ä»»æ„å¯¹è±¡å‚æ•°ï¼›</li></ul><p>Prism ä¼šåœ¨å¯¼èˆªè¿‡ç¨‹å°†å…¶æºå¸¦ç»™ç›®æ ‡è§†å›¾/è§†å›¾æ¨¡å‹ã€‚</p><h6 id="æ‹¼æ¥åˆ°uriå­—ç¬¦ä¸²ä¸­ä¼ å‚" tabindex="-1"><a class="header-anchor" href="#æ‹¼æ¥åˆ°uriå­—ç¬¦ä¸²ä¸­ä¼ å‚"><span>æ‹¼æ¥åˆ°URIå­—ç¬¦ä¸²ä¸­ä¼ å‚</span></a></h6><p>Prism å…è®¸ä½ æŠŠå‚æ•°ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²å½¢å¼æ‹¼æ¥åˆ°å¯¼èˆª URI ä¸­ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> uri</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;EmployeeDetailsView?id=42&amp;name=John&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">uri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Prism ä¼šè‡ªåŠ¨è§£æ URL æŸ¥è¯¢éƒ¨åˆ†ä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¹Ÿæ”¯æŒæŠŠ <code>NavigationParameters.ToString()</code> è¿½åŠ åˆ° URIï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> p</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">42</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RequestNavigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;EmployeeDetailsView{</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToString</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">()}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼é€‚ç”¨äºç®€å•å­—ç¬¦ä¸²/æ•°å€¼å‚æ•°åœºæ™¯ã€‚</p><h5 id="åœ¨ç›®æ ‡viewmodelä¸­æ¥æ”¶å‚æ•°-1" tabindex="-1"><a class="header-anchor" href="#åœ¨ç›®æ ‡viewmodelä¸­æ¥æ”¶å‚æ•°-1"><span>åœ¨ç›®æ ‡ViewModelä¸­æ¥æ”¶å‚æ•°</span></a></h5><p>Prism åœ¨å¯¼èˆªå®Œæˆåä¼šè§¦å‘ç›¸å…³è§†å›¾æˆ–è§†å›¾æ¨¡å‹çš„å¯¼èˆªå›è°ƒï¼Œä¾‹å¦‚ <code>OnNavigatedTo</code>ã€<code>OnNavigatedFrom</code>ï¼Œå¹¶å°†å‚æ•°é€šè¿‡ <code>NavigationContext.Parameters</code> ä¼ é€’ã€‚</p><h6 id="å¼ºç±»å‹è·å–çš„ä¾¿æ·æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¼ºç±»å‹è·å–çš„ä¾¿æ·æ–¹æ³•"><span>å¼ºç±»å‹è·å–çš„ä¾¿æ·æ–¹æ³•</span></a></h6><p>Prism ä¸º <code>NavigationParameters</code> æä¾›äº†ä¸€ç³»åˆ—å¥½ç”¨çš„æ‰©å±•æ–¹æ³•ï¼š</p><table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong><code>GetValue&lt;T&gt;(key)</code></strong></td><td>ç›´æ¥è·å–æŒ‡å®šç±»å‹çš„å‚æ•°ï¼Œå¦‚æœç±»å‹ä¸åŒ¹é…æˆ–ä¸å­˜åœ¨å¯èƒ½æŠ›å¼‚å¸¸ã€‚</td></tr><tr><td><strong><code>TryGetValue&lt;T&gt;(key, out value)</code></strong></td><td>å®‰å…¨è·å–ï¼Œè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦æˆåŠŸã€‚</td></tr><tr><td><strong><code>GetValues&lt;T&gt;(key)</code></strong></td><td>å¦‚æœå‚æ•°ä¸­æœ‰å¤šä¸ªåŒåçš„é”®ï¼Œè·å–å®ƒä»¬çš„é›†åˆï¼ˆIEnumerableï¼‰ã€‚</td></tr></tbody></table><h6 id="åœ¨onnavigatedtoä¸­è¯»å–" tabindex="-1"><a class="header-anchor" href="#åœ¨onnavigatedtoä¸­è¯»å–"><span>åœ¨<code>OnNavigatedTo</code>ä¸­è¯»å–</span></a></h6><p>å½“ç›®æ ‡è§†å›¾/è§†å›¾æ¨¡å‹å®ç°äº† <code>INavigationAware</code> æ¥å£ï¼Œä½ å¯ä»¥åœ¨ <code>OnNavigatedTo</code> é‡Œé€šè¿‡å‚æ•°è®¿é—®ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> objParam</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;myObjectParam&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ä½¿ç”¨ç±»å‹å®‰å…¨çš„<code>GetValue&lt;T&gt;</code>æ–¹æ³•ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> myObj</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;myObjectParam&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¤šå€¼ä¸åˆå¹¶å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å¤šå€¼ä¸åˆå¹¶å‚æ•°"><span>å¤šå€¼ä¸åˆå¹¶å‚æ•°</span></a></h5><p><code>NavigationParameters</code> åŒæ—¶æ”¯æŒåŒä¸€ä¸ªé”®å¯¹åº”å¤šä¸ªå€¼çš„åœºæ™¯ï¼ˆç±»ä¼¼å­—å…¸çš„å¤šå€¼é›†åˆï¼‰ï¼Œä»¥åŠåŒæ—¶ä½¿ç”¨ URI æŸ¥è¯¢å‚æ•°å’Œ <code>NavigationParameters</code> å®ä¾‹çš„åˆå¹¶æœºåˆ¶ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// URI æŸ¥è¯¢å’Œ NavigationParameters æ··åˆä¼ å‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> extraParams</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NavigateAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ViewA?id=3&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">extraParams</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å…¨å±€å‚æ•°ä¸å±€éƒ¨å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å…¨å±€å‚æ•°ä¸å±€éƒ¨å‚æ•°"><span>å…¨å±€å‚æ•°ä¸å±€éƒ¨å‚æ•°</span></a></h5><p>åœ¨ Prism 9.0 ä¸­ï¼Œä½ éœ€è¦æ³¨æ„ <code>NavigationParameters</code> çš„ä½œç”¨åŸŸï¼š</p><ul><li><strong>å±€éƒ¨å‚æ•°</strong>ï¼šä»…é’ˆå¯¹å½“å‰çš„ <code>RequestNavigate</code> æœ‰æ•ˆã€‚</li><li><strong>æŒä¹…åŒ–</strong>ï¼šå¦‚æœå¯ç”¨äº†å¯¼èˆªæ—¥å¿—ï¼ˆJournalï¼‰ï¼Œå½“ä½ é€šè¿‡â€œåé€€â€å›åˆ°è¯¥é¡µé¢æ—¶ï¼Œä¹‹å‰çš„å‚æ•°é»˜è®¤ä¼šè¢«ä¿ç•™å¹¶é‡æ–°ä¼ é€’ç»™ <code>OnNavigatedTo</code>ã€‚</li></ul><h4 id="ç¡®è®¤å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#ç¡®è®¤å¯¼èˆª"><span>ç¡®è®¤å¯¼èˆª</span></a></h4><p>åœ¨è®¸å¤šåº”ç”¨ç¨‹åºåœºæ™¯ä¸­ï¼Œå½“ç”¨æˆ·å°è¯•ä»å½“å‰è§†å›¾å¯¼èˆªåˆ°å¦ä¸€ä¸ªè§†å›¾æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›<strong>åœ¨å¯¼èˆªçœŸæ­£å‘ç”Ÿä¹‹å‰</strong>è®©ç”¨æˆ·ç¡®è®¤æ˜¯å¦ç»§ç»­ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ç”¨æˆ·æ­£åœ¨ç¼–è¾‘æœªä¿å­˜çš„æ•°æ®ï¼›</li><li>å½“å‰è§†å›¾æœ‰æœªå®Œæˆæµç¨‹ï¼›</li><li>å¯¼èˆªå¯èƒ½å¯¼è‡´ä¸¢å¤±æ›´æ”¹æˆ–çŠ¶æ€ç­‰ã€‚</li></ul><p>Prism çš„å¯¼èˆªç¡®è®¤æœºåˆ¶åŸºäºä»¥ä¸‹æµç¨‹ï¼š</p><ol><li>è°ƒç”¨ <code>RequestNavigate</code> å‘èµ·å¯¼èˆªè¯·æ±‚ï¼›</li><li>Prism åœ¨æ‰§è¡Œå¯¼èˆªä¹‹å‰æ£€æŸ¥å½“å‰è§†å›¾ï¼ˆViewï¼‰æˆ–å…¶ ViewModel æ˜¯å¦å®ç°äº†ç¡®è®¤æ¥å£ï¼›</li><li>å¦‚æœå®ç°äº†ç¡®è®¤æ¥å£ï¼ŒPrism ä¼šè°ƒç”¨ç›¸åº”æ–¹æ³•ï¼Œ<strong>è¯·æ±‚è°ƒç”¨æ–¹ç¡®è®¤æ˜¯å¦ç»§ç»­å¯¼èˆª</strong>ï¼›</li><li>åœ¨ç¡®è®¤å®Œæˆåï¼š <ul><li>å¦‚æœç”¨æˆ·åŒæ„ï¼Œåˆ™ç»§ç»­å¯¼èˆªï¼›</li><li>å¦‚æœç”¨æˆ·å–æ¶ˆï¼Œåˆ™ç»ˆæ­¢å¯¼èˆªã€‚</li></ul></li></ol><p>è¿™ä¸ªæµç¨‹å…è®¸ä½ åœ¨å¯¼èˆªå‘ç”Ÿå‰è¿›è¡Œç”¨æˆ·äº¤äº’ï¼Œå¦‚å¼¹å‡ºå¯¹è¯æ¡†æç¤ºç”¨æˆ·æ˜¯å¦ä¿å­˜ã€æ›´æ”¹æˆ–æ”¾å¼ƒå½“å‰å†…å®¹ã€‚</p><h5 id="iconfirmnavigationrequestæ¥å£-1" tabindex="-1"><a class="header-anchor" href="#iconfirmnavigationrequestæ¥å£-1"><span><code>IConfirmNavigationRequest</code>æ¥å£</span></a></h5><p>è¦å¯ç”¨å¯¼èˆªç¡®è®¤ï¼Œä½ å¯ä»¥è®©å½“å‰è§†å›¾çš„ View æˆ– ViewModel å®ç° <strong><code>IConfirmNavigationRequest</code></strong> æ¥å£ã€‚è¯¥æ¥å£ç»§æ‰¿è‡ª <code>INavigationAware</code>ï¼Œå¹¶å¢åŠ äº†ç”¨äºç¡®è®¤çš„å›è°ƒæ–¹æ³•ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfirmNavigationRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>navigationContext</strong> æä¾›å½“å‰å¯¼èˆªä¸Šä¸‹æ–‡ï¼ˆåŒ…æ‹¬ç›®æ ‡ URIã€å‚æ•°ç­‰ï¼‰ï¼›</p></li><li><p><strong>continuationCallback(bool)</strong> å¿…é¡»åœ¨ç¡®è®¤å®Œæˆåè°ƒç”¨ï¼š</p><ul><li><p>ä¼ å…¥ <code>true</code> â†’ Prism ç»§ç»­æ‰§è¡Œå¯¼èˆªï¼›</p></li><li><p>ä¼ å…¥ <code>false</code> â†’ Prism <strong>å–æ¶ˆå¯¼èˆª</strong>ã€‚</p></li></ul></li></ul><p><strong>ç¤ºä¾‹ï¼šå®ç°å¯¼èˆªç¡®è®¤</strong></p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ViewAViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IConfirmNavigationRequest</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfirmNavigationRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        bool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä½¿ç”¨æ¶ˆæ¯æ¡†æç¤ºç”¨æˆ·ï¼ˆä»…æ¼”ç¤ºï¼Œå®é™…æ¨èä½¿ç”¨ DialogServiceï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MessageBox</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Show</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Do you want to navigate?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &quot;Navigate?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MessageBoxButton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">YesNo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> MessageBoxResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">No</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å½“ Prism å‘ç°å½“å‰æ¿€æ´»è§†å›¾æˆ– ViewModel å®ç°äº† <code>IConfirmNavigationRequest</code> æ—¶ï¼Œä¼šåœ¨å¯¼èˆªå‰è°ƒç”¨ <code>ConfirmNavigationRequest</code>ï¼›</li><li>è§†å›¾æ¨¡å‹å¯ä»¥æ˜¾ç¤º UIï¼ˆä¾‹å¦‚æ¶ˆæ¯æ¡†ã€å¯¹è¯æ¡†ç­‰ï¼‰æ¥è·å–ç”¨æˆ·é€‰æ‹©ï¼›</li><li>æ ¹æ®ç”¨æˆ·å“åº”é€šè¿‡ <code>continuationCallback</code> é€šçŸ¥ Prism æ˜¯å¦ç»§ç»­å¯¼èˆªã€‚</li></ul><blockquote><p>ç›´æ¥åœ¨ ViewModel ä¸­ä½¿ç”¨ï¼ˆä¾‹å¦‚ <code>MessageBox</code>ï¼‰å¼±è€¦åˆæ€§ä¸é«˜ã€‚é€šå¸¸æ¨èä½¿ç”¨ Prism çš„ <strong>DialogService</strong>ï¼ˆå³ <code>IDialogService</code>ï¼‰æ¥å¼¹å‡º MVVM å‹å¥½çš„ç¡®è®¤å¯¹è¯æ¡†</p></blockquote><h5 id="å¼‚æ­¥ç¡®è®¤ä¸idialogservie" tabindex="-1"><a class="header-anchor" href="#å¼‚æ­¥ç¡®è®¤ä¸idialogservie"><span>å¼‚æ­¥ç¡®è®¤ä¸IDialogServie</span></a></h5><p>ç”±äº <code>ConfirmNavigationRequest</code> ä½¿ç”¨äº†å›è°ƒæ¨¡å¼ï¼ˆCallbackï¼‰ï¼Œå®ƒå¤©ç„¶æ”¯æŒ<strong>å¼‚æ­¥æ“ä½œ</strong>ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå¼¹å‡ºçª—å£ï¼Œç­‰å¾…ç”¨æˆ·æ“ä½œï¼Œè€Œä¸ä¼šé˜»å¡ UI çº¿ç¨‹ã€‚</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EditUserViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IConfirmNavigationRequest</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> readonly</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IDialogService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> IsDirty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ ‡è®°æ˜¯å¦æœ‰æœªä¿å­˜çš„æ›´æ”¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> EditUserViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        _dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfirmNavigationRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">IsDirty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å¼¹å‡ºå¯¹è¯æ¡†è¯¢é—®ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            _dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ConfirmationDialog&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { { </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;message&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ‚¨æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // æ ¹æ®ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„ç»“æœå†³å®šæ˜¯å¦ç»§ç»­å¯¼èˆª</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                    continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                else</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                    continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // æ²¡æœ‰æ›´æ”¹ï¼Œç›´æ¥å…è®¸é€šè¿‡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            continuationCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // INavigationAware çš„å…¶ä»–æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IsNavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedFrom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ç¡®è®¤å¯¼èˆªæ‰§è¡Œé¡ºåº" tabindex="-1"><a class="header-anchor" href="#ç¡®è®¤å¯¼èˆªæ‰§è¡Œé¡ºåº"><span>ç¡®è®¤å¯¼èˆªæ‰§è¡Œé¡ºåº</span></a></h5><p>åœ¨ä¸€ä¸ªå®Œæ•´çš„å¯¼èˆªæµç¨‹ä¸­ï¼Œç¡®è®¤é€»è¾‘çš„æ‰§è¡Œä½ç½®å¦‚ä¸‹ï¼š</p><ol><li><strong>å‘èµ·å¯¼èˆª</strong>ï¼š<code>RequestNavigate</code>ã€‚</li><li><strong>ç¡®è®¤æ‹¦æˆª (Confirming)</strong>ï¼šè°ƒç”¨å½“å‰é¡µé¢çš„ <code>ConfirmNavigationRequest</code>ã€‚</li><li><strong>å…è®¸é€šè¿‡</strong>ï¼šç”¨æˆ·ç¡®è®¤ç¦»å¼€ã€‚</li><li><strong>ç¦»å¼€é€šçŸ¥ (From)</strong>ï¼šè°ƒç”¨å½“å‰é¡µé¢çš„ <code>OnNavigatedFrom</code>ã€‚</li><li><strong>åˆ°è¾¾é€šçŸ¥ (To)</strong>ï¼šè°ƒç”¨ç›®æ ‡é¡µé¢çš„ <code>OnNavigatedTo</code>ã€‚</li></ol><h4 id="æ§åˆ¶è§†å›¾ç”Ÿå‘½å‘¨æœŸ-1" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶è§†å›¾ç”Ÿå‘½å‘¨æœŸ-1"><span>æ§åˆ¶è§†å›¾ç”Ÿå‘½å‘¨æœŸ</span></a></h4><p>åœ¨åŒºåŸŸå¯¼èˆªä¸­ï¼Œå½“ä½ å¯¼èˆªè‡³æ–°è§†å›¾æ—¶ï¼š</p><ol><li>Prism ä¼šåˆ›å»ºæ–°çš„è§†å›¾å®ä¾‹ï¼›</li><li>å°†å®ƒæ·»åŠ åˆ°æŒ‡å®šçš„ Regionï¼›</li><li>å°†è¯¥è§†å›¾æ¿€æ´»ï¼›</li><li>å¹¶å°†å‰ä¸€ä¸ªï¼ˆæ—§çš„ï¼‰è§†å›¾ <strong>åœç”¨</strong>ï¼ˆä¸æ˜¯ç«‹å³ç§»é™¤ï¼‰ã€‚</li></ol><p>é»˜è®¤è¡Œä¸ºæ˜¯ <em>åœç”¨æ—§è§†å›¾ä½†ä¿ç•™å®ƒåœ¨ Region ä¸­</em>ï¼Œè¿™æ„å‘³ç€ï¼š</p><ul><li>åœç”¨çš„è§†å›¾ä»ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼›</li><li>å®ƒä»ä¿ç•™åœ¨ Region çš„ Views æˆ– ActiveViews é›†åˆä¸­ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ï¼›</li><li>å¯èƒ½åœ¨åç»­çš„å¯¼èˆªä¸­è¢«é‡æ–°æ¿€æ´»ã€‚</li></ul><p>ä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½ <strong>ä¸å¸Œæœ›åœç”¨çš„è§†å›¾è¢«é•¿æœŸä¿ç•™</strong>ï¼Œæ¯”å¦‚ï¼š</p><ul><li>è¯¥è§†å›¾å ç”¨å¤§é‡èµ„æºï¼›</li><li>ä½ å¸Œæœ›â€œæ¯æ¬¡å¯¼èˆªéƒ½æ˜¯å…¨æ–°è§†å›¾â€ï¼›</li><li>ä½ ä¸éœ€è¦è¿”å›æ—§è§†å›¾ï¼ˆæ²¡æœ‰å†å²æ ˆè¦æ±‚ï¼‰ã€‚</li></ul><p>Prism å…è®¸ä½ é€šè¿‡ä¸€ä¸ªç®€å•çš„æœºåˆ¶æ¥æ§åˆ¶è¿™ä¸€è¡Œä¸ºï¼š<strong><code>IRegionMemberLifetime</code></strong>ã€‚</p><h5 id="iregionmemberlifetimeæ¥å£" tabindex="-1"><a class="header-anchor" href="#iregionmemberlifetimeæ¥å£"><span><code>IRegionMemberLifetime</code>æ¥å£</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IRegionMemberLifetime</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> KeepAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒåªæœ‰ä¸€ä¸ªåªè¯»å±æ€§ï¼š</p><ul><li><strong><code>KeepAlive</code></strong> â€” å½“è§†å›¾è¢«åœç”¨ï¼ˆDeactivateï¼‰æ—¶æ˜¯å¦åº”å½“ <strong>ç»§ç»­ä¿ç•™åœ¨ Region ä¸­</strong>ã€‚ <ul><li><code>true</code>ï¼š<strong>ä¿ç•™è§†å›¾å®ä¾‹</strong>ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</li><li><code>false</code>ï¼š<strong>ç§»é™¤è§†å›¾å®ä¾‹</strong>ï¼Œé‡Šæ”¾å…¶åœ¨ Region ä¸­çš„å¼•ç”¨ï¼Œä»è€Œä½¿å…¶å¯è¢«åƒåœ¾å›æ”¶ã€‚</li></ul></li></ul><h5 id="ä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹å¼"><span>ä½¿ç”¨æ–¹å¼</span></a></h5><h6 id="å®ç°æ¥å£" tabindex="-1"><a class="header-anchor" href="#å®ç°æ¥å£"><span>å®ç°æ¥å£</span></a></h6><p>å¯ä»¥åœ¨ <strong>è§†å›¾ç±»ï¼ˆViewï¼‰</strong> æˆ– <strong>è§†å›¾æ¨¡å‹ï¼ˆViewModelï¼‰</strong> ä¸Šå®ç°è¿™ä¸ªæ¥å£ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EmployeeDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegionMemberLifetime</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> KeepAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è§†å›¾åœç”¨åä»ä¿ç•™</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…å¦‚æœä½ å¸Œæœ›åœç”¨æ—¶ <strong>ç§»é™¤è¯¥è§†å›¾</strong>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EmployeeDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegionMemberLifetime</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> KeepAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ KeepAlive è¿”å› <code>false</code> æ—¶ï¼ŒPrism ä¼šåœ¨å¯¼èˆªè‡³å…¶ä»–è§†å›¾ä¸”å½“å‰è§†å›¾åœç”¨æ—¶ï¼š</p><ul><li>ä» Region çš„ Views é›†åˆä¸­ç§»é™¤è¯¥è§†å›¾ï¼›</li><li>ä¸ä¿ç•™å¯¹å®ƒçš„å¼•ç”¨ï¼›</li><li>å› æ­¤è¯¥è§†å›¾æ ˆä¸å†åŒ…å«å®ƒï¼Œæ—§è§†å›¾ä¸ä¼šè¢«é‡æ–°æ¿€æ´»ã€‚</li></ul><h6 id="æ³¨è§£æ ‡è¯†" tabindex="-1"><a class="header-anchor" href="#æ³¨è§£æ ‡è¯†"><span>æ³¨è§£æ ‡è¯†</span></a></h6><p>é™¤äº†åœ¨ç±»ä¸Šå®ç°æ¥å£ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ Prism æä¾›çš„ <strong><code>RegionMemberLifetimeAttribute</code></strong> æ ‡æ³¨ç±»æ¥å®ç°ç›¸åŒæ•ˆæœï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RegionMemberLifetime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;">KeepAlive</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EmployeeDetailViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯¼èˆªæ—¥å¿—-1" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªæ—¥å¿—-1"><span>å¯¼èˆªæ—¥å¿—</span></a></h4><p>åœ¨ Prism çš„åŒºåŸŸå¯¼èˆªä¸­ï¼Œæ¡†æ¶ä¸ä»…æ”¯æŒæŠŠè§†å›¾åŠ¨æ€åŠ è½½åˆ°æŒ‡å®šåŒºåŸŸï¼Œè¿˜æä¾›äº†ä¸€ä¸ª <strong>å¯¼èˆªå†å²ç®¡ç†æœºåˆ¶</strong>ï¼ˆNavigation Journalï¼‰ï¼Œç”¨äºè·Ÿè¸ªå¯¼èˆªæµå¹¶æ”¯æŒç”¨æˆ·åœ¨åŒä¸€åŒºåŸŸå†…â€œåé€€/å‰è¿›â€æ“ä½œã€‚</p><p>å¯¼èˆªæ—¥å¿—çš„åŠŸèƒ½ç±»ä¼¼æµè§ˆå™¨å†å²è®°å½•ï¼š</p><ul><li>è·Ÿè¸ªç”¨æˆ·åœ¨åŒä¸€åŒºåŸŸè¿›è¡Œçš„å¯¼èˆªï¼›</li><li>å…è®¸æ‰§è¡Œ <strong>GoBackï¼ˆå›é€€ï¼‰</strong> å’Œ <strong>GoForwardï¼ˆå‰è¿›ï¼‰</strong>ï¼›</li><li>å¯æŸ¥è¯¢æ˜¯å¦å¯ä»¥è¿›è¡Œå‰è¿›/åé€€æ“ä½œï¼›</li><li>å¯è‡ªå®šä¹‰è¡Œä¸ºæˆ–æ¸…ç†å†å²è®°å½•ã€‚</li></ul><h5 id="æ—¥å¿—æ¥æº-iregionnavigationservie" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—æ¥æº-iregionnavigationservie"><span>æ—¥å¿—æ¥æºï¼š<code>IRegionNavigationServie</code></span></a></h5><p>å½“ Prism æ‰§è¡ŒåŸºäº <strong>åŒºåŸŸå¯¼èˆª</strong> æ—¶ï¼Œä¼šé€šè¿‡ <strong>åŒºåŸŸå¯¼èˆªæœåŠ¡ (<code>IRegionNavigationService</code>)</strong> æ¥åè°ƒæ•´ä¸ªè¿‡ç¨‹ã€‚è¿™ä¸ªæœåŠ¡é™¤äº†å¤„ç†å¯¼èˆªè¯·æ±‚ã€ç¡®è®¤å¯¼èˆªã€æ‰§è¡Œè§†å›¾æ¿€æ´»å¤–ï¼Œè¿˜æš´éœ²äº†ä¸€ä¸ª <strong>æ—¥å¿—æ¥å£ (<code>Journal</code>)</strong>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IRegionNavigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigateAsync</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    IRegion</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    IRegionNavigationJournal</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> Journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EventHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RegionNavigationEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; Navigating;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EventHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RegionNavigationEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; Navigated;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EventHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RegionNavigationFailedEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; NavigationFailed;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>NavigationService.Journal</code> å³å½“å‰åŒºåŸŸçš„å¯¼èˆªæ—¥å¿—ï¼›</li><li>è¯¥æœåŠ¡åœ¨æ‰§è¡Œ <code>RequestNavigate(...)</code> æ“ä½œæ—¶è‡ªåŠ¨æ›´æ–°å†å²è®°å½•ï¼ˆå¦‚æœæ—¥å¿—å…è®¸ï¼‰ã€‚</li></ul><h5 id="æ ¸å¿ƒapi-iregionnavigationjournal" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒapi-iregionnavigationjournal"><span>æ ¸å¿ƒAPI:<code>IRegionNavigationJournal</code></span></a></h5><p>å¯¼èˆªæ—¥å¿—é€šè¿‡æ¥å£ <code>IRegionNavigationJournal</code> æ¥æä¾›å†å²ç®¡ç†åŠŸèƒ½ã€‚å®ƒæ”¯æŒå¦‚ä¸‹æ“ä½œï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IRegionNavigationJournal</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> CanGoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> CanGoForward</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å½“å‰å†å²é¡¹ï¼Œå¯ç”¨äºæ˜¾ç¤ºå¯¼èˆªæ ‡é¢˜ã€å½“å‰ URI æˆ–å‚æ•°ç­‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    IRegionNavigationJournalEntry</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> CurrentEntry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æŒ‡å®šæˆ–ç¡®è®¤å½“å‰çš„å¯¼èˆªç›®æ ‡æœåŠ¡å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    INavigateAsync</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> NavigationTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GoForward</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RecordNavigation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IRegionNavigationJournalEntry</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="åœ¨viewmodelä¸­ä½¿ç”¨navigation-journal" tabindex="-1"><a class="header-anchor" href="#åœ¨viewmodelä¸­ä½¿ç”¨navigation-journal"><span>åœ¨ViewModelä¸­ä½¿ç”¨Navigation Journal</span></a></h5><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EmployeeDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">INavigationAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IRegionNavigationService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å­˜å‚¨å¯¼èˆªæœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> navigationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NavigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> GoBackCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> GoForwardCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> EmployeeDetailsViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        GoBackCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, () =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanGoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        GoForwardCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">GoForward</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, () =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanGoForward</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GoForward</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">navigationService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Journal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GoForward</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ <code>OnNavigatedTo</code> ä¸­è·å–å½“å‰åŒºåŸŸçš„å¯¼èˆªæœåŠ¡ï¼›</li><li>åœ¨ UI ä¸Šç»‘å®š <code>GoBackCommand</code> / <code>GoForwardCommand</code>ï¼›</li><li>ä½¿ç”¨æ—¥å¿—æä¾›çš„ <code>GoBack()</code> / <code>GoForward()</code> æ‰§è¡Œå†å²å¯¼èˆªã€‚</li></ul><h5 id="æ—¥å¿—é»˜è®¤è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—é»˜è®¤è¡Œä¸º"><span>æ—¥å¿—é»˜è®¤è¡Œä¸º</span></a></h5><p>Prism é»˜è®¤æä¾›ä¸€ä¸ªåŸºäº <strong>æ ˆç»“æ„</strong> çš„å¯¼èˆªæ—¥å¿—ï¼š</p><ul><li>æ¯æ¬¡åŒºåŸŸå¯¼èˆªæˆåŠŸåä¼šè®°å½•ä¸€æ¡å†å²ï¼›</li><li><code>GoBack()</code> ä¼šé€€å›åˆ°ä¸Šä¸€æ¡å¹¶é‡æ–°æ¿€æ´»å¯¹åº”è§†å›¾ï¼›</li><li><code>GoForward()</code> åœ¨æ‰§è¡Œ <code>GoBack()</code> åå¯ç”¨äºå‰è¿›ï¼ˆç±»ä¼¼æµè§ˆå™¨ï¼‰ã€‚</li></ul><p>è¿™æ˜¯åœ¨æ­£å¸¸æ‰§è¡ŒåŸºäº <code>RequestNavigate</code> çš„å¯¼èˆªæ—¶è‡ªåŠ¨å¯ç”¨çš„</p><blockquote><p>å¦‚æœä¸æ˜¯é€šè¿‡æ ‡å‡†çš„å¯¼èˆªæœºåˆ¶ï¼ˆå¦‚ç›´æ¥ä½¿ç”¨è§†å›¾æ³¨å…¥ <code>Add()</code> æˆ–è§†å›¾å‘ç°æ³¨å†Œï¼‰è¿›è¡Œè§†å›¾åˆ‡æ¢ï¼Œå¯¼èˆªæ—¥å¿—å¯èƒ½ä¸ä¼šæ›´æ–°ï¼Œå› æ­¤åé€€/å‰è¿›ä¸ä¼šç”Ÿæ•ˆ</p></blockquote><h5 id="æ’é™¤ä¸æƒ³è®°å½•çš„å¯¼èˆªé¡¹" tabindex="-1"><a class="header-anchor" href="#æ’é™¤ä¸æƒ³è®°å½•çš„å¯¼èˆªé¡¹"><span>æ’é™¤ä¸æƒ³è®°å½•çš„å¯¼èˆªé¡¹</span></a></h5><p>åœ¨æŸäº›åœºæ™¯ä¸­ä½ å¯èƒ½ä¸å¸Œæœ›æŸäº›è§†å›¾è¢«åŠ å…¥å†å²è®°å½•ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ä¸­é—´åŠ è½½é¡µé¢ï¼›</li><li>è­¦å‘Šæˆ–æç¤ºè§†å›¾ï¼›</li><li>ä¸éœ€è¦åœ¨åé€€æ—¶è®¿é—®çš„ä¸´æ—¶ UIã€‚</li></ul><p>Prism æ”¯æŒé€šè¿‡å®ç° <strong><code>IJournalAware</code> æ¥å£</strong> åœ¨è§†å›¾æˆ–è§†å›¾æ¨¡å‹ä¸Šæ§åˆ¶è¿™ä¸€è¡Œä¸ºï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IJournalAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PersistInHistory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‹¥æŸä¸ªé¡µé¢è¿”å› <code>false</code>ï¼Œåˆ™è¯¥è§†å›¾å®ä¾‹ä¸ä¼šè¢«åŠ å…¥å¯¼èˆªæ—¥å¿—ï¼Œä»è€Œä¸ä¼šåœ¨æ‰§è¡Œ <code>GoBack()</code> æˆ– <code>GoForward()</code> æ—¶æ˜¾ç¤ºï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IntermediaryPage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IJournalAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PersistInHistory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æœºåˆ¶å¸¸ç”¨äºä¸´æ—¶å±å¹•ã€åŠ è½½é®ç½©æˆ–ç‰¹å®šæç¤ºé¡µï¼Œè¿™äº›è§†å›¾åº”è¯¥ <strong>è·³è¿‡å¯¼èˆªå†å²</strong></p><h2 id="å¹³å°" tabindex="-1"><a class="header-anchor" href="#å¹³å°"><span>å¹³å°</span></a></h2><h3 id="net-maui" tabindex="-1"><a class="header-anchor" href="#net-maui"><span>.NET MAUI</span></a></h3><h3 id="uno-platform" tabindex="-1"><a class="header-anchor" href="#uno-platform"><span>Uno Platform</span></a></h3><h3 id="wpf" tabindex="-1"><a class="header-anchor" href="#wpf"><span>WPF</span></a></h3><h4 id="å¯¹è¯æœåŠ¡-1" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æœåŠ¡-1"><span>å¯¹è¯æœåŠ¡</span></a></h4><p>Prism åœ¨ WPF ä¸­æä¾›äº†ä¸€ä¸ª MVVM å‹å¥½çš„å¯¹è¯æ¡†æœåŠ¡ï¼ˆ<strong><code>IDialogService</code></strong>ï¼‰ï¼Œç”¨äºæ˜¾ç¤º<strong>è‡ªå®šä¹‰å¯¹è¯çª—å£</strong>ï¼ˆmodal/dialogï¼‰å¹¶ä¸ ViewModel è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€ç›´æ¥åœ¨ View å±‚æ“ä½œçª—å£æˆ–å¼¹çª—é€»è¾‘ã€‚</p><p>è¿™ä¸ªæœåŠ¡çš„æ ¸å¿ƒæ˜¯ï¼š</p><ul><li>ä¸ç›´æ¥ä½¿ç”¨ WPF åŸç”Ÿçš„ <code>Window.ShowDialog()</code>ï¼›</li><li>ä½¿ç”¨ Prism DI å®¹å™¨æ¥åˆ›å»ºå¯¹è¯æ¡†è§†å›¾ä¸å¯¹åº” ViewModelï¼›</li><li>é€šè¿‡å‚æ•°ä¼ é€’ä¸ç»“æœå›è°ƒæ¥å®ç°æ•°æ®äº¤äº’ã€‚</li></ul><h5 id="å¯¹è¯æ¡†view" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æ¡†view"><span>å¯¹è¯æ¡†View</span></a></h5><p>å¯¹è¯æ¡†é¦–å…ˆæ˜¯ä¸€ä¸ªWPF <strong>UserControl</strong>ï¼Œä½ å¯ä»¥æŒ‰ UI éœ€è¦è‡ªç”±è®¾è®¡ã€‚å”¯ä¸€è¦æ±‚æ˜¯å®ƒçš„ DataContext éœ€è¦å…³è”ä¸€ä¸ªå®ç°äº† <strong><code>IDialogAware</code></strong> çš„ ViewModelã€‚Prism æ¨èä½¿ç”¨ ViewModelLocator è‡ªåŠ¨æ³¨å…¥ ViewModelã€‚</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">UserControl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;HelloWorld.Dialogs.NotificationDialog&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             xmlns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             xmlns:x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             xmlns:prism</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://prismlibrary.com/&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             prism:ViewModelLocator.AutoWireViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;True&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             Width</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;300&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;150&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    &lt;!-- è‡ªå®šä¹‰å¸ƒå±€ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">UserControl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¯¹è¯æ¡†viewmodel-1" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯æ¡†viewmodel-1"><span>å¯¹è¯æ¡†ViewModel</span></a></h5><p>Prism è§„å®šå¯¹è¯æ¡†çš„ ViewModel å¿…é¡»å®ç° <strong><code>IDialogAware</code></strong> æ¥å£ï¼Œå®ƒå®šä¹‰äº†å¯¹è¯æ¡†çš„ç”Ÿå‘½å‘¨æœŸå’Œç»“æœé€šçŸ¥æœºåˆ¶ã€‚</p><p>æ¥å£åŒ…æ‹¬ï¼š</p><ul><li><strong><code>Title</code></strong> â€” å¯¹è¯æ¡†æ ‡é¢˜ï¼›</li><li><strong><code>CanCloseDialog()</code></strong> â€” æ§åˆ¶æ˜¯å¦å…è®¸å…³é—­ï¼›</li><li><strong><code>OnDialogOpened(IDialogParameters)</code></strong> â€” å¯¹è¯æ¡†æ‰“å¼€æ—¶çš„å‚æ•°æ¥æ”¶ï¼›</li><li><strong><code>OnDialogClosed()</code></strong> â€” å¯¹è¯æ¡†å…³é—­åæ¸…ç†æˆ–é€»è¾‘ï¼›</li><li><strong><code>RequestClose</code> äº‹ä»¶</strong> â€” é€šè¿‡è¯¥äº‹ä»¶é€šçŸ¥ Prism å…³é—­å¯¹è¯æ¡†ã€‚</li></ul><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> NotificationDialogViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogAware</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; RequestClose;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CanCloseDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() =&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogOpened</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        Message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;message&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnDialogClosed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> Title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;">CloseDialogCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> p</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ? </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Cancel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            RequestClose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> Message</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ³¨å†Œå¯¹è¯æ¡†-1" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œå¯¹è¯æ¡†-1"><span>æ³¨å†Œå¯¹è¯æ¡†</span></a></h5><p>åœ¨ Prism åº”ç”¨çš„ <code>RegisterTypes</code> æ–¹æ³•ä¸­é€šè¿‡å®¹å™¨æ³¨å†Œå¯¹è¯æ¡†ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RegisterTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NotificationDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NotificationDialogViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³›å‹å‚æ•°æŒ‡å¯¹è¯æ¡† View å’Œ ViewModelï¼›</li><li>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ª <strong>è‡ªå®šä¹‰åç§°</strong>ï¼ˆå­—ç¬¦ä¸²ï¼‰ä½œä¸ºå¯¹è¯æ¡†æ ‡è¯†ã€‚</li></ul><h5 id="ä½¿ç”¨dialog-service" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨dialog-service"><span>ä½¿ç”¨Dialog Service</span></a></h5><p>åœ¨éœ€è¦æ˜¾ç¤ºå¯¹è¯æ¡†çš„ ViewModel ä¸­æ³¨å…¥ <code>IDialogService</code>ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">IDialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    _dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è°ƒç”¨å¯¹è¯æ¡†ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;NotificationDialog&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;message={</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    r</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">r</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* å¤„ç† OK */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">r</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> ButtonResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Cancel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* å¤„ç† Cancel */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è¯æ¡†æ³¨å†Œåç§°ï¼›</li><li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ é€’ç»™å¯¹è¯æ¡†çš„å‚æ•°ï¼›</li><li>ç¬¬ä¸‰ä¸ªæ˜¯å›è°ƒï¼Œç”¨äºå¤„ç†å¯¹è¯æ¡†è¿”å›çš„ç»“æœï¼ˆ<code>IDialogResult</code>ï¼‰ã€‚</li></ul><h5 id="è‡ªå®šä¹‰å¯¹è¯æ¡†å®¿ä¸»çª—ä½“window" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å¯¹è¯æ¡†å®¿ä¸»çª—ä½“window"><span>è‡ªå®šä¹‰å¯¹è¯æ¡†å®¿ä¸»çª—ä½“Window</span></a></h5><p>é»˜è®¤ Prism ä¼šåˆ›å»ºæ ‡å‡†çš„ WPF <code>Window</code> æ‰¿è½½ä½ çš„å¯¹è¯æ¡†å†…å®¹ã€‚å¦‚æœä½ ä½¿ç”¨ç¬¬ä¸‰æ–¹æ§ä»¶æˆ–éœ€è¦ä¸åŒçš„ Window ç±»å‹ï¼Œå¯ä»¥ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªå®ç°äº† <code>IDialogWindow</code> æ¥å£çš„è‡ªå®šä¹‰ Window ç±»å‹ï¼›</li><li>é€šè¿‡å®¹å™¨æ³¨å†Œè¯¥å¯¹è¯æ¡†å®¿ä¸»ï¼š</li></ol><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterDialogWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyCustomDialogWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ–è€…å¸¦åç§°ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterDialogWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyCustomDialogWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;notifyWindow&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœä½¿ç”¨äº†å‘½å Windowï¼Œåœ¨è°ƒç”¨ <code>ShowDialog</code> æ—¶è¦å°†è¯¥ window åç§°ä¼ å…¥ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;NotificationDialog&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;notifyWindow&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ§åˆ¶å¯¹è¯æ¡†windowæ ·å¼" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶å¯¹è¯æ¡†windowæ ·å¼"><span>æ§åˆ¶å¯¹è¯æ¡†Windowæ ·å¼</span></a></h5><p>å¯ä»¥é€šè¿‡ Prism æä¾›çš„é™„åŠ å±æ€§åœ¨å¯¹è¯æ¡†è§†å›¾ä¸Šå£°æ˜å¯¹è¯çª—å£æ ·å¼ï¼Œä¾‹å¦‚è®¾ç½®å¯åŠ¨ä½ç½®ã€å°ºå¯¸æ¨¡å¼ã€æ˜¯å¦æ˜¾ç¤ºä»»åŠ¡æ ç­‰ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">prism:Dialog.WindowStyle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Style</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> TargetType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Window&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Setter</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prism:Dialog.WindowStartupLocation&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;CenterScreen&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Setter</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ResizeMode&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;NoResize&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Setter</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ShowInTaskbar&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;False&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Setter</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SizeToContent&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;WidthAndHeight&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Style</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">prism:Dialog.WindowStyle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼è®©ä½ å¯ä»¥åœ¨ XAML é‡Œç›´æ¥æ§åˆ¶å¯¹è¯æ¡†å®¿ä¸» Window çš„å±æ€§ï¼Œè€Œæ— éœ€ç¡¬ç¼–ç </p><h5 id="ç®€åŒ–å¯¹è¯æ¡†è°ƒç”¨api-å¯é€‰" tabindex="-1"><a class="header-anchor" href="#ç®€åŒ–å¯¹è¯æ¡†è°ƒç”¨api-å¯é€‰"><span>ç®€åŒ–å¯¹è¯æ¡†è°ƒç”¨API(å¯é€‰)</span></a></h5><p>Prism å¯¹è¯æœåŠ¡çš„åŸå§‹ API éœ€è¦ä¹¦å†™è°ƒç”¨é€»è¾‘ï¼Œå¦‚æœåº”ç”¨å†…æœ‰å¾ˆå¤šç±»ä¼¼çš„å¯¹è¯æ¡†ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•æ–¹æ³•å°è£…å¸¸ç”¨å¯¹è¯è°ƒç”¨æ¨¡å¼ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DialogServiceExtensions</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ShowNotification</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        this</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IDialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        string</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IDialogResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        dialogService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowDialog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &quot;NotificationDialog&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DialogParameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$&quot;message={</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &quot;notificationWindow&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å¯ä»¥åœ¨ ViewModel ä¸­è°ƒç”¨æ›´ç®€æ´çš„å¯¹è¯æ¡† API</p><h4 id="å¿«é€Ÿä¸Šæ‰‹" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹"><span>å¿«é€Ÿä¸Šæ‰‹</span></a></h4><h5 id="å®‰è£…nugetåŒ…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…nugetåŒ…"><span>å®‰è£…NugetåŒ…</span></a></h5><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ WPF é¡¹ç›®åï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªä¾èµ–æ³¨å…¥å®¹å™¨å¹¶å®‰è£…å¯¹åº” Prism åŒ…ï¼š</p><table><thead><tr><th>NuGet åŒ…</th><th>æ‰€ç”¨å®¹å™¨</th></tr></thead><tbody><tr><td><code>Prism.Unity</code></td><td>Unity å®¹å™¨</td></tr><tr><td><code>Prism.DryIoc</code></td><td>DryIoc å®¹å™¨</td></tr></tbody></table><blockquote><p>å®‰è£…å…¶ä¸­ä¸€ä¸ªå³å¯ï¼Œå®ƒä¼šè‡ªåŠ¨å¸¦ä¸Š Prism æ ¸å¿ƒåº“å’Œå®¹å™¨æ”¯æŒåŒ…</p></blockquote><h5 id="ç»§æ‰¿prismapplication" tabindex="-1"><a class="header-anchor" href="#ç»§æ‰¿prismapplication"><span>ç»§æ‰¿PrismApplication</span></a></h5><p>é»˜è®¤ WPF åº”ç”¨ç»§æ‰¿ <code>Application</code>ï¼ŒPrism éœ€è¦ä½ æ”¹æˆç»§æ‰¿ <code>PrismApplication</code>ï¼Œè¿™æ · Prism èƒ½åœ¨å¯åŠ¨æ—¶åˆå§‹åŒ–å®¹å™¨å¹¶å¤„ç†ä¾èµ–æ³¨å…¥ç­‰æœºåˆ¶ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- App.xaml --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">prism:PrismApplication</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    x:Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MyPrismApp.App&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    xmlns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    xmlns:prism</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://prismlibrary.com/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Application.Resources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">prism:PrismApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>åˆ æ‰ PrismApplication ä¸­åŸæ¥çš„ <code>StartupUri</code>ï¼Œé¿å…è¿è¡ŒæœŸåˆ›å»ºé‡å¤çª—å£å®ä¾‹</p></blockquote><p>å¯¹åº”åå°ä»£ç ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> partial</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PrismApplication</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å®ç°2ä¸ªæ ¸å¿ƒæŠ½è±¡æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å®ç°2ä¸ªæ ¸å¿ƒæŠ½è±¡æ–¹æ³•"><span>å®ç°2ä¸ªæ ¸å¿ƒæŠ½è±¡æ–¹æ³•</span></a></h5><p>PrismApplication å¼ºåˆ¶ä½ å®ç°ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p><h6 id="registertypes-æ³¨å†Œä¾èµ–æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#registertypes-æ³¨å†Œä¾èµ–æœåŠ¡"><span><code>RegisterTypes</code>ï¼ˆæ³¨å†Œä¾èµ–æœåŠ¡ï¼‰</span></a></h6><p>ç”¨äºå‘ Prism å®¹å™¨æ³¨å†ŒæœåŠ¡æˆ–å¯¹è±¡ä¾èµ–ï¼Œä¾‹å¦‚ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RegisterTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IContainerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    containerRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ICustomerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DbCustomerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæ³¨å†Œäº†ä¸€ä¸ªæ•°æ®å­˜å‚¨æ¥å£åŠå…¶å®ç°ï¼Œåç»­ ViewModel å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥è·å¾—ã€‚</p><p>Prism çš„å®¹å™¨æ”¯æŒå¤šç§æ³¨å†Œæ–¹å¼ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>Register</code>ï¼šæ¯æ¬¡è§£ææ–°å®ä¾‹</li><li><code>RegisterSingleton</code>ï¼šå•ä¾‹</li><li><code>RegisterInstance</code>ï¼šæ³¨å†Œç°æœ‰å®ä¾‹ å®¹å™¨ä¹Ÿèƒ½è§£æ<strong>å…·ä½“ç±»å‹</strong>è€Œæ— éœ€æå‰æ³¨å†Œã€‚</li></ul><h6 id="createshell-åˆ›å»ºä¸»çª—å£" tabindex="-1"><a class="header-anchor" href="#createshell-åˆ›å»ºä¸»çª—å£"><span><code>CreateShell</code>(åˆ›å»ºä¸»çª—å£)</span></a></h6><p>Prism åº”ç”¨çš„â€œå…¥å£çª—å£â€ç”±æ­¤æ–¹æ³•è¿”å›ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Window</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CreateShell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Prism ä¼šé€šè¿‡ DI å®¹å™¨å®ä¾‹åŒ– MainWindow åŠå…¶ä¾èµ–ï¼Œå¹¶å°†å…¶ä½œä¸ºåº”ç”¨ä¸»çª—å£æ˜¾ç¤º</p><h5 id="æ„å»ºviewå’Œviewmodel" tabindex="-1"><a class="header-anchor" href="#æ„å»ºviewå’Œviewmodel"><span>æ„å»ºViewå’ŒViewModel</span></a></h5><p>ä¸ºäº†æ¼”ç¤º MVVM ç»‘å®šå’Œ Prism çš„æ”¯æŒï¼š</p><h6 id="ui-mainwindow-xaml" tabindex="-1"><a class="header-anchor" href="#ui-mainwindow-xaml"><span>UI(MainWindow.xaml)</span></a></h6><p>ä¸ºä¸»çª—å£æ·»åŠ ä¸€äº› UIï¼Œä¾‹å¦‚ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Grid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Grid.RowDefinitions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">RowDefinition</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">RowDefinition</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Auto&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Grid.RowDefinitions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListView</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ItemsSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding Customers}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> SelectedItem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SelectedCustomer}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Grid.Row</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding CommandLoad}&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;LOAD&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Grid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å…¸å‹çš„æ•°æ®ç»‘å®šåœºæ™¯ï¼šåˆ—è¡¨ + æŒ‰é’®è§¦å‘å‘½ä»¤</p><h6 id="viewmodel-mainwindowviewmodel" tabindex="-1"><a class="header-anchor" href="#viewmodel-mainwindowviewmodel"><span>ViewModel(MainWindowViewModel)</span></a></h6><p>åœ¨é¡¹ç›®æ ¹åˆ›å»º <code>ViewModels</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºåŒå ViewModelï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BindableBase</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> readonly</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ICustomerStore</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _customerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MainWindowViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ICustomerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> customerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        _customerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> customerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObservableCollection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;">Customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ObservableCollection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _selectedCustomer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> string</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> SelectedCustomer</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_selectedCustomer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ref</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _selectedCustomer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> _commandLoad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DelegateCommand</span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;"> CommandLoad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        _commandLoad</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> ??=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DelegateCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ExecuteLoad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ExecuteLoad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> customer</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> _customerStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            Customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">customer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ViewModel ç»§æ‰¿è‡ª Prism çš„ <code>BindableBase</code> æä¾›å±æ€§å˜æ›´é€šçŸ¥æ”¯æŒï¼›</li><li>ä½¿ç”¨ Prism çš„ <code>DelegateCommand</code> ç®€åŒ– <code>ICommand</code> å®ç°ï¼›</li><li>é€šè¿‡æ„é€ å‡½æ•°ä¾èµ–æ³¨å…¥è·å¾—æœåŠ¡ã€‚</li></ul><h5 id="viewå’Œviewmodelè‡ªåŠ¨å…³è”" tabindex="-1"><a class="header-anchor" href="#viewå’Œviewmodelè‡ªåŠ¨å…³è”"><span>Viewå’ŒViewModelè‡ªåŠ¨å…³è”</span></a></h5><p>Prism å†…ç½®äº† ViewModelLocatorï¼Œé»˜è®¤çº¦å®šå¦‚ä¸‹å‘½åè§„åˆ™ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Views</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> â†’ </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MainWindowViewModel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åªè¦åœ¨ XAML ä¸­å¯ç”¨è‡ªåŠ¨ç»‘å®šï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Window ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    xmlns:prism=&quot;http://prismlibrary.com/&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    prism:ViewModelLocator.AutoWireViewModel=&quot;True&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Prism å°±ä¼šï¼š</p><ul><li>ä½¿ç”¨å®¹å™¨è§£æ ViewModelï¼›</li><li>å°†å…¶è®¾ç½®ä¸º View çš„ DataContextã€‚</li></ul><h5 id="æ‰§è¡Œåº”ç”¨ä¸æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œåº”ç”¨ä¸æ•ˆæœ"><span>æ‰§è¡Œåº”ç”¨ä¸æ•ˆæœ</span></a></h5><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼š</p><ol><li>PrismApplication ä¼šåˆå§‹åŒ– DI å®¹å™¨ï¼›</li><li>CreateShell è¿”å› MainWindowï¼›</li><li>ViewModelLocator è‡ªåŠ¨åˆ›å»º ViewModelï¼›</li><li>ç‚¹å‡»æŒ‰é’®è§¦å‘ <code>CommandLoad</code> å¡«å……åˆ—è¡¨ã€‚</li></ol><h4 id="è§†å›¾ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#è§†å›¾ç»„åˆ"><span>è§†å›¾ç»„åˆ</span></a></h4><p><strong>è§†å›¾ç»„åˆï¼ˆView Compositionï¼‰</strong> æ˜¯ Prism åœ¨ WPF ä¸Šæ„å»ºå¤§å‹ã€æ¨¡å—åŒ–åº”ç”¨çš„ä¸€é¡¹æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒå…è®¸ä½ é€šè¿‡å®šä¹‰ <em>å¯æ’æ‹”çš„è§†å›¾ä½ç½®ï¼ˆregionsï¼‰</em> å’Œä¸åŒç­–ç•¥ï¼Œå°†å¤šä¸ªæ¾è€¦åˆè§†å›¾åŠ¨æ€ç»„åˆæˆæœ€ç»ˆçš„ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ã€‚</p><p>è¿™ç§æ–¹å¼é€‚ç”¨äºï¼š</p><ul><li>æ¨¡å—åŒ–æ¶æ„ä¸­ä¸åŒæ¨¡å—åœ¨è¿è¡Œæ—¶å‘ UI æ’å…¥å†…å®¹ï¼›</li><li>ä¸åŒè§†å›¾æ¥æºäºä¸åŒç¨‹åºé›†æˆ–åŠŸèƒ½å—ï¼›</li><li>éœ€è¦è®© UI åœ¨è¿è¡Œæ—¶æ ¹æ®çŠ¶æ€åŠ¨æ€å‘ˆç°å†…å®¹ã€‚</li></ul><h5 id="ç»„æˆuiçš„æ ¸å¿ƒå…ƒç´ " tabindex="-1"><a class="header-anchor" href="#ç»„æˆuiçš„æ ¸å¿ƒå…ƒç´ "><span>ç»„æˆUIçš„æ ¸å¿ƒå…ƒç´ </span></a></h5><h6 id="shell-å¤–å£³" tabindex="-1"><a class="header-anchor" href="#shell-å¤–å£³"><span>Shell(å¤–å£³)</span></a></h6><ul><li>Shell æ˜¯åº”ç”¨ç¨‹åºçš„æ ¹ UI å®¹å™¨ï¼Œåœ¨ WPF ä¸­é€šå¸¸æ˜¯ä¸€ä¸ª <code>Window</code>ï¼›</li><li>å®ƒå®šä¹‰äº† UI çš„ä¸»è¦ç»“æ„ï¼Œä¾‹å¦‚èœå•ã€å·¥å…·æ ã€ä¸»å†…å®¹åŒºç­‰ï¼›</li><li>å¯¹äºç»„åˆå¼ UIï¼ŒShell æä¾› <em>ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ååŒºåŸŸï¼ˆregionsï¼‰</em>ï¼Œä¸ºè§†å›¾åŠ¨æ€æ³¨å…¥æä¾›ä½ç½®ã€‚</li></ul><h6 id="views-è§†å›¾" tabindex="-1"><a class="header-anchor" href="#views-è§†å›¾"><span>Views(è§†å›¾)</span></a></h6><p>è§†å›¾æ˜¯ UI ä¸­çš„ <em>åŠŸèƒ½å•å…ƒ</em>ï¼Œé€šå¸¸å®šä¹‰ä¸ºï¼š</p><ul><li><code>UserControl</code></li><li><code>Page</code></li><li><code>DataTemplate</code></li><li>ç”šè‡³è‡ªå®šä¹‰æ§ä»¶ã€‚</li></ul><p>æ¯ä¸ªè§†å›¾è´Ÿè´£ä¸€ä¸ªç‰¹å®š UI éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ä¸€ä¸ªå®¢æˆ·åˆ—è¡¨ï¼›</li><li>ä¸€ä¸ªè®¢å•è¯¦æƒ…ï¼›</li><li>ä¸€ä¸ªç»Ÿè®¡é¢æ¿ã€‚</li></ul><p>è§†å›¾å¯ä»¥é™æ€ç»„åˆï¼ˆè®¾è®¡æ—¶æ”¾åœ¨ Shell å†…ï¼‰ï¼Œä¹Ÿå¯ä»¥è¿è¡Œæ—¶åŠ¨æ€æ’å…¥ã€‚</p><h6 id="regions-åŒºåŸŸ" tabindex="-1"><a class="header-anchor" href="#regions-åŒºåŸŸ"><span>Regions(åŒºåŸŸ)</span></a></h6><p><strong>åŒºåŸŸ</strong> æ˜¯ Prism çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯ <em>ç”¨äºæ’å…¥è§†å›¾çš„ä½ç½®æ ‡è®°</em>ã€‚ä¸€ä¸ª Region é€šå¸¸ç»‘å®šåˆ° Shell æˆ–æŸä¸ªè§†å›¾çš„å®¹å™¨æ§ä»¶ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>ContentControl</code></li><li><code>ItemsControl</code></li><li><code>TabControl</code> ç­‰ã€‚</li></ul><p>é€šè¿‡åœ¨ XAML ä¸­ä½¿ç”¨é™„åŠ å±æ€§ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ContentControl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> prism:RegionManager.RegionName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä½ å°±å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>MainRegion</code> çš„åŒºåŸŸï¼Œåç»­å¯ä»¥å‘å®ƒåŠ¨æ€åŠ è½½è§†å›¾ã€‚</p><h5 id="è§†å›¾åŠ è½½ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#è§†å›¾åŠ è½½ç­–ç•¥"><span>è§†å›¾åŠ è½½ç­–ç•¥</span></a></h5><p>Prism æä¾›äº†ä¸¤ç§ä¸»è¦æ–¹å¼å°†è§†å›¾åŠ å…¥åˆ° Region ä¸­ï¼š</p><h6 id="view-discovery-è§†å›¾å‘ç°" tabindex="-1"><a class="header-anchor" href="#view-discovery-è§†å›¾å‘ç°"><span>View Discovery(è§†å›¾å‘ç°)</span></a></h6><p>è¿™ç§æ–¹å¼æ˜¯åœ¨åº”ç”¨å¯åŠ¨æˆ–æ¨¡å—åˆå§‹åŒ–æ—¶ï¼Œé€šè¿‡æ³¨å†Œæ˜ å°„å…³ç³»è®© Prism è‡ªåŠ¨å°†è§†å›¾æ”¾å…¥æŒ‡å®šåŒºåŸŸï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RegisterViewWithRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CustomerListView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>è‡ªåŠ¨åˆ›å»ºå’Œæ³¨å…¥è§†å›¾ï¼›</li><li>ä¸éœ€è¦ä½ åœ¨ä»£ç ä¸­ä¸»åŠ¨è°ƒç”¨ï¼›</li><li>é€‚åˆé™æ€è§†å›¾ã€åªéœ€å•å®ä¾‹çš„åœºæ™¯ã€‚</li></ul><p>åœ¨è§†å›¾å‘ç°æ¨¡å¼ä¸­ï¼ŒPrism ä¼šåœ¨ Region è¢«åˆ›å»ºåè‡ªåŠ¨å®ä¾‹åŒ–æ‰€æœ‰å…³è”çš„è§†å›¾ç±»å‹å¹¶æ˜¾ç¤ºå®ƒä»¬</p><h6 id="view-injection-è§†å›¾æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#view-injection-è§†å›¾æ³¨å…¥"><span>View Injection(è§†å›¾æ³¨å…¥)</span></a></h6><p>è¿™ç§æ–¹å¼éœ€è¦ä½ æ‰‹åŠ¨è·å– Region å¹¶å‘å…¶ä¸­æ·»åŠ è§†å›¾å®ä¾‹ã€‚å…¸å‹ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cs"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> region</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> regionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Regions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainRegion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> view</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">OrderDetailView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Activate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½ å¯ä»¥æ§åˆ¶ <em>ä½•æ—¶åˆ›å»ºè§†å›¾</em>ï¼›</li><li>èƒ½æ·»åŠ å¤šä¸ªå®ä¾‹ï¼ˆä¾‹å¦‚å¤šä¸ªè®¢å•è¯¦æƒ…è§†å›¾ï¼‰ï¼›</li><li>å¯æŒ‰éœ€ç§»é™¤æˆ–æ¿€æ´»ç‰¹å®šå®ä¾‹ã€‚</li></ul><p>è¿™ç§æ–¹å¼é€‚ç”¨äºéœ€è¦åŠ¨æ€ã€å¯æ§çš„è§†å›¾æ³¨å…¥åœºæ™¯ã€‚</p><hr><table><thead><tr><th>ç­–ç•¥</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>è§†å›¾å‘ç°ï¼ˆView Discoveryï¼‰</strong></td><td>è‡ªåŠ¨åŠ è½½è§†å›¾ä¸”æ— éœ€ç¨‹åºæ§åˆ¶æ—¶ï¼›å•å®ä¾‹è§†å›¾æˆ–è®¾è®¡æ—¶å®šä¹‰ç•Œé¢æ—¶</td></tr><tr><td><strong>è§†å›¾æ³¨å…¥ï¼ˆView Injectionï¼‰</strong></td><td>éœ€è¦æ§åˆ¶è§†å›¾åˆ›å»º/é”€æ¯ï¼›éœ€è¦å¤šä¸ªè§†å›¾å®ä¾‹ï¼›éœ€è¦æŒ‰ä¸šåŠ¡é€»è¾‘åŠ¨æ€è§†å›¾æ’å…¥æ—¶</td></tr></tbody></table><h5 id="ä¸å¯¼èˆª-navigation-çš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#ä¸å¯¼èˆª-navigation-çš„å…³ç³»"><span>ä¸å¯¼èˆªï¼ˆNavigationï¼‰çš„å…³ç³»</span></a></h5><p>Prism åœ¨è§†å›¾æ³¨å…¥çš„åŸºç¡€ä¸ŠæŠ½è±¡äº†å¯¼èˆª APIã€‚åŒºåŸŸå¯¼èˆªæœ¬è´¨ä¸Šæ˜¯ï¼š</p><ul><li>å‘Šè¯‰ Prism â€œå°† <em>æŸä¸ª URI å¯¹åº”çš„è§†å›¾</em> åŠ å…¥ Regionâ€ï¼›</li><li>Prism è‡ªåŠ¨è§£æè§†å›¾ç±»å‹ï¼›</li><li>å°†è§†å›¾åˆ›å»ºã€æ’å…¥ã€æ¿€æ´»ã€‚</li></ul><p>è¿™ä½¿å¾—å¯¼èˆªæˆä¸ºä¸€ç§é€šç”¨æ³¨å…¥æ¨¡å¼ï¼Œå¹¶æ”¯æŒ <em>å¯¼èˆªå†å²ï¼ˆJournalï¼‰</em>ã€å‚æ•°ä¼ é€’ç­‰é«˜çº§åŠŸèƒ½ã€‚</p><h5 id="regionmanagerã€regionadapterä¸behaviors" tabindex="-1"><a class="header-anchor" href="#regionmanagerã€regionadapterä¸behaviors"><span>RegionManagerã€RegionAdapterä¸Behaviors</span></a></h5><p>Prism å†…éƒ¨æœºåˆ¶è¾ƒä¸ºçµæ´»ï¼š</p><ul><li><strong>RegionManager</strong> ç®¡ç†æ‰€æœ‰ Regionï¼Œå¹¶åè°ƒè§†å›¾ä¸ Region çš„å…³ç³»ï¼›</li><li><strong>RegionAdapter</strong> æ˜¯é’ˆå¯¹ç‰¹å®š WPF æ§ä»¶é€‚é… Region è¡Œä¸ºï¼ˆä¾‹å¦‚ <code>ContentControlRegionAdapter</code> è®© <code>ContentControl</code> æˆä¸º Regionï¼‰ï¼›</li><li><strong>Behaviors</strong>ï¼ˆå¦‚ <code>RegionActiveAwareBehavior</code>ã€<code>RegionMemberLifetimeBehavior</code>ï¼‰ç”¨äºæ§åˆ¶ Region å†…è§†å›¾çš„æ¿€æ´»çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼›</li></ul><p>è¿™äº›æœºåˆ¶é€šå¸¸æ— éœ€æ‰‹åŠ¨ç¼–å†™ï¼Œä½†æ˜¯ Prism æ”¯æŒç»„åˆå¼ UI çš„é‡è¦å†…éƒ¨ç»„ä»¶ã€‚</p><h4 id="äº¤äº’" tabindex="-1"><a class="header-anchor" href="#äº¤äº’"><span>äº¤äº’</span></a></h4><h5 id="å°†äº‹ä»¶ç»‘å®šåˆ°å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å°†äº‹ä»¶ç»‘å®šåˆ°å‘½ä»¤"><span>å°†äº‹ä»¶ç»‘å®šåˆ°å‘½ä»¤</span></a></h5><p>åœ¨ WPF çš„ MVVM æ¨¡å¼ä¸­ï¼Œå¾ˆå¤šæ§ä»¶äº‹ä»¶æœ¬èº«å¹¶ä¸ç›´æ¥æ”¯æŒå‘½ä»¤ï¼ˆ<code>ICommand</code>ï¼‰å±æ€§ã€‚Prism æä¾›äº†ä¸€ä¸ªè¾…åŠ©è§¦å‘è¡Œä¸ºç±» <strong><code>InvokeCommandAction</code></strong>ï¼Œå¯ä»¥æŠŠè¿™äº›äº‹ä»¶ç›´æ¥â€œæ¡¥æ¥â€åˆ° ViewModel ä¸­çš„å‘½ä»¤ï¼Œä»è€Œé¿å…å†™ä»£ç åç½®ã€‚</p><p>åœ¨ MVVM æ¶æ„é‡Œï¼š</p><ul><li><strong>ViewModel å®šä¹‰çŠ¶æ€å’Œè¡Œä¸ºï¼ˆé€šè¿‡å‘½ä»¤ï¼‰</strong></li><li><strong>View é€šè¿‡æ•°æ®ç»‘å®šæŠŠ UI æ“ä½œæ˜ å°„åˆ°å‘½ä»¤ä¸Š</strong></li></ul><p>å¯¹äºåƒæŒ‰é’®è¿™ç§è‡ªå¸¦ <code>Command</code> å±æ€§çš„æ§ä»¶ï¼Œè¿™å¾ˆè‡ªç„¶åœ°æ”¯æŒï¼›ä½†å¯¹æ²¡æœ‰ <code>Command</code> å±æ€§çš„äº‹ä»¶ï¼ˆä¾‹å¦‚ <code>ListBox.SelectionChanged</code>ã€<code>TextBox.TextChanged</code> ç­‰ï¼‰ï¼Œéœ€è¦ä¸€ç§æ–¹å¼è®©äº‹ä»¶è§¦å‘å‘½ä»¤ã€‚Prism çš„ <code>InvokeCommandAction</code> å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„ XAML æ”¯æŒã€‚</p><h6 id="invokecommandactionä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#invokecommandactionä½¿ç”¨æ–¹å¼"><span><code>InvokeCommandAction</code>ä½¿ç”¨æ–¹å¼</span></a></h6><ol><li><p>å¼•å…¥å‘½åç©ºé—´</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">xmlns:i=&quot;http://schemas.microsoft.com/xaml/behaviors&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">xmlns:prism=&quot;http://prismlibrary.com/&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>i</code> æ˜¯ WPF è‡ªå¸¦çš„ <strong>è¡Œä¸º/è§¦å‘å™¨</strong> å‘½åç©ºé—´ï¼ˆInteraction Triggersï¼‰ï¼›</p><p><code>prism</code> æ˜¯ Prism çš„å‘½åç©ºé—´ï¼Œåœ¨è¿™é‡Œç”¨æ¥å¼•ç”¨ <code>InvokeCommandAction</code>ã€‚</p></li><li><p>ç¼–å†™äº‹ä»¶åˆ°å‘½åçš„ç»‘å®š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListBox</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ItemsSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding Items}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> SelectionMode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Single&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i:Interaction.Triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i:EventTrigger</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> EventName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SelectionChanged&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">prism:InvokeCommandAction</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SelectedCommand}&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          CommandParameter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SomeParameter}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i:EventTrigger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i:Interaction.Triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListBox</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ <code>SelectionChanged</code> äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒPrism çš„ <code>InvokeCommandAction</code> ä¼šè°ƒç”¨ <strong>ViewModel ä¸­ç»‘å®šçš„å‘½ä»¤</strong> <code>SelectedCommand</code>ï¼›</p><p>å¯ä»¥é€šè¿‡ <code>CommandParameter</code> æ˜¾å¼ä¼ é€’ ViewModel æ‰€éœ€çš„å‚æ•°ã€‚</p></li></ol><h6 id="å¸¸ç”¨å±æ€§" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨å±æ€§"><span>å¸¸ç”¨å±æ€§</span></a></h6><p><code>Command</code>â€”â€”å¿…é¡»å±æ€§</p><p>æŒ‡å®šè¦æ‰§è¡Œçš„å‘½ä»¤ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Command=&quot;{Binding SomeViewModelCommand}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœæœªè®¾ç½®ï¼Œè¡Œä¸ºä¸ä¼šå·¥ä½œã€‚</p><hr><p><code>CommandParameter</code>â€”â€”å¯é€‰å‚æ•°</p><p>ç”¨äºæ˜¾å¼å‘å‘½ä»¤ä¼ é€’å›ºå®šå€¼æˆ–ç»‘å®šå€¼ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">CommandParameter=&quot;{Binding MyParameter}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è‹¥åŒæ—¶æœªè®¾ç½®ï¼Œå¹¶ä¸”æœªè®¾ç½® <code>TriggerParameterPath</code>ï¼Œè¯¥è¡Œä¸ºä¼šæŠŠäº‹ä»¶å‚æ•°ï¼ˆEventArgsï¼‰æœ¬èº«ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‘½ä»¤ï¼ˆè¿™åœ¨æŸäº›åœºæ™¯ä¸­ä¹Ÿæœ‰ç”¨ï¼‰ã€‚</p><hr><p><code>TriggerParameterPath</code>â€”â€”ä»äº‹ä»¶å‚æ•°æå–å­å±æ€§</p><p>WPF äº‹ä»¶é€šå¸¸æœ‰å¤æ‚çš„ EventArgs ç±»å‹ã€‚å¦‚æœå¸Œæœ›åªä¼ é€’ EventArgs å¯¹è±¡çš„æŸä¸ªå±æ€§ç»™å‘½ä»¤ï¼Œå¯ä»¥æŒ‡å®šè·¯å¾„ã€‚ä¾‹å¦‚åœ¨ <code>SelectionChanged</code> äº‹ä»¶ä¸­ï¼Œå¯èƒ½åªéœ€ <code>AddedItems</code>ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">prism:InvokeCommandAction</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{Binding SelectedCommand}&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    TriggerParameterPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;AddedItems&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Prism ä¼šä»äº‹ä»¶å‚æ•°çš„ <code>AddedItems</code> å±æ€§è¯»å–å€¼å¹¶ä¼ ç»™å‘½ä»¤ã€‚æ­¤ç‰¹æ€§è®©ä½ ä»äº‹ä»¶æ•°æ®ä¸­æå– ViewModel æ›´å…³å¿ƒçš„éƒ¨åˆ†ã€‚</p><hr><p><code>AutoEnable</code>â€”â€”æ ¹æ®<code>CanExecute</code>è‡ªåŠ¨å¯ç”¨/ç¦ç”¨æ§ä»¶</p><p>é»˜è®¤å€¼ä¸º <code>True</code>ï¼ŒPrism ä¼šæ ¹æ®å‘½ä»¤çš„ <code>CanExecute</code> è¿”å›å€¼è‡ªåŠ¨å¯ç”¨æˆ–ç¦ç”¨å…³è”çš„ UI å…ƒç´ ï¼š</p><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">AutoEnable=&quot;true&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Okita1027/kd//edit/main/dotnet/wpf/Prism.md" aria-label="ç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">æœ€è¿‘æ›´æ–°</span><time class="vp-meta-info" datetime="2026-01-12T15:34:59.000Z" data-allow-mismatch>2026/1/12 15:34</time></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 96156298+Okita1027@users.noreply.github.com">Okita1027</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/kd/dotnet/wpf/ReactiveUI.html" aria-label="ReactiveUI"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ReactiveUI</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/kd/assets/app-DXMAELBf.js" defer></script>
  </body>
</html>
